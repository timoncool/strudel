import{P as E,K as lc,L as me}from"./index.CXEd7qFE.js";import{o as ic,e as re,g as Yt}from"./index.Ds4Xb5JZ.js";if(typeof DelayNode<"u"){class t extends DelayNode{constructor(c,n,o,s){super(c),n=Math.abs(n),this.delayTime.value=o;const d=c.createGain();d.gain.value=Math.min(Math.abs(s),.995),this.feedback=d.gain;const a=c.createGain();return a.gain.value=n,this.delayGain=a,this.connect(d),this.connect(a),d.connect(this),this.connect=l=>a.connect(l),this}start(c){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,c+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(e,c,n){return new t(this,e,c,n)}}var jt={};jt.generateReverb=function(t,e){for(var c=t.audioContext||new AudioContext,n=c.sampleRate,o=t.numChannels||2,s=t.decayTime*1.5,d=Math.round(t.decayTime*n),a=Math.round(s*n),l=Math.round((t.fadeInTime||0)*n),i=Math.pow(1/1e3,1/d),h=c.createBuffer(o,a,n),u=0;u<o;u++){for(var G=h.getChannelData(u),X=0;X<a;X++)G[X]=Gc()*Math.pow(i,X);for(var X=0;X<l;X++)G[X]*=X/l}hc(h,t.lpFreqStart||0,t.lpFreqEnd||0,t.decayTime,e)};jt.generateGraph=function(t,e,c,n,o){var s=document.createElement("canvas");s.width=e,s.height=c;var d=s.getContext("2d");d.fillStyle="#000",d.fillRect(0,0,s.width,s.height),d.fillStyle="#fff";for(var a=e/t.length,l=c/(o-n),i=0;i<t.length;i++)d.fillRect(i*a,c-(t[i]-n)*l,1,1);return s};var hc=function(t,e,c,n,o){if(e==0){o(t);return}var s=uc(t),d=new OfflineAudioContext(t.numberOfChannels,s[0].length,t.sampleRate),a=d.createBufferSource();a.buffer=t;var l=d.createBiquadFilter();e=Math.min(e,t.sampleRate/2),c=Math.min(c,t.sampleRate/2),l.type="lowpass",l.Q.value=1e-4,l.frequency.setValueAtTime(e,0),l.frequency.linearRampToValueAtTime(c,n),a.connect(l),l.connect(d.destination),a.start(),d.oncomplete=function(i){o(i.renderedBuffer),l.disconnect(),a.disconnect()},d.startRendering(),window.filterNode=l},uc=function(t){for(var e=[],c=0;c<t.numberOfChannels;c++)e[c]=t.getChannelData(c);return e},Gc=function(){return Math.random()*2-1};let ye=t=>console.log(t);function bc(t,e="superdough"){Y(`[${e}] error: ${t.message}`)}const Y=(...t)=>ye(...t),Xc=t=>{ye=t},Zc=t=>{if(typeof t!="string")return[];const[e,c="",n]=t.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return e?[e,c,n?Number(n):void 0]:[]},pc={c:0,d:2,e:4,f:5,g:7,a:9,b:11},mc={"#":1,b:-1,s:1,f:-1},rc=t=>t?.split("").reduce((e,c)=>e+mc[c],0)||0,Qt=(t,e=3)=>{const[c,n,o=e]=Zc(t);if(!c)throw new Error('not a note: "'+t+'"');const s=pc[c.toLowerCase()],d=rc(n);return(Number(o)+1)*12+s+d},yc=t=>Math.pow(2,(t-69)/12)*440,nt=(t,e,c)=>Math.min(Math.max(t,e),c),Wc=t=>12*Math.log(t/440)/Math.LN2+69,Vc=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:c,note:n}=t;return typeof c=="number"?Wc(c):typeof n=="string"?Qt(n):typeof n=="number"?n:e};function B(t,e=0,c){return isNaN(Number(t))?(!c&&Y(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const We=(t,e)=>(t%e+e)%e,de=(t,e)=>We(Math.round(B(t,0)),e);function Lc(t,e){return t/e}function Ve(t,e){const{s:c,n=0}=t;let o=Vc(t,36),s=o-36,d,a=0;if(Array.isArray(e))a=de(n,e.length),d=e[a];else{const i=u=>Qt(u)-o,h=Object.keys(e).filter(u=>!u.startsWith("_")).reduce((u,G,X)=>!u||Math.abs(i(G))<Math.abs(i(u))?G:u,null);s=-i(h),a=de(n,e[h].length),d=e[h][a]}const l=`${c}:${a}`;return{transpose:s,url:d,index:a,midi:o,label:l}}const Nt=(t,e)=>Object.fromEntries(Object.entries(e).map(([c,n])=>[c,t[n]])),Le=t=>{try{return new URL(".",new URL(t)).href.replace(/\/$/,"")}catch{return t.split("/").slice(0,-1).join("/")}};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(t,e,c=1,n=0){const o=Math.floor(nt(n,0,1)*e.length),s=e.sampleRate*t,d=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let a=0;a<e.numberOfChannels;a++){let l=e.getChannelData(a),i=d.getChannelData(a);for(let h=0;h<s;h++){let u=(o+h*Math.abs(c))%l.length;c<1&&(u=u*-1),i[h]=l.at(u)||0}}return d},AudioContext.prototype.createReverb=function(t,e,c,n,o,s,d){const a=this.createConvolver();return a.generate=(l=2,i=.1,h=15e3,u=1e3,G,X,b)=>{a.duration=l,a.fade=i,a.lp=h,a.dim=u,a.ir=G,a.irspeed=X,a.irbegin=b,G?a.buffer=this.adjustLength(l,G,X,b):jt.generateReverb({audioContext:this,numChannels:2,decayTime:l,fadeInTime:i,lpFreqStart:h,lpFreqEnd:u},Z=>{a.buffer=Z})},a.generate(t,e,c,n,o,s,d),a});var oe={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class t extends GainNode{constructor(c,n){if(super(c),!oe[n])throw new Error("vowel: unknown vowel "+n);const{gains:o,qs:s,freqs:d}=oe[n];this.makeupGain=c.createGain(),this.audioNodes=[];for(let a=0;a<5;a++){const l=c.createGain();l.gain.value=o[a];const i=c.createBiquadFilter();i.type="bandpass",i.Q.value=s[a],i.frequency.value=d[a],super.connect(i),i.connect(l),this.audioNodes.push(i),l.connect(this.makeupGain),this.audioNodes.push(l)}return this.makeupGain.gain.value=8,this}connect(c){this.makeupGain.connect(c)}disconnect(){this.makeupGain.disconnect(),this.audioNodes.forEach(c=>c.disconnect()),super.disconnect(),this.makeupGain=null,this.audioNodes=null}}AudioContext.prototype.createVowelFilter=function(e){return new t(this,e)}}const zc="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oUil7InVzZSBzdHJpY3QiO3ZhciBBZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIE5lPShSLFcsSCk9PlcgaW4gUj9BZShSLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkh9KTpSW1ddPUg7dmFyIHh0PShSLFcsSCk9Pk5lKFIsdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxIKTtjbGFzcyBIIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBpPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIWk/ITE6KHRoaXMuc3RhcnRlZD1pLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyB6dHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYz1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYyksZVtzKzFdPS1NYXRoLnNpbihjKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsaT0xO3RoaXMuc2l6ZT5pO2k8PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgbz0wO288dGhpcy5fYml0cmV2Lmxlbmd0aDtvKyspe3RoaXMuX2JpdHJldltvXT0wO2Zvcih2YXIgYT0wO2E8dGhpcy5fd2lkdGg7YSs9Mil7dmFyIHU9dGhpcy5fd2lkdGgtYS0yO3RoaXMuX2JpdHJldltvXXw9KG8+Pj5hJjMpPDx1fX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IG09dVthXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG8sbSxyKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgbT11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQobyxtLHIpfXZhciBjPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7aT1lL3I8PDE7dmFyIGY9aT4+PjI7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIGQ9bytmLGw9byxwPTA7bDxkO2wrPTIscCs9cil7Y29uc3QgbT1sLEk9bStmLGc9SStmLHY9ZytmLHc9dFttXSxQPXRbbSsxXSxTPXRbSV0sVj10W0krMV0sTT10W2ddLHg9dFtnKzFdLHk9dFt2XSxBPXRbdisxXSxMPXcsTj1QLEQ9aFtwXSxPPWMqaFtwKzFdLEY9UypELVYqTyx6PVMqTytWKkQsaj1oWzIqcF0sQz1jKmhbMipwKzFdLG50PU0qai14KkMsaXQ9TSpDK3gqaixvdD1oWzMqcF0sYXQ9YypoWzMqcCsxXSxjdD15Km90LUEqYXQsdXQ9eSphdCtBKm90LGh0PUwrbnQsSj1OK2l0LFg9TC1udCxsdD1OLWl0LGZ0PUYrY3QsdHQ9eit1dCxldD1jKihGLWN0KSxkdD1jKih6LXV0KSxwdD1odCtmdCxfdD1KK3R0LEJ0PWh0LWZ0LHd0PUotdHQsVHQ9WCtkdCxQdD1sdC1ldCxNdD1YLWR0LFN0PWx0K2V0O3RbbV09cHQsdFttKzFdPV90LHRbSV09VHQsdFtJKzFdPVB0LHRbZ109QnQsdFtnKzFdPXd0LHRbdl09TXQsdFt2KzFdPVN0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2UrMV0sdT1pW2Urc10sYz1pW2UrcysxXSxoPW8rdSxmPWErYyxkPW8tdSxsPWEtYztyW3RdPWgsclt0KzFdPWYsclt0KzJdPWQsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPXRoaXMuX2ludj8tMToxLGE9cyoyLHU9cyozLGM9aVtlXSxoPWlbZSsxXSxmPWlbZStzXSxkPWlbZStzKzFdLGw9aVtlK2FdLHA9aVtlK2ErMV0sbT1pW2UrdV0sST1pW2UrdSsxXSxnPWMrbCx2PWgrcCx3PWMtbCxQPWgtcCxTPWYrbSxWPWQrSSxNPW8qKGYtbSkseD1vKihkLUkpLHk9ZytTLEE9ditWLEw9dyt4LE49UC1NLEQ9Zy1TLE89di1WLEY9dy14LHo9UCtNO3JbdF09eSxyW3QrMV09QSxyW3QrMl09TCxyW3QrM109TixyW3QrNF09RCxyW3QrNV09TyxyW3QrNl09RixyW3QrN109en1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxpPWUvcjw8MSxvLGEsdT10aGlzLl9iaXRyZXY7aWYoaT09PTQpZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCBWdD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKG8sVnQ+Pj4xLHI+Pj4xKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgVnQ9dVthXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChvLFZ0Pj4+MSxyPj4+MSl9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+MSxkPWY+Pj4xLGw9ZD4+PjE7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPXIpe3ZhciBJPW8rcCxnPUkrZCx2PWcrZCx3PXYrZCxQPXRbSV0sUz10W0krMV0sVj10W2ddLE09dFtnKzFdLHg9dFt2XSx5PXRbdisxXSxBPXRbd10sTD10W3crMV0sTj1QLEQ9UyxPPWhbbV0sRj1jKmhbbSsxXSx6PVYqTy1NKkYsaj1WKkYrTSpPLEM9aFsyKm1dLG50PWMqaFsyKm0rMV0saXQ9eCpDLXkqbnQsb3Q9eCpudCt5KkMsYXQ9aFszKm1dLGN0PWMqaFszKm0rMV0sdXQ9QSphdC1MKmN0LGh0PUEqY3QrTCphdCxKPU4raXQsWD1EK290LGx0PU4taXQsZnQ9RC1vdCx0dD16K3V0LGV0PWoraHQsZHQ9Yyooei11dCkscHQ9Yyooai1odCksX3Q9Sit0dCxCdD1YK2V0LHd0PWx0K3B0LFR0PWZ0LWR0O2lmKHRbSV09X3QsdFtJKzFdPUJ0LHRbZ109d3QsdFtnKzFdPVR0LHA9PT0wKXt2YXIgUHQ9Si10dCxNdD1YLWV0O3Rbdl09UHQsdFt2KzFdPU10O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIgU3Q9bHQsSWU9LWZ0LF9lPUosQmU9LVgsd2U9LWMqcHQsVGU9LWMqZHQsUGU9LWMqZXQsTWU9LWMqdHQsU2U9U3Qrd2UsVmU9SWUrVGUseGU9X2UrTWUseWU9QmUtUGUsRXQ9bytkLXAsRHQ9bytmLXA7dFtFdF09U2UsdFtFdCsxXT1WZSx0W0R0XT14ZSx0W0R0KzFdPXllfX19fV9zaW5nbGVSZWFsVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89aVtlXSxhPWlbZStzXSx1PW8rYSxjPW8tYTtyW3RdPXUsclt0KzFdPTAsclt0KzJdPWMsclt0KzNdPTB9X3NpbmdsZVJlYWxUcmFuc2Zvcm00KHQsZSxzKXtjb25zdCByPXRoaXMuX291dCxpPXRoaXMuX2RhdGEsbz10aGlzLl9pbnY/LTE6MSxhPXMqMix1PXMqMyxjPWlbZV0saD1pW2Urc10sZj1pW2UrYV0sZD1pW2UrdV0sbD1jK2YscD1jLWYsbT1oK2QsST1vKihoLWQpLGc9bCttLHY9cCx3PS1JLFA9bC1tLFM9cCxWPUk7clt0XT1nLHJbdCsxXT0wLHJbdCsyXT12LHJbdCszXT13LHJbdCs0XT1QLHJbdCs1XT0wLHJbdCs2XT1TLHJbdCs3XT1WfX1sZXQgV3Q9bj0+Y29uc29sZS5sb2cobik7Y29uc3QgcXQ9KC4uLm4pPT5XdCguLi5uKSxMdD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHl0PW49Pm4vKDErbiksWXQ9KG4sdCk9PihuJXQrdCkldCxqdD0obix0KT0+KDErdCkqbi8oMSt0Kk1hdGguYWJzKG4pKSxLPShuLHQpPT5NYXRoLnRhbmgobiooMSt0KSksSHQ9KG4sdCk9Pkx0KCgxK3QpKm4sLTEsMSksQXQ9KG4sdCk9PntsZXQgZT0oMSsuNSp0KSpuO2NvbnN0IHM9WXQoZSsxLDQpO3JldHVybiAxLU1hdGguYWJzKHMtMil9LEt0PShuLHQpPT5NYXRoLnNpbihNYXRoLlBJLzIqQXQobix0KSksVXQ9KG4sdCk9Pntjb25zdCBlPXl0KE1hdGgubG9nMXAodCkpLHM9KG4tZS8zKm4qbipuKS8oMS1lLzMpO3JldHVybiBLKHMsdCl9LE50PShuLHQsZT0hMSk9Pntjb25zdCBzPTErMip0LGk9LjA3Knl0KE1hdGgubG9nMXAodCkpLG89SyhuK2ksMip0KSxhPUsoZT9pOi1uK2ksMip0KSx1PW8tYSxjPTEvTWF0aC5jb3NoKHMqaSksaD1jKmMsZj1NYXRoLm1heCgxZS04LChlPzE6MikqcypoKTtyZXR1cm4gSyh1L2YsdCl9LE90PXtzY3VydmU6anQsc29mdDpLLGhhcmQ6SHQsY3ViaWM6VXQsZGlvZGU6TnQsYXN5bToobix0KT0+TnQobix0LCEwKSxmb2xkOkF0LHNpbmVmb2xkOkt0LGNoZWJ5c2hldjoobix0KT0+e2NvbnN0IGU9MTAqTWF0aC5sb2cxcCh0KTtsZXQgcz0xLHI9bixpLG89MDtmb3IobGV0IGE9MTthPDY0O2ErKyl7aWYoYTwyKXtvKz1hPT0wP3M6cjtjb250aW51ZX1pPTIqbipzLXIscj1zLHM9aSxhJTI9PT0wJiYobys9TWF0aC5taW4oMS4zKmUvYSwyKSppKX1yZXR1cm4gSyhvLGUvMjApfX0sc3Q9T2JqZWN0LmZyZWV6ZShPYmplY3Qua2V5cyhPdCkpLFp0PW49PntsZXQgdD1uO3R5cGVvZiBuPT0ic3RyaW5nIiYmKHQ9c3QuaW5kZXhPZihuKSx0PT09LTEmJihxdChgW3N1cGVyZG91Z2hdIENvdWxkIG5vdCBmaW5kIHdhdmVzaGFwaW5nIGFsZ29yaXRobSAke259LgogICAgICAgIEF2YWlsYWJsZSBvcHRpb25zIGFyZSAke3N0LmpvaW4oIiwgIil9LgogICAgICAgIERlZmF1bHRpbmcgdG8gJHtzdFswXX0uYCksdD0wKSk7Y29uc3QgZT1zdFt0JXN0Lmxlbmd0aF07cmV0dXJuIE90W2VdfSxVPTEyOCxrPU1hdGguUEksRT0yKmssWT0xL3NhbXBsZVJhdGUsVD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLCR0PShuLHQsZSk9PmUqKHQtbikrbixiPShuLHQpPT5uW3RdPz9uWzBdLFo9bj0+bi1NYXRoLmZsb29yKG4pLCQ9bj0+bnwwLEc9bj0+JChuKy41KSxHdD1uPT4kKG4rMSksRnQ9bj0+bi0kKG4pLHE9bj0+e2NvbnN0IHQ9bioqMjtyZXR1cm4gbiooMjcrdCkvKDI3KzkqdCl9LEN0PShuLHQpPT57aWYobjwyKXJldHVybiByPT4wO2NvbnN0IGU9dC8obi0xKSxzPXQqLjU7cmV0dXJuIHI9PnIqZS1zfSxRPShuLHQpPT5uKk1hdGgucG93KDIsdC8xMik7ZnVuY3Rpb24gUXQobix0KXt0PU1hdGgubWluKHQsMS10KTtjb25zdCBlPTEvdDtyZXR1cm4gbjx0PyhuKj1lLDIqbi1uKioyLTEpOm4+MS10PyhuPShuLTEpKmUsbioqMisyKm4rMSk6MH1jb25zdCBtdD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKEUqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPVQodFtzXSwwLDEpLGE9VCh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtUXQobix0KX19LEp0PU9iamVjdC5rZXlzKG10KTtjbGFzcyBYdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ0aW1lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6InNrZXciLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6ImRlcHRoIixkZWZhdWx0VmFsdWU6MX0se25hbWU6InBoYXNlb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InNoYXBlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImN1cnZlIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRjb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1pbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtYXgiLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj1zLmJlZ2luWzBdO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cilyZXR1cm4hMDtjb25zdCBpPWVbMF0sbz1zLmZyZXF1ZW5jeVswXSxhPXMudGltZVswXSx1PXMuZGVwdGhbMF0sYz1zLnNrZXdbMF0saD1zLnBoYXNlb2Zmc2V0WzBdLGY9cy5jdXJ2ZVswXSxkPXMuZGNvZmZzZXRbMF0sbD1zLm1pblswXSxwPXMubWF4WzBdLG09SnRbcy5zaGFwZVswXV0sST1pWzBdLmxlbmd0aD8/MDt0aGlzLnBoYXNlPT1udWxsJiYodGhpcy5waGFzZT1GdChhKm8raCkpO2NvbnN0IGc9bypZO2ZvcihsZXQgdj0wO3Y8STt2Kyspe2ZvcihsZXQgdz0wO3c8aS5sZW5ndGg7dysrKXtsZXQgUD0obXRbbV0odGhpcy5waGFzZSxjKStkKSp1O1A9TWF0aC5wb3coUCxmKSxpW3ddW3ZdPVQoUCxsLHApfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIixYdCk7Y2xhc3MgdGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNvYXJzZVswXT8/MDthPU1hdGgubWF4KDEsYSk7Zm9yKGxldCB1PTA7dTxVO3UrKylmb3IobGV0IGM9MDtjPHIubGVuZ3RoO2MrKylpW2NdW3VdPXUlYT09PTA/cltjXVt1XTppW2NdW3UtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIix0ZSk7Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuY3J1c2hbMF0/Pzg7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8VTt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspe2NvbnN0IGg9TWF0aC5wb3coMixhLTEpO2lbY11bdV09TWF0aC5yb3VuZChyW2NdW3VdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLGVlKTtjbGFzcyBzZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5zaGFwZVswXTthPWE8MT9hOi45OTk5OTk5OTk2LGE9MiphLygxLWEpO2NvbnN0IHU9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGM9MDtjPFU7YysrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKWlbaF1bY109KDErYSkqcltoXVtjXS8oMSthKk1hdGguYWJzKHJbaF1bY10pKSp1O3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2hhcGUtcHJvY2Vzc29yIixzZSk7Y2xhc3MgUnR7Y29uc3RydWN0b3IoKXt4dCh0aGlzLCJzMCIsMCk7eHQodGhpcywiczEiLDApfXVwZGF0ZSh0LGUscz0wKXtzPVQocywwLDEpLGU9VChlLDAsc2FtcGxlUmF0ZS8yLTEpO2NvbnN0IHI9VCgyKk1hdGguc2luKGUqaypZKSwwLDEuMTQpLG89MS1NYXRoLnBvdyguNSw4KnMrMSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgcmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBSdCxuZXcgUnRdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9VChzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgZD0wO2Q8VTtkKyspdT09Im5vbmUiP2lbZl1bZF09cltmXVtkXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW2RdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW2RdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtkXT1yW2ZdW2RdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW2RdPXJbZl1bZF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIscmUpO2NsYXNzIG5lIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztjb25zdCBhPXMucVswXSx1PVQoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYz1zLmZyZXF1ZW5jeVswXTtjPWMqRSpZLGM9Yz4xPzE6Yztjb25zdCBoPU1hdGgubWluKDgsYSouMTMpO2xldCBmPTEvdSpNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBkPTA7ZDxVO2QrKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgcD10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0ocShyW2xdW2RdKnUtaCpwKS1xKHRoaXMucDBbbF0pKSpjLHRoaXMucDFbbF0rPShxKHRoaXMucDBbbF0pLXEodGhpcy5wMVtsXSkpKmMsdGhpcy5wMltsXSs9KHEodGhpcy5wMVtsXSktcSh0aGlzLnAyW2xdKSkqYyx0aGlzLnAzW2xdKz0ocSh0aGlzLnAyW2xdKS1xKHRoaXMucDNbbF0pKSpjLGlbbF1bZF09cCpmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIsbmUpO2NsYXNzIGllIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3Ioe3Byb2Nlc3Nvck9wdGlvbnM6dH0pe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMuYWxnb3JpdGhtPVp0KHQuYWxnb3JpdGhtKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2ZvcihsZXQgYT0wO2E8VTthKyspe2NvbnN0IHU9VChiKHMucG9zdGdhaW4sYSksLjAwMSwxKSxjPU1hdGguZXhwbTEoYihzLmRpc3RvcnQsYSkpO2ZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKXtjb25zdCBmPXJbaF1bYV07aVtoXVthXT11KnRoaXMuYWxnb3JpdGhtKGYsYyl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLGllKTtjbGFzcyBvZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZT1bXX1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNCxtaW46MCxtYXg6MX0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMixtaW46MH0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZTo1LG1pbjoxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifV19cHJvY2Vzcyh0LGUscyl7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2NvbnN0IHI9ZVswXSxpPXMudm9pY2VzWzBdO2ZvcihsZXQgbz0wO288clswXS5sZW5ndGg7bysrKXtjb25zdCBhPWIocy5kZXR1bmUsbyksdT1iKHMuZnJlcXNwcmVhZCxvKSxjPWIocy5wYW5zcHJlYWQsbykqLjUrLjU7bGV0IGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyksZD1iKHMuZnJlcXVlbmN5LG8pO2Q9UShkLGEvMTAwKTtjb25zdCBsPUN0KGksdSk7Zm9yKGxldCBwPTA7cDxpO3ArKyl7Y29uc3QgbT1RKGQsbChwKSksST1aKG0qWSk7dGhpcy5waGFzZVtwXT10aGlzLnBoYXNlW3BdPz9NYXRoLnJhbmRvbSgpO2NvbnN0IGc9bXQuc2F3YmxlcCh0aGlzLnBoYXNlW3BdLEkpO3JbMF1bb10rPWcqaCxyWzFdW29dKz1nKmY7bGV0IHY9dGhpcy5waGFzZVtwXStJO3Y+PTEmJih2LT0xKSx0aGlzLnBoYXNlW3BdPXY7Y29uc3Qgdz1oO2g9ZixmPXd9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic3VwZXJzYXctb3NjaWxsYXRvciIsb2UpO2NvbnN0IGFlPTIwNDgsdnQ9bmV3IE1hcDtmdW5jdGlvbiBjZShuKXtpZighdnQuaGFzKG4pKXtjb25zdCB0PW5ldyBGbG9hdDMyQXJyYXkobik7Zm9yKGxldCBlPTA7ZTxuO2UrKyl0W2VdPS41KigxLU1hdGguY29zKEUqZS9uKSk7dnQuc2V0KG4sdCl9cmV0dXJuIHZ0LmdldChuKX1jbGFzcyB1ZSBleHRlbmRzIEh7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToicGl0Y2hGYWN0b3IiLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IodCl7dC5wcm9jZXNzb3JPcHRpb25zPXtibG9ja1NpemU6YWV9LHN1cGVyKHQpLHRoaXMudGltZUN1cnNvcj0wLHRoaXMuZmZ0U2l6ZT10aGlzLmJsb2NrU2l6ZSx0aGlzLmludmZmdFNpemU9MS90aGlzLmZmdFNpemUsdGhpcy5oYW5uV2luZG93PWNlKHRoaXMuZmZ0U2l6ZSksdGhpcy5mZnQ9bmV3IHp0KHRoaXMuZmZ0U2l6ZSksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZD10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLnRpbWVDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMubWFnbml0dWRlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZS8yKzEpLHRoaXMucGVha0luZGV4ZXM9bmV3IEludDMyQXJyYXkodGhpcy5tYWduaXR1ZGVzLmxlbmd0aCksdGhpcy5uYlBlYWtzPTB9cHJvY2Vzc09MQSh0LGUscyl7bGV0IHI9cy5waXRjaEZhY3RvcltzLnBpdGNoRmFjdG9yLmxlbmd0aC0xXTtyPDAmJihyPXIqLjI1KSxyPU1hdGgubWF4KDAscisxKTtmb3IobGV0IGk9MDtpPHRoaXMubmJJbnB1dHM7aSsrKWZvcihsZXQgbz0wO288dFtpXS5sZW5ndGg7bysrKXtjb25zdCBhPXRbaV1bb10sdT1lW2ldW29dO3RoaXMuYXBwbHlIYW5uV2luZG93KGEpLHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlcixhKSx0aGlzLmNvbXB1dGVNYWduaXR1ZGVzKCksdGhpcy5maW5kUGVha3MoKSx0aGlzLnNoaWZ0UGVha3MociksdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkKSx0aGlzLmZmdC5mcm9tQ29tcGxleEFycmF5KHRoaXMudGltZUNvbXBsZXhCdWZmZXIsdSksdGhpcy5hcHBseUhhbm5XaW5kb3codSl9dGhpcy50aW1lQ3Vyc29yKz10aGlzLmhvcFNpemV9YXBwbHlIYW5uV2luZG93KHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5ibG9ja1NpemU7ZSsrKXRbZV0qPXRoaXMuaGFubldpbmRvd1tlXSoxLjYyfWNvbXB1dGVNYWduaXR1ZGVzKCl7bGV0IHQ9MCxlPTA7Zm9yKDt0PHRoaXMubWFnbml0dWRlcy5sZW5ndGg7KXtjb25zdCBzPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZV0scj10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2UrMV07dGhpcy5tYWduaXR1ZGVzW3RdPXMqKjIrcioqMix0Kz0xLGUrPTJ9fWZpbmRQZWFrcygpe3RoaXMubmJQZWFrcz0wO2xldCB0PTI7Y29uc3QgZT10aGlzLm1hZ25pdHVkZXMubGVuZ3RoLTI7Zm9yKDt0PGU7KXtjb25zdCBzPXRoaXMubWFnbml0dWRlc1t0XTtpZih0aGlzLm1hZ25pdHVkZXNbdC0xXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QtMl0+PXMpe3QrKztjb250aW51ZX1pZih0aGlzLm1hZ25pdHVkZXNbdCsxXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QrMl0+PXMpe3QrKztjb250aW51ZX10aGlzLnBlYWtJbmRleGVzW3RoaXMubmJQZWFrc109dCx0aGlzLm5iUGVha3MrKyx0Kz0yfX1zaGlmdFBlYWtzKHQpe3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkLmZpbGwoMCk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iUGVha3M7ZSsrKXtjb25zdCBzPXRoaXMucGVha0luZGV4ZXNbZV0scj1HKHMqdCk7aWYocj50aGlzLm1hZ25pdHVkZXMubGVuZ3RoKWJyZWFrO2xldCBpPTAsbz10aGlzLmZmdFNpemU7ZT4wJiYoaT1zLUcoKHMtdGhpcy5wZWFrSW5kZXhlc1tlLTFdKS8yKSksZTx0aGlzLm5iUGVha3MtMSYmKG89cytHdCgodGhpcy5wZWFrSW5kZXhlc1tlKzFdLXMpLzIpKTtjb25zdCBhPWktcyx1PW8tcyxjPUUqdGhpcy5pbnZmZnRTaXplKihyLXMpLGg9TWF0aC5jb3MoYyp0aGlzLnRpbWVDdXJzb3IpLGY9TWF0aC5zaW4oYyp0aGlzLnRpbWVDdXJzb3IpO2ZvcihsZXQgZD1hO2Q8dTtkKyspe2NvbnN0IGw9cytkLHA9citkO2lmKHA+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7Y29uc3QgbT0yKmwsST1tKzEsZz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW21dLHY9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltJXSx3PWcqaC12KmYsUD1nKmYrdipoLFM9MipwLFY9UysxO3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1NdKz13LHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1ZdKz1QfX19fXJlZ2lzdGVyUHJvY2Vzc29yKCJwaGFzZS12b2NvZGVyLXByb2Nlc3NvciIsdWUpO2NsYXNzIGhlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoaT0tayx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9ayx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2xldCBpPTEsbztmb3IobGV0IGE9MDthPChyWzBdLmxlbmd0aD8/MCk7YSsrKXtjb25zdCB1PSgxLVQoYihzLnB1bHNld2lkdGgsYSksLS45OSwuOTkpKSprLGM9YihzLmRldHVuZSxhKSxoPVEoYihzLmZyZXF1ZW5jeSxhKSxjLzEwMCk7bz1oKkUqWSx0aGlzLmRwaGlmKz0uMSooby10aGlzLmRwaGlmKSxpKj0uOTk5OCx0aGlzLmVudmYrPS4xKihpLXRoaXMuZW52ZiksdGhpcy5CPTIuMyooMS0xZS00KmgpLHRoaXMuQjwwJiYodGhpcy5CPTApLHRoaXMucGhpKz10aGlzLmRwaGlmLHRoaXMucGhpPj1rJiYodGhpcy5waGktPUUpO2xldCBmPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkwKTt0aGlzLlkwPS41KihmK3RoaXMuWTApO2xldCBkPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkxK3UpO3RoaXMuWTE9LjUqKGQrdGhpcy5ZMSk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVthXT0uMTUqKGYtZCkqdGhpcy5lbnZmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigicHVsc2Utb3NjaWxsYXRvciIsaGUpO2NvbnN0IGd0PXtiaXRDOmZ1bmN0aW9uKG4sdCxlKXtyZXR1cm4gbiZ0P2U6MH0sYnI6ZnVuY3Rpb24obix0PTgpe2lmKHQ+MzIpdGhyb3cgbmV3IEVycm9yKCJicigpIFNpemUgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAzMiIpO2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllfD1ndC5iaXRDKG4sMTw8cywxPDx0LShzKzEpKTtyZXR1cm4gZX0sc2luZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zaW4obiprLzEyOCl9LGNvc2Y6ZnVuY3Rpb24obil7cmV0dXJuIE1hdGguY29zKG4qay8xMjgpfSx0YW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnRhbihuKmsvMTI4KX0scmVnRzpmdW5jdGlvbihuLHQpe3JldHVybiB0LnRlc3Qobi50b1N0cmluZygyKSl9fTtsZXQgcnQsYnQ7ZnVuY3Rpb24gbGUobil7aWYocnQ9PW51bGwpe3J0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE1hdGgpLGJ0PXJ0Lm1hcChzPT5NYXRoW3NdKTtjb25zdCB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGd0KSxlPXQubWFwKHM9Pmd0W3NdKTtydC5wdXNoKCJpbnQiLCJ3aW5kb3ciLC4uLnQpLGJ0LnB1c2goTWF0aC5mbG9vcixnbG9iYWxUaGlzLC4uLmUpfXJldHVybiBuZXcgRnVuY3Rpb24oLi4ucnQsInQiLGByZXR1cm4gMCwKJHtufHwwfTtgKS5iaW5kKGdsb2JhbFRoaXMsLi4uYnQpfWNsYXNzIGZlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBvcnQub25tZXNzYWdlPXQ9PntsZXR7Y29kZVRleHQ6ZX09dC5kYXRhO2NvbnN0e2J5dGVCZWF0U3RhcnRUaW1lOnN9PXQuZGF0YTtzIT1udWxsJiYodGhpcy50PTAsdGhpcy5pbml0aWFsT2Zmc2V0PU1hdGguZmxvb3IocykpLGU9ZS50cmltKCkucmVwbGFjZSgvXmV2YWxcKHVuZXNjYXBlXChlc2NhcGUoPzpgfFwoJ3xcKCJ8XChgKSguKj8pKD86YHwnXCl8IlwpfGBcKSkucmVwbGFjZVwoXC91XChcLlwuXClcL2csWyInYF1cJDElWyInYF1cKVwpXCkkLywocixpKT0+dW5lc2NhcGUoZXNjYXBlKGkpLnJlcGxhY2UoL3UoLi4pL2csIiQxJSIpKSksdGhpcy5mdW5jPWxlKGUpfSx0aGlzLmluaXRpYWxPZmZzZXQ9MCx0aGlzLnQ9bnVsbCx0aGlzLmZ1bmM9bnVsbH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH1dfXByb2Nlc3ModCxlLHMpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTt0aGlzLnQ9PW51bGwmJih0aGlzLnQ9cy5iZWdpblswXSpzYW1wbGVSYXRlKTtjb25zdCByPWVbMF0saT0yNTYqWTtmb3IobGV0IG89MDtvPHJbMF0ubGVuZ3RoO28rKyl7Y29uc3QgYT1iKHMuZGV0dW5lLG8pLHU9UShiKHMuZnJlcXVlbmN5LG8pLGEvMTAwKSxjPWkqdSp0aGlzLnQrdGhpcy5pbml0aWFsT2Zmc2V0LGY9KHRoaXMuZnVuYyhjKSYyNTUpLzEyNy41LTEsZD1UKGYqLjIsLS40LC40KTtmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdW29dPWQ7dGhpcy50Kyt9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJieXRlLWJlYXQtcHJvY2Vzc29yIixmZSk7Y2xhc3MgZGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImF0dGFjayIsZGVmYXVsdFZhbHVlOi4wMDUsbWluVmFsdWU6MH0se25hbWU6ImRlY2F5IixkZWZhdWx0VmFsdWU6LjE0LG1pblZhbHVlOjB9LHtuYW1lOiJzdXN0YWluIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTowLG1heFZhbHVlOjF9LHtuYW1lOiJyZWxlYXNlIixkZWZhdWx0VmFsdWU6LjEsbWluVmFsdWU6MH0se25hbWU6ImF0dGFja0N1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToiZGVjYXlDdXJ2ZSIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6LTEsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2VDdXJ2ZSIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6LTEsbWF4VmFsdWU6MX0se25hbWU6InBlYWsiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToicmV0cmlnZ2VyIixkZWZhdWx0VmFsdWU6MSxtaW5WYWx1ZTowLG1heFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy52YWw9MCx0aGlzLnNlZ0lkeD0wLHRoaXMuc3RhdGU9MCx0aGlzLmJlZ2luVGltZT0wLHRoaXMuZW5kVGltZT0wLHRoaXMuYXR0YWNrU3RhcnQ9MH1fd2FycCh0LGUscz04KXtpZih0PT09MHx8dD09PTEpcmV0dXJuIHQ7aWYoZT4wKXtjb25zdCByPTErcyplO3JldHVybiAxLU1hdGgucG93KDEtdCxyKX1lbHNle2NvbnN0IHI9MS1zKmU7cmV0dXJuIE1hdGgucG93KHQscil9fV9hZHZhbmNlKHQsZSxzLHIpe2lmKHM9PT0wfHx0PT09ZSl0aGlzLnZhbD1lO2Vsc2V7Y29uc3QgaT1NYXRoLm1pbigxLChjdXJyZW50VGltZS10aGlzLmJlZ2luVGltZSkvcyksbz10aGlzLl93YXJwKGkscik7dGhpcy52YWw9dCsoZS10KSpvfX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPWVbMF1bMF07aWYoIXIpcmV0dXJuITA7Y29uc3QgaT1iKHMuYmVnaW4sMCksbz1iKHMucmV0cmlnZ2VyLDApPj0uNTtpIT09dGhpcy5iZWdpblRpbWUmJih0aGlzLnN0YXRlPT09MHx8bykmJih0aGlzLmJlZ2luVGltZT1pLHRoaXMuc3RhdGU9MSx0aGlzLmVuZFRpbWU9YihzLmVuZCwwKSx0aGlzLmF0dGFja1N0YXJ0PXRoaXMudmFsKTtjb25zdCBhPXRoaXMuZW5kVGltZS10aGlzLmJlZ2luVGltZTtmb3IobGV0IHU9MDt1PHIubGVuZ3RoO3UrKyl7Y29uc3QgYz1iKHMuYXR0YWNrLHUpLGg9YihzLmRlY2F5LHUpLGY9YihzLnN1c3RhaW4sdSksZD1iKHMucmVsZWFzZSx1KSxsPWIocy5hdHRhY2tDdXJ2ZSx1KSxwPWIocy5kZWNheUN1cnZlLHUpLG09YihzLnJlbGVhc2VDdXJ2ZSx1KSxJPWIocy5wZWFrLHUpLGc9W3t0aW1lOk51bWJlci5QT1NJVElWRV9JTkZJTklUWSxzdGFydDowLHRhcmdldDowfSx7dGltZTpjLHN0YXJ0OnRoaXMuYXR0YWNrU3RhcnQsdGFyZ2V0OjEsY3VydmU6bH0se3RpbWU6YytoLHN0YXJ0OjEsdGFyZ2V0OmYsY3VydmU6cH0se3RpbWU6YSxzdGFydDpmLHRhcmdldDpmfSx7dGltZTphK2Qsc3RhcnQ6Zix0YXJnZXQ6MCxjdXJ2ZTptfV07bGV0e3RpbWU6dixzdGFydDp3LHRhcmdldDpQLGN1cnZlOlN9PWdbdGhpcy5zdGF0ZV07Zm9yKHRoaXMuX2FkdmFuY2UodyxQLHYsUyk7Y3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWU+PXY7KXRoaXMuc3RhdGU9KHRoaXMuc3RhdGUrMSklZy5sZW5ndGgsdj1nW3RoaXMuc3RhdGVdLnRpbWU7clt1XT10aGlzLnZhbCpJfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZW52ZWxvcGUtcHJvY2Vzc29yIixkZSk7Y29uc3QgQj1PYmplY3QuZnJlZXplKHtOT05FOjAsQVNZTToxLE1JUlJPUjoyLEJFTkRQOjMsQkVORE06NCxCRU5ETVA6NSxTWU5DOjYsUVVBTlQ6NyxGT0xEOjgsUFdNOjksT1JCSVQ6MTAsU1BJTjoxMSxDSEFPUzoxMixQUklNRVM6MTMsQklOQVJZOjE0LEJST1dOSUFOOjE1LFJFQ0lQUk9DQUw6MTYsV09STUhPTEU6MTcsTE9HSVNUSUM6MTgsU0lHTU9JRDoxOSxGUkFDVEFMOjIwLEZMSVA6MjF9KTtmdW5jdGlvbiBwZShuKXtyZXR1cm4gbj1uKzIxMjc5MTIyMTQrKG48PDEyKSxuPW5eMzM0NTA3MjcwMF5uPj4+MTksbj1uKzM3NDc2MTM5Mysobjw8NSksbj1uKzM1NTA2MzUxMTZebjw8OSxuPW4rNDI1MTk5Mzc5Nysobjw8Myksbj1uXjMwNDI1OTQ1Njlebj4+PjE2LG4+Pj4wfWNvbnN0IGt0PW49PihwZShuKT4+PjgpLzE2Nzc3MjE2O2Z1bmN0aW9uIG1lKG4sdCl7bGV0IGU9MDtmb3IobGV0IHM9MDtzPHQ7cysrKWU9ZTw8MXxuJjEsbj4+Pj0xO3JldHVybiBlfWZ1bmN0aW9uIHZlKG4pe2NvbnN0IHQ9TWF0aC5mbG9vcihuKSxlPW4tdCxzPWt0KHQpLHI9a3QodCsxKTtyZXR1cm4gcysoci1zKSplfWZ1bmN0aW9uIGdlKG4sdD00KXtsZXQgZT0uNSxzPTAscj0wLGk9MTtmb3IobGV0IG89MDtvPHQ7bysrKXMrPWUqdmUobippKSxyKz1lLGUqPS41LGkqPTI7cmV0dXJuIHMvcioyLTF9Y29uc3QgSXQ9e307Y2xhc3MgYmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMTgsbWluOjB9LHtuYW1lOiJwb3NpdGlvbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnBNb2RlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjEsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNyxtaW46MCxtYXg6MX0se25hbWU6InBoYXNlcmFuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9XX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmZyYW1lTGVuPTAsdGhpcy5udW1GcmFtZXM9MCx0aGlzLnBoYXNlPVtdLHRoaXMucG9ydC5vbm1lc3NhZ2U9ZT0+e2NvbnN0e3R5cGU6cyxwYXlsb2FkOnJ9PWUuZGF0YXx8e307aWYocz09PSJ0YWJsZSIpe2NvbnN0IGk9ci5rZXk7aWYodGhpcy5mcmFtZUxlbj1yLmZyYW1lTGVuLCFJdFtpXSl7Y29uc3Qgbz1bci5mcmFtZXNdO2xldCBhPW9bMF07Zm9yKGxldCB1PTE7dTwxO3UrKyl7Y29uc3QgYz1hLmxlbmd0aD4+MSxoPWEubWFwKGY9Pntjb25zdCBkPW5ldyBGbG9hdDMyQXJyYXkoYyk7Zm9yKGxldCBsPTA7bDxjO2wrKylkW2xdPShmWzIqbF0rZlsyKmwrMV0pLzI7cmV0dXJuIGR9KTtpZihvLnB1c2goaCksYT1oLGM8PTMyKWJyZWFrfUl0W2ldPW99dGhpcy50YWJsZXM9SXRbaV0sdGhpcy5udW1GcmFtZXM9dGhpcy50YWJsZXNbMF0ubGVuZ3RofX19X21pcnJvcih0KXtyZXR1cm4gMS1NYXRoLmFicygyKnQtMSl9X3RvQml0cyh0LGU9MixzPTEyKXtjb25zdCByPXMrKGUtcykqdDtyZXR1cm57YjpyLG46RyhNYXRoLnBvdygyLHIpKX19X3dhcnBQaGFzZSh0LGUscyl7c3dpdGNoKHMpe2Nhc2UgQi5OT05FOnJldHVybiB0O2Nhc2UgQi5BU1lNOntjb25zdCByPS4wMSsuOTkqZTtyZXR1cm4gdDxyPy41KnQvcjouNSsuNSoodC1yKS8oMS1yKX1jYXNlIEIuTUlSUk9SOnJldHVybiB0aGlzLl9taXJyb3IodGhpcy5fd2FycFBoYXNlKHQsZSxCLkFTWU0pKTtjYXNlIEIuQkVORFA6cmV0dXJuIE1hdGgucG93KHQsMSszKmUpO2Nhc2UgQi5CRU5ETTpyZXR1cm4gTWF0aC5wb3codCwxLygxKzMqZSkpO2Nhc2UgQi5CRU5ETVA6cmV0dXJuIGU8LjU/dGhpcy5fd2FycFBoYXNlKHQsMS0yKmUsMyk6dGhpcy5fd2FycFBoYXNlKHQsMiplLTEsMik7Y2FzZSBCLlNZTkM6e2NvbnN0IHI9TWF0aC5wb3coMTYsZSoqMik7cmV0dXJuIHQqciUxfWNhc2UgQi5RVUFOVDp7Y29uc3R7bjpyfT10aGlzLl90b0JpdHMoZSk7cmV0dXJuICQodCpyKS9yfWNhc2UgQi5GT0xEOntjb25zdCBpPTErTWF0aC5tYXgoMSxHKDcqZSkpO3JldHVybiBNYXRoLmFicyhGdChpKnQpLS41KSoyfWNhc2UgQi5QV006e2NvbnN0IHI9VCguNSsuNDkqKDIqZS0xKSwwLDEpO3JldHVybiB0PHI/dC9yKi41Oi41Kyh0LXIpLygxLXIpKi41fWNhc2UgQi5PUkJJVDp7Y29uc3Qgcj0uNSplO3JldHVybiBaKHQrcipNYXRoLnNpbihFKjMqdCkpfWNhc2UgQi5TUElOOntjb25zdCByPS41KmUse246aX09dGhpcy5fdG9CaXRzKGUsMSw2KTtyZXR1cm4gWih0K3IqTWF0aC5zaW4oRSppKnQpKX1jYXNlIEIuQ0hBT1M6e2NvbnN0IGk9KDMuNysuMyplKSp0KigxLXQpO3JldHVybiBUKCgxLWUpKnQrZSppLDAsMSl9Y2FzZSBCLlBSSU1FUzp7Y29uc3Qgcj1vPT57aWYobzwyKXJldHVybiExO2lmKG8lMj09PTApcmV0dXJuIG89PT0yO2ZvcihsZXQgYT0zO2EqKjI8PW87YSs9MilpZihvJWE9PT0wKXJldHVybiExO3JldHVybiEwfTtsZXR7bjppfT10aGlzLl90b0JpdHMoZSwzKTtmb3IoOyFyKGkpOylpKys7cmV0dXJuICQodCppKS9pfWNhc2UgQi5CSU5BUlk6e2xldHtiOnJ9PXRoaXMuX3RvQml0cyhlLDMpO3I9RyhyKTtjb25zdCBpPTE8PHIsbz0kKHQqaSk7cmV0dXJuIG1lKG8scikvaX1jYXNlIEIuQlJPV05JQU46e2NvbnN0IHI9LjI1KmUqZ2UoNjQqdCw0KTtyZXR1cm4gWih0K3IpfWNhc2UgQi5SRUNJUFJPQ0FMOntjb25zdCByPTIrNCplLGk9dCpyLG89dCsoMS10KSpyLGE9bz4xZS0xMj9pL286MDtyZXR1cm4gVChhLDAsMSl9Y2FzZSBCLldPUk1IT0xFOntjb25zdCByPVQoLjgqZSwwLDEpLGk9LjUqKDEtciksbz0uNSooMStyKTtyZXR1cm4gdDxpP3QvaSouNTp0Pm8/LjUqKDErKHQtbykvKDEtbykpOi41fWNhc2UgQi5MT0dJU1RJQzp7bGV0IHI9dDtjb25zdCBpPTMuNisuNCplLG89MStHKDIqZSk7Zm9yKGxldCBhPTA7YTxvO2ErKylyPWkqciooMS1yKTtyZXR1cm4gVChyLDAsMSl9Y2FzZSBCLlNJR01PSUQ6e2NvbnN0IHI9MSsxMCplLGk9dC0uNSxvPTEvKDErTWF0aC5leHAoLXIqaSkpLGE9MS8oMStNYXRoLmV4cCguNSpyKSksdT0xLygxK01hdGguZXhwKC0uNSpyKSk7cmV0dXJuKG8tYSkvKHUtYSl9Y2FzZSBCLkZSQUNUQUw6e2NvbnN0IHI9LjUqTWF0aC5zaW4oRSp0KSplO3JldHVybiBaKHQrcil9Y2FzZSBCLkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQsZSl7Y29uc3Qgcz10Lmxlbmd0aCxyPWUqcztsZXQgaT1yfDA7aT49cyYmKGk9MCk7Y29uc3Qgbz1yLWksYT10W2ldO2xldCB1PWkrMTt1Pj1zJiYodT0wKTtjb25zdCBjPXRbdV07cmV0dXJuIGErKGMtYSkqb31fY2hvb3NlTWlwKHQpe3ZhciByO2NvbnN0IGU9VCh0LDFlLTYsNjQpO2xldCBzPTA7Zm9yKDtzKzE8KCgocj10aGlzLnRhYmxlcyk9PW51bGw/dm9pZCAwOnIubGVuZ3RoKXx8MSkmJmU8dGhpcy50YWJsZXNbc11bMF0ubGVuZ3RoLzg7KXMrKztyZXR1cm4gc31wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgcj1lWzBdWzBdLGk9ZVswXVsxXXx8ZVswXVswXTtpZighdGhpcy50YWJsZXMpcmV0dXJuIHIuZmlsbCgwKSxpIT09ciYmaS5zZXQociksITA7Y29uc3Qgbz1zLnZvaWNlc1swXTtmb3IobGV0IGE9MDthPHIubGVuZ3RoO2ErKyl7Y29uc3QgdT1iKHMuZGV0dW5lLGEpLGM9YihzLmZyZXFzcHJlYWQsYSksZj1UKGIocy5wb3NpdGlvbixhKSwwLDEpKih0aGlzLm51bUZyYW1lcy0xKSxkPWZ8MCxsPWYtZCxwPVQoYihzLndhcnAsYSksMCwxKSxtPWIocy53YXJwTW9kZSxhKSxJPVQoYihzLnBoYXNlcmFuZCxhKSwwLDEpLGc9bz4xP1QoYihzLnBhbnNwcmVhZCxhKSwwLDEpOjAsdj1NYXRoLnNxcnQoLjUtLjUqZyksdz1NYXRoLnNxcnQoLjUrLjUqZyk7bGV0IFA9YihzLmZyZXF1ZW5jeSxhKTtQPVEoUCx1LzEwMCk7Y29uc3QgUz0xL01hdGguc3FydChvKSxWPUN0KG8sYyk7Zm9yKGxldCBNPTA7TTxvO00rKyl7Y29uc3QgeD0oTSYxKT09MTtsZXQgeT12LEE9dzt4JiYoeT13LEE9dik7Y29uc3QgTj1RKFAsVihNKSkqWSxEPXRoaXMuX2Nob29zZU1pcChOKSxPPXRoaXMudGFibGVzW0RdO3RoaXMucGhhc2VbTV09dGhpcy5waGFzZVtNXT8/TWF0aC5yYW5kb20oKSpJO2NvbnN0IEY9dGhpcy5fd2FycFBoYXNlKHRoaXMucGhhc2VbTV0scCxtKSx6PXRoaXMuX3NhbXBsZUZyYW1lKE9bZF0sRiksaj10aGlzLl9zYW1wbGVGcmFtZShPW01hdGgubWluKHRoaXMubnVtRnJhbWVzLTEsZCsxKV0sRik7bGV0IEM9JHQoeixqLGwpO209PT1CLkZMSVAmJnRoaXMucGhhc2VbTV08cCYmKEM9LUMpLHJbYV0rPUMqeSpTLGlbYV0rPUMqQSpTLHRoaXMucGhhc2VbTV09Wih0aGlzLnBoYXNlW01dK04pfX1yZXR1cm4hMH19cmV0dXJuIHJlZ2lzdGVyUHJvY2Vzc29yKCJ3YXZldGFibGUtb3NjaWxsYXRvci1wcm9jZXNzb3IiLGJlKSxSLldhcnBNb2RlPUIsT2JqZWN0LmRlZmluZVByb3BlcnR5KFIsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLFJ9KHt9KTsK";let Rt;const Mc=()=>(Rt=new AudioContext,Rt),V=()=>Rt||Mc();function Qn(){return V().currentTime}let Tt={};function ze(t,e){const c=V();if(Tt[t])return Tt[t];const n=2*c.sampleRate,o=c.createBuffer(1,n,c.sampleRate),s=o.getChannelData(0);let d=0,a,l,i,h,u,G,X;a=l=i=h=u=G=X=0;for(let b=0;b<n;b++)if(t==="white")s[b]=Math.random()*2-1;else if(t==="brown"){let Z=Math.random()*2-1;s[b]=(d+.02*Z)/1.02,d=s[b]}else if(t==="pink"){let Z=Math.random()*2-1;a=.99886*a+Z*.0555179,l=.99332*l+Z*.0750759,i=.969*i+Z*.153852,h=.8665*h+Z*.3104856,u=.55*u+Z*.5329522,G=-.7616*G-Z*.016898,s[b]=a+l+i+h+u+G+X+Z*.5362,s[b]*=.11,X=Z*.115926}else if(t==="crackle"){const Z=e*.01;Math.random()<Z?s[b]=Math.random()*2-1:s[b]=0}return t!=="crackle"&&(Tt[t]=o),o}function Rc(t="white",e,c=.02){const o=V().createBufferSource();return o.buffer=ze(t,c),o.loop=!0,o.start(e),{node:o,stop:s=>o.stop(s)}}function vn(t,e,c){const n=Rc("pink",c),o=xc(t,n.node,e);return n.node.onended=()=>o.onended(),{node:o.node,stop:s=>n?.stop(s)}}const Yc=["pink","white","brown","crackle"];function ft(t){const e=V().createGain();return e.gain.value=t,e}function kt(t,e,c){const n=ft(c);return t.connect(n),n.connect(e),n}const ae=(t,e,c,n)=>n-c===0?0:(e-t)/(n-c);function j(t,e,c,n){const o=new AudioWorkletNode(t,e,n);return Object.entries(c).forEach(([s,d])=>{d!==void 0&&(o.parameters.get(s).value=d)}),o}const st=(t,e,c,n,o,s,d,a,l,i="exponential")=>{e=B(e),c=B(c),n=B(n),o=B(o);const h=i==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";i==="exponential"&&(s=s===0?.001:s,d=d===0?.001:d);const u=d-s,G=d,X=s+n*u,b=l-a,Z=y=>{let m;if(e>y){let p=ae(s,G,0,e);m=y*p+(s>G?s:0)}else m=(y-e)*ae(G,X,0,c)+G;return i==="exponential"&&(m=m||.001),m};t.setValueAtTime(s,a),e>b?t[h](Z(b),l):e+c>b?(t[h](Z(e),a+e),t[h](Z(b),l)):(t[h](Z(e),a+e),t[h](Z(e+c),a+e+c),t.setValueAtTime(X,l)),t[h](s,l+o)};function fc(t){return typeof t=="number"?t%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[t]??0}function vt(t,e,c,n={}){const{shape:o=0,...s}=n,{dcoffset:d=-.5,depth:a=1}=n,l={frequency:1,depth:a,skew:.5,phaseoffset:0,time:e,begin:e,end:c,shape:fc(o),dcoffset:d,min:d*a,max:d*a+a,curve:1,...s};return j(t,"lfo-processor",l)}function Kc(t,e,c,n,o,s){const d={threshold:e??-3,ratio:c??10,knee:n??10,attack:o??.005,release:s??.05};return new DynamicsCompressorNode(t,d)}const dt=(t,e="linear",c)=>{const[d,a,l,i]=t;if(d==null&&a==null&&l==null&&i==null)return c??[.001,.001,1,.01];const h=l??(d!=null&&a==null||d==null&&a==null?1:.001);return[Math.max(d??0,.001),Math.max(a??0,.001),Math.min(h,1),Math.max(i??0,.01)]};function Me(t,e,c,n,o){let{defaultDepth:s=1,depth:d,dcoffset:a,...l}=o;d==null&&(d=Object.values(l).some(u=>u!=null)?s:0);let i;return d&&(i=vt(t,c,n,{depth:d,dcoffset:a,...l}),i.connect(e)),i}function le(t,e,c,n,o,s){let{amount:d,offset:a,defaultAmount:l=1,curve:i="linear",values:h,holdEnd:u,defaultValues:G}=o;d==null&&(d=h.some(p=>p!=null)?l:0);const X=a??0,b=d+X;if(Math.abs(b-X)){const[m,p,N,W]=dt(h,i,G);st(e,m,p,N,W,X,b,c,u,i)}const y=Me(t,e,c,n,s);return{lfo:y,disconnect:()=>y?.disconnect()}}function gt(t,e,c,n,o,s){let{frequency:d,anchor:a,env:l,type:i,model:h,q:u=1,drive:G=.69,depth:X,depthfrequency:b,dcoffset:Z=-.5,skew:y,shape:m,rate:p,sync:N}=n,W,K;h==="ladder"?(K=j(t,"ladder-processor",{frequency:d,q:u,drive:G}),W=K.parameters.get("frequency")):(K=t.createBiquadFilter(),K.type=i,K.Q.value=u,K.frequency.value=d,W=K.frequency);const T=[n.attack,n.decay,n.sustain,n.release],[x,F,S,C]=dt(T,"exponential",[.005,.14,0,.1]);if([...T,l].some(R=>R!==void 0)){l=B(l,1,!0),a=B(a,0,!0);const R=Math.abs(l),J=R*a;let P=nt(2**-J*d,0,2e4),U=nt(2**(R-J)*d,0,2e4);l<0&&([P,U]=[U,P]),st(W,x,F,S,C,P,U,e,c,"exponential")}N!=null&&(p=o*N);const v=[X,b,y,m,p].some(R=>R!==void 0);let I;if(v){X=X??1;const R=s/o,P={depth:b??(X??1)*d,dcoffset:Z,skew:y,shape:m,frequency:p??o,min:-d+30,max:2e4-d,time:R,curve:1};I=Me(t,W,e,c,P)}return{filter:K,lfo:I}}let ie=t=>t<.5?1:1-(t-.5)/.5;function xc(t,e,c=0){const n=V();if(!c)return t;let o=n.createGain(),s=n.createGain();t.connect(o),e.connect(s),o.gain.value=ie(c),s.gain.value=ie(1-c);let d=n.createGain();return o.connect(d),s.connect(d),{node:d,onended:()=>{o.disconnect(d),s.disconnect(d),t.disconnect(o),e.disconnect(s)}}}let Hc=["linear","exponential"];function Re(t,e,c,n){if((e.pattack??e.pdecay??e.psustain??e.prelease??e.penv)===void 0)return;const s=B(e.penv,1,!0),d=Hc[e.pcurve??0];let[a,l,i,h]=dt([e.pattack,e.pdecay,e.psustain,e.prelease],d,[.2,.001,1,.001]),u=e.panchor??i;const G=s*100,X=0-G*u,b=G-G*u;st(t,a,l,i,h,X,b,c,n,d)}function Ye(t,e,c){const{vibmod:n=.5,vib:o}=e;let s;if(o>0){s=V().createOscillator(),s.frequency.value=o;const d=V().createGain();return d.gain.value=n*100,s.connect(d),d.connect(t),s.onended=()=>{d.disconnect(t),s.disconnect(d)},s.start(c),s}}function Bn(t,e,c=V()){const n=c.currentTime;Bt(c,t,n,e)}function Bt(t,e,c,n){const o=new ConstantSourceNode(t),s=ft(0);return s.connect(t.destination),o.connect(s),Ot(o,()=>{Xt(s),Xt(o),e()}),o.start(c),o.stop(n),o}const Sc=(t,e="sine")=>{const c=V();let n;return Yc.includes(e)?(n=c.createBufferSource(),n.buffer=ze(e,2),n.loop=!0):(n=c.createOscillator(),n.type=e,n.frequency.value=t),n.start(),n},Nc=(t,e,c="sine")=>{const o=t.value*e;return{osc:Sc(o,c),freq:o}};function Tc(t,e,c){const n=V(),o=[],s={};for(let d=1;d<=8;d++)for(let a=0;a<=8;a++){let l;d===a+1?l=`fmi${d===1?"":d}`:l=`fmi${d}${a}`;const i=e[l];if(!i)continue;let h=[];for(let[u,G]of[[!0,d],[!1,a]]){if(G===0){h.push(t);continue}if(!s[G]){const N=G===1?"":G,{osc:W,freq:K}=Nc(t,e[`fmh${N}`]??1,e[`fmwave${N}`]??"sine");o.push(W);const T=[W],x=["attack","decay","sustain","release"].map(S=>e[`fm${S}${N}`]);let F=W;if(x.some(S=>S!==void 0)){const S=n.createGain(),[C,Q,v,I]=dt(x),R=c+e.duration,J=e[`fmenv${N}`]??"exp";st(S.gain,C,Q,v,I,0,1,c,R,J==="exp"?"exponential":"linear"),T.push(S),F=W.connect(S)}s[G]={input:W.frequency,output:F,freq:K,osc:W,toCleanup:T}}const{input:X,output:b,freq:Z,osc:y,toCleanup:m}=s[G],p=ft(i*Z);h.push(u?b.connect(p):X),jc(y,[...m,p])}if(!h[1]){Y(`[superdough] control ${l} failed to connect FM ${d} to target ${a} due to missing frequency parameter (likely because fm${a} is noise)`,"warning");continue}h[0].connect(h[1])}return{stop:d=>o.forEach(a=>a?.stop(d))}}const fe=t=>t/(1+t),gc=(t,e)=>(t%e+e)%e,wc=(t,e)=>(1+e)*t/(1+e*Math.abs(t)),tt=(t,e)=>Math.tanh(t*(1+e)),Fc=(t,e)=>nt((1+e)*t,-1,1),Ke=(t,e)=>{let c=(1+.5*e)*t;const n=gc(c+1,4);return 1-Math.abs(n-2)},Cc=(t,e)=>Math.sin(Math.PI/2*Ke(t,e)),Ic=(t,e)=>{const c=fe(Math.log1p(e)),n=(t-c/3*t*t*t)/(1-c/3);return tt(n,e)},xe=(t,e,c=!1)=>{const n=1+2*e,s=.07*fe(Math.log1p(e)),d=tt(t+s,2*e),a=tt(c?s:-t+s,2*e),l=d-a,i=1/Math.cosh(n*s),h=i*i,u=Math.max(1e-8,(c?1:2)*n*h);return tt(l/u,e)},Jc=(t,e)=>xe(t,e,!0),kc=(t,e)=>{const c=10*Math.log1p(e);let n=1,o=t,s,d=0;for(let a=1;a<64;a++){if(a<2){d+=a==0?n:o;continue}s=2*t*n-o,o=n,n=s,a%2===0&&(d+=Math.min(1.3*c/a,2)*s)}return tt(d,c/20)},He={scurve:wc,soft:tt,hard:Fc,cubic:Ic,diode:xe,asym:Jc,fold:Ke,sinefold:Cc,chebyshev:kc},ht=Object.freeze(Object.keys(He)),On=t=>{let e=t;typeof t=="string"&&(e=ht.indexOf(t),e===-1&&(Y(`[superdough] Could not find waveshaping algorithm ${t}.
        Available options are ${ht.join(", ")}.
        Defaulting to ${ht[0]}.`),e=0));const c=ht[e%ht.length];return He[c]},Pc=(t,e,c)=>j(V(),"distort-processor",{distort:t,postgain:e},{processorOptions:{algorithm:c}}),Uc=(t,e=36)=>{let{note:c,freq:n,octave:o=0}=t;return c=c||e,typeof c=="string"&&(c=Qt(c)),!n&&typeof c=="number"&&(n=yc(c)),n*=Math.pow(2,o),Number(n)},Ot=(t,e)=>{const c=e;t.onended=function(){c&&c(),this.onended=null}},Xt=t=>{if(t!=null){if(!(t instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(t.disconnect(),t instanceof AudioScheduledSourceNode){t.onended&&t.onended.name!=="cleanup"&&Y("[superdough] Deprecation warning: it seems your code path is setting 'node.onended = callback' instead of using the onceEnded helper");try{t.stop()}catch{t.start(t.context.currentTime+5),t.stop()}}t instanceof AudioWorkletNode&&t.parameters.get("end")?.setValueAtTime(0,0)}},jc=(t,e)=>{Ot(t,()=>e.forEach(c=>Xt(c)))},Dt={},wt={},Dn=t=>Dt[t];function Qc(t,e){var c=1024;if(t<c)return t+" B";var n=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1;do t/=c,++o;while(t>=c);return t.toFixed(1)+" "+n[o]}function vc(t,e){const{speed:c=1}=t,{transpose:n,url:o,index:s,midi:d,label:a}=Ve(t,e);let l=Math.abs(c)*Math.pow(2,n/12);return{transpose:n,url:o,index:s,midi:d,label:a,playbackRate:l}}const Bc=async(t,e,c)=>{let{url:n,label:o,playbackRate:s}=vc(t,e);c&&(n=await c(n));const d=V(),a=await Se(n,d,o);return t.unit==="c"&&(s=s*a.duration),{buffer:a,playbackRate:s}},Oc=async(t,e,c)=>{let{buffer:n,playbackRate:o}=await Bc(t,e,c);t.speed<0&&(n=Dc(n));const d=V().createBufferSource();d.buffer=n,d.playbackRate.value=o;const{loopBegin:a=0,loopEnd:l=1,begin:i=0,end:h=1}=t,u=i*d.buffer.duration;t.loop&&(d.loop=!0,d.loopStart=a*d.buffer.duration-u,d.loopEnd=l*d.buffer.duration-u);const X=d.buffer.duration/d.playbackRate.value,b=(h-i)*X;return{bufferSource:d,offset:u,bufferDuration:X,sliceDuration:b}},Se=(t,e,c,n=0)=>{const o=c?`sound "${c}:${n}"`:"sample";if(t=t.replace("#","%23"),!wt[t]){Y(`[sampler] load ${o}..`,"load-sample",{url:t});const s=Date.now();wt[t]=fetch(t).then(d=>d.arrayBuffer()).then(async d=>{const a=Date.now()-s,l=Qc(d.byteLength);Y(`[sampler] load ${o}... done! loaded ${l} in ${a}ms`,"loaded-sample",{url:t});const i=await e.decodeAudioData(d);return Dt[t]=i,i})}return wt[t]};function Dc(t){const e=V(),c=e.createBuffer(t.numberOfChannels,t.length,e.sampleRate);for(let n=0;n<t.numberOfChannels;n++)c.copyToChannel(t.getChannelData(n).slice().reverse(),n,n);return c}const En=t=>Dt[t];function Ne(t){if(t.startsWith("bubo:")){const[e,c]=t.split(":");t=`github:Bubobubobubobubo/dough-${c}`}return t}function Te(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let c=t.slice(7);c=c.endsWith("/")?c.slice(0,-1):c;let n=c.split("/"),o=n[0],s=n.length>=2?n[1]:"samples",d=n.length>=3?n[2]:"main",a=n.slice(3);return a.push(e||""),a=a.join("/"),`https://raw.githubusercontent.com/${o}/${s}/${d}/${a}`}const Ec=(t,e,c=t._base||"")=>Object.entries(t).forEach(([n,o])=>{if(typeof o=="string"&&(o=[o]),typeof o!="object")throw new Error("wrong sample map format for "+n);c=o._base||c,c=Ne(c),c.startsWith("github:")&&(c=Te(c,""));const s=d=>c+d;Array.isArray(o)?o=o.map(s):o=Object.fromEntries(Object.entries(o).map(([d,a])=>[d,(typeof a=="string"?[a]:a).map(s)])),e(n,o)});let ge={};function An(t,e){ge[t]=e}function Ac(t){const e=Object.entries(ge).find(([c])=>t.startsWith(c));if(e)return e[1]}async function qc(t){const e=Ac(t);if(e)return e(t);if(t=Ne(t),t.startsWith("github:")&&(t=Te(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[o,s]=t.split("shabda:");t=`https://shabda.ndre.gr/${s}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[o,s]=t.split("shabda/speech");s=s.startsWith("/")?s.substring(1):s;let[d,a]=s.split(":"),l="f",i="en-GB";d&&([i,l]=d.split("/")),t=`https://shabda.ndre.gr/speech/${a}.json?gender=${l}&language=${i}&strudel=1'`}if(typeof fetch!="function")return;const c=Le(t);if(typeof fetch>"u")return;const n=await fetch(t).then(o=>o.json()).catch(o=>{throw console.error(o),new Error(`error loading "${t}"`)});return[n,n._base||c]}const $c=async(t,e=t._base||"",c={})=>{if(typeof t=="string"){const[d,a]=await qc(t);return $c(d,e||a,c)}const{prebake:n,tag:o,pack:s}=c;Ec(t,(d,a)=>{en(d,a,{baseUrl:e,prebake:n,tag:o,pack:s})},e)},he=[];async function _c(t,e,c,n,o){let{s,nudge:d=0,cut:a,loop:l,clip:i=void 0,n:h=0,speed:u=1,duration:G}=e;if(u===0)return;const X=V();let[b,Z,y,m]=dt([e.attack,e.decay,e.sustain,e.release]);const{bufferSource:p,sliceDuration:N,offset:W}=await Oc(e,n,o);if(!p){Y(`[sampler] could not load "${s}:${h}"`,"error");return}if(X.currentTime>t){Y(`[sampler] loading sound "${s}:${h}" took too long`,"highlight"),Xt(p);return}let K=Ye(p.detune,e,t);const T=t+d;p.start(T,W);const x=X.createGain(),F=p.connect(x);i==null&&l==null&&e.release==null&&(G=N);let S=t+G;st(F.gain,b,Z,y,m,0,1,t,S,"linear"),Re(p.detune,e,t,S);const C=X.createGain();F.connect(C),Ot(p,function(){p.disconnect(),K?.stop(),F.disconnect(),C.disconnect(),c()});let Q=S+m+.01;p.stop(Q);const I={node:C,bufferSource:p,stop:R=>{p.stop(R)}};if(a!==void 0){const R=he[a];R&&(R.node.gain.setValueAtTime(1,T),R.node.gain.linearRampToValueAtTime(0,T+.01)),he[a]=I}return I}function tn(t,e,c){Ie(t,(n,o,s)=>_c(n,o,s,e),{type:"sample",samples:e,...c})}function en(t,e,c){t.startsWith("wt_")?Be(t,e,c):tn(t,e,c)}let _=(t,e)=>t!==void 0&&t!==e;class cn{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(e){this.audioContext=e,this.output=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(e,c=0){this.djfNode==null&&(this.djfNode=j(this.audioContext,"djf-processor",{value:e}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(e,c)}getDelay(e=0,c=.5,n){return c=nt(c,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,e,c),this.delayNode.connect(this.summingNode),this.delayNode.start?.(n)),this.delayNode.delayTime.value!==e&&this.delayNode.delayTime.setValueAtTime(e,n),this.delayNode.feedback.value!==c&&this.delayNode.feedback.setValueAtTime(c,n),this.delayNode}getReverb(e,c,n,o,s,d,a){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(e,c,n,o,s,d,a),this.reverbNode.connect(this.summingNode)),(_(e,this.reverbNode.duration)||_(c,this.reverbNode.fade)||_(n,this.reverbNode.lp)||_(o,this.reverbNode.dim)||_(d,this.reverbNode.irspeed)||_(a,this.reverbNode.irbegin)||this.reverbNode.ir!==s)&&this.reverbNode.generate(e,c,n,o,s,d,a),this.reverbNode}sendReverb(e,c){return kt(e,this.reverbNode,c)}sendDelay(e,c){return kt(e,this.delayNode,c)}duck(e,c=0,n=.1,o=1){const s=c,d=Math.max(n,.002),a=this.output.gain;Bt(this.audioContext,()=>{const l=this.audioContext.currentTime,i=a.value;a.cancelScheduledValues(l),a.setValueAtTime(i,l);const h=Math.max(e,l),u=nt(1-Math.sqrt(o),.01,i);a.exponentialRampToValueAtTime(u,h+s),a.exponentialRampToValueAtTime(1,h+s+d)},0,e-.01)}connectToOutput(e){e.connect(this.summingNode)}}class nn{channelMerger;destinationGain;constructor(e){this.audioContext=e,this.initializeAudio()}initializeAudio(){const e=this.audioContext,c=e.destination.maxChannelCount;this.audioContext.destination.channelCount=c,this.channelMerger=new ChannelMergerNode(e,{numberOfInputs:e.destination.channelCount}),this.destinationGain=new GainNode(e),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(e.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(e,c=[0,1])=>{const n=new StereoPannerNode(this.audioContext);e.connect(n);const o=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:n.channelCount});n.connect(o),c.forEach((s,d)=>{o.connect(this.channelMerger,d%n.channelCount,s%this.audioContext.destination.channelCount)})}}class sn{audioContext;output;nodes={};constructor(e){this.audioContext=e,this.output=new nn(e)}reset(){Array.from(this.nodes).forEach(e=>{e.disconnect()}),this.nodes={},this.output.reset()}duck(e,c,n=0,o=.1,s=1){const d=[e].flat(),a=[n].flat(),l=[o].flat(),i=[s].flat();d.forEach((h,u)=>{const G=this.nodes[h];if(G==null){bc(new Error(`duck target orbit ${h} does not exist`),"superdough");return}const X=a[u]??a[0],b=Math.max(l[u]??l[0],.002),Z=i[u]??i[0];G.duck(c,X,b,Z)})}getOrbit(e,c){return this.nodes[e]==null&&(this.nodes[e]=new cn(this.audioContext),this.output.connectToDestination(this.nodes[e].output,c)),this.nodes[e]}}const we=128,Pt="System Standard";let Fe=we;function dn(t){Fe=parseInt(t)??we}let Ce=!1;function on(t){Ce=t==!0}const q=ic();function Ie(t,e,c={}){t=t.toLowerCase().replace(/\s+/g,"_"),q.setKey(t,{onTrigger:e,data:c})}let Je=t=>t;function D(t){return Je(t)}function qn(t){Je=t}function Ut(t){for(const c in t)t[c.toLowerCase()]=t[c];const e=q.get();for(const c in e){const[n,o]=c.split("_");if(!o)continue;const s=t[n];if(s){if(typeof s=="string")e[`${s}_${o}`.toLowerCase()]=e[c];else if(Array.isArray(s))for(const d of s)e[`${d}_${o}`.toLowerCase()]=e[c]}}q.set({...e})}async function an(t){const c=await(await fetch(t)).json();Ut(c)}async function $n(...t){switch(t.length){case 1:return typeof t[0]=="string"?an(t[0]):Ut(t[0]);case 2:return Ut({[t[0]]:t[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+t.length)}}function _n(t,e){if(Gt(t)==null){Y("soundAlias: original sound not found");return}q.setKey(e,Gt(t))}function Gt(t){return typeof t!="string"?(console.warn(`getSound: expected string got "${t}". fall back to triangle`),q.get().triangle):q.get()[t.toLowerCase()]}const ln=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let t=await navigator.mediaDevices.enumerateDevices();t=t.filter(c=>c.kind==="audiooutput"&&c.deviceId!=="default");const e=new Map;return e.set(Pt,""),t.forEach(c=>{e.set(c.label,c.deviceId)}),e};let Zt={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const hn=Object.freeze({...Zt});function ts(t,e){Zt[t]=e}function es(){Zt={...hn}}let Et=new Map(Object.entries(Zt));function ke(t,e){Et.set(t,e)}function H(t){return Et.get(t)}function cs(t){Object.keys(t).forEach(e=>{ke(e,t[e])})}function un(){Et=new Map(Object.entries(Zt))}function ns(t){un(),t==="1.0"&&ke("fanchor",.5)}const ss=()=>q.set({});let Pe=[];function Gn(t){Pe.push(t)}let Ft;function bn(){if(!Ft){const t=V(),e=Pe.concat([zc]);Ft=Promise.all(e.map(c=>t.audioWorklet.addModule(c)))}return Ft}async function Xn(t={}){const{disableWorklets:e=!1,maxPolyphony:c,audioDeviceName:n=Pt,multiChannelOrbits:o=!1}=t;if(dn(c),on(o),typeof window>"u")return;const s=V();if(n!=null&&n!=Pt)try{const a=(await ln()).get(n),l=(a??"").length>0;s.sinkId!==a&&l&&await s.setSinkId(a),Y(`[superdough] Audio Device set to ${n}, it might take a few seconds before audio plays on all output channels`)}catch{Y("[superdough] failed to set audio interface","warning")}if(await s.resume(),e){Y("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await bn(),Y("[superdough] AudioWorklets loaded")}catch(d){console.warn("could not load AudioWorklet effects",d)}Y("[superdough] ready")}let Ct;async function ds(t){return Ct||(Ct=new Promise(e=>{document.addEventListener("mousedown",async function c(){document.removeEventListener("mousedown",c),await Xn(t),e()})})),Ct}let zt;function Ue(){return zt==null&&(zt=new sn(V())),zt}function Zn(t,e){Ue().output.connectToDestination(t,e)}function pn(t,e,c=1,n=.5,o=1e3,s=2e3){const d=V(),a=vt(d,t,e,{frequency:c,depth:s*2}),l=2;let i=0;const h=[];for(let u=0;u<l;u++){const G=d.createBiquadFilter();G.type="notch",G.gain.value=1,G.frequency.value=o+i,G.Q.value=2-Math.min(Math.max(n*2,0),1.9),a.connect(G.detune),i+=282,u>0&&h[u-1].connect(G),h.push(G)}return{phaser:h[h.length-1],lfo:a}}function mn(t){t=t??0;const e=["12db","ladder","24db"];return typeof t=="number"?e[Math.floor(We(t,e.length))]:t}let w={},et={};function rn(t,e=1024,c=.5){if(!w[t]){const n=V().createAnalyser();n.fftSize=e,n.smoothingTimeConstant=c,w[t]=n,et[t]=new Float32Array(w[t].frequencyBinCount)}return w[t].fftSize!==e&&(w[t].fftSize=e,et[t]=new Float32Array(w[t].frequencyBinCount)),w[t]}function At(t="time",e=1){const c={time:()=>w[e]?.getFloatTimeDomainData(et[e]),frequency:()=>w[e]?.getFloatFrequencyData(et[e])}[t];if(!c)throw new Error(`getAnalyzerData: ${t} not supported. use one of ${Object.keys(c).join(", ")}`);return c(),et[e]}function os(){zt?.reset(),w={},et={}}let ut=new Map;function ue(t){return(Array.isArray(t)?t:[t]).map(e=>e-1)}const je=async(t,e,c,n=.5,o=.5)=>{const s=V(),d=Ue();let{stretch:a}=t;if(a!=null&&(e=e-.04),typeof t!="object")throw new Error(`expected hap.value to be an object, but got "${t}". Hint: append .note() or .s() to the end`,"error");if(t.duration=c,e<s.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${e.toFixed(2)}, now: ${s.currentTime.toFixed(2)})`);return}let{tremolo:l,tremolosync:i,tremolodepth:h=1,tremoloskew:u,tremolophase:G=0,tremoloshape:X,s:b=H("s"),bank:Z,source:y,gain:m=H("gain"),postgain:p=H("postgain"),density:N=H("density"),duckorbit:W,duckonset:K,duckattack:T,duckdepth:x,djf:F,fanchor:S=H("fanchor"),release:C=0,phaserrate:Q,phaserdepth:v=H("phaserdepth"),phasersweep:I,phasercenter:R,coarse:J,crush:P,dry:U,shape:pt,shapevol:ot=H("shapevol"),distort:at,distortvol:$=H("distortvol"),distorttype:Kt=H("distorttype"),pan:mt,vowel:qt,delay:rt=H("delay"),delayfeedback:$t=H("delayfeedback"),delaysync:De=H("delaysync"),delaytime:yt,orbit:Wt=H("orbit"),room:_t,roomfade:Ee,roomlp:Ae,roomdim:qe,roomsize:$e,ir:xt,irspeed:_e,irbegin:tc,i:te=H("i"),velocity:Ht=H("velocity"),analyze:ee,fft:ec=H("fft"),compressor:ce,compressorRatio:cc,compressorKnee:nc,compressorAttack:sc,compressorRelease:dc}=t;yt=yt??Lc(De,n);const oc=ue(Ce&&Wt>0?[Wt*2-1,Wt*2]:H("channels")),ac=t.channels!=null?ue(t.channels):oc,A=d.getOrbit(Wt,ac);W!=null&&d.duck(W,e,K,T,x),m=D(B(m,1)),p=D(p),ot=D(ot),$=D($),rt=D(rt),Ht=D(Ht),h=D(h),m*=Ht;const Vt=e+c,ne=Vt+C,se=Math.round(Math.random()*1e6);for(let r=0;r<=ut.size-Fe;r++){const z=ut.entries().next(),M=z.value[1].deref(),f=z.value[0],k=e+.25;M?.node?.gain?.linearRampToValueAtTime(0,k),M?.stop?.(k),ut.delete(f)}let g=[];if(["-","~","_"].includes(b))return;Z&&b&&(b=`${Z}_${b}`,t.s=b);let Lt;if(y)Lt=y(e,t,c,n);else if(Gt(b)){const{onTrigger:r}=Gt(b),M=await r(e,t,()=>{g.forEach(f=>f?.disconnect()),ut.delete(se)},n);M&&(Lt=M.node,ut.set(se,new WeakRef(M)))}else throw new Error(`sound ${b} not found! Is it loaded?`);if(!Lt)return;if(s.currentTime>e){Y("[webaudio] skip hap: still loading",s.currentTime-e);return}const L=[];L.push(Lt),a!==void 0&&L.push(j(s,"phase-vocoder-processor",{pitchFactor:a})),L.push(ft(m));const St=mn(t.ftype);if(t.cutoff!==void 0){const z=Nt(t,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});z.type="lowpass";const M=()=>gt(s,e,Vt,z,n,o),{filter:f,lfo:k}=M();if(L.push(f),k&&g.push(k),St==="24db"){const{filter:it,lfo:O}=M();L.push(it),O&&g.push(O)}}if(t.hcutoff!==void 0){const z=Nt(t,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});z.type="highpass";const M=()=>gt(s,e,Vt,z,n,o),{filter:f,lfo:k}=M();if(L.push(f),k&&g.push(k),St==="24db"){const{filter:it,lfo:O}=M();L.push(it),O&&g.push(O)}}if(t.bandf!==void 0){const z=Nt(t,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});z.type="bandpass";const M=()=>gt(s,e,Vt,z,n,o),{filter:f,lfo:k}=M();if(L.push(f),k&&g.push(k),St==="24db"){const{filter:it,lfo:O}=M();L.push(it),O&&g.push(O)}}if(qt!==void 0){const r=s.createVowelFilter(qt);L.push(r)}if(J!==void 0&&L.push(j(s,"coarse-processor",{coarse:J})),P!==void 0&&L.push(j(s,"crush-processor",{crush:P})),pt!==void 0&&L.push(j(s,"shape-processor",{shape:pt,postgain:ot})),at!==void 0&&L.push(Pc(at,$,Kt)),i!=null&&(l=n*i),t.wtPosSynced!=null&&(t.wtPosRate/=n),t.wtWarpSynced!=null&&(t.wtWarpRate/=n),l!==void 0){const r=Math.max(1-h,0),z=new GainNode(s,{gain:r}),M=o/n,f=vt(s,e,ne,{skew:u??(X!=null?.5:1),frequency:l,depth:h,time:M,dcoffset:0,shape:X,phaseoffset:G,min:0,max:1,curve:1.5});f.connect(z.gain),g.push(f),L.push(z)}if(ce!==void 0&&L.push(Kc(s,ce,cc,nc,sc,dc)),mt!==void 0){const r=s.createStereoPanner();r.pan.value=2*mt-1,L.push(r)}if(Q!==void 0&&v>0){const{phaser:r,lfo:z}=pn(e,ne,Q,v,R,I);g.push(z),L.push(r)}const lt=new GainNode(s,{gain:p});if(L.push(lt),rt>0&&yt>0&&$t>0){A.getDelay(yt,$t,e);const r=A.sendDelay(lt,rt);g.push(r)}if(_t>0){let r;if(xt!==void 0){let M,f=Gt(xt);Array.isArray(f)?M=f.data.samples[te%f.data.samples.length]:typeof f=="object"&&(M=Object.values(f.data.samples).flat()[te%Object.values(f.data.samples).length]),r=await Se(M,s,xt,0)}A.getReverb($e,Ee,Ae,qe,r,_e,tc);const z=A.sendReverb(lt,_t);g.push(z)}if(F!=null&&A.getDjf(F,e),ee){const r=rn(ee,2**(ec+5)),z=kt(lt,r,1);g.push(z)}if(U!=null){U=D(U);const r=new GainNode(s,{gain:U});L.push(r),A.connectToOutput(r)}else A.connectToOutput(lt);L.slice(1).reduce((r,z)=>r.connect(z),L[0]),g=g.concat(L)},as=(t,e,c,n)=>{je(e,t-c,e.duration/n,n)};let ct;async function yn(t,e){const c=`dsp-worklet-${Date.now()}`,n=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${c}', MyProcessor);
`,s=`data:text/javascript;base64,${btoa(n)}`;await t.audioWorklet.addModule(s);const d=new AudioWorkletNode(t,c);return{node:d,stop:()=>d.port.postMessage("stop")}}const Qe=()=>{ct&&(ct?.stop(),ct?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",t=>{t.data==="strudel-stop"?Qe():t.data?.dough&&ct?.node.port.postMessage(t.data)});const ls=async t=>{const e=V();Qe(),ct=await yn(e,t),ct.node.connect(e.destination)};function Wn(t,e,c,n){window.postMessage({time:n,dough:t.value,currentTime:e,duration:t.duration,cps:c})}const Ge=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),be=new Set;async function Vn(t,e,c=2048){const n=`${t},${c}`;if(!be.has(n)){const s=(await Rn(t,e)).getChannelData(0),d=s.length,a=Math.max(1,Math.floor(d/c)),l=new Array(a);for(let i=0;i<a;i++){const h=i*c;l[i]=s.subarray(h,h+c)}return be.add(n),{frames:l,frameLen:c,numFrames:a,key:n}}return{frameLen:c,key:n}}function Ln(t,e){var c=1024;if(t<c)return t+" B";var n=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1;do t/=c,++o;while(t>=c);return t.toFixed(1)+" "+n[o]}function zn(t){const e=new DataView(t);let c=12;for(;c+8<=e.byteLength;){const n=String.fromCharCode(e.getUint8(c),e.getUint8(c+1),e.getUint8(c+2),e.getUint8(c+3)),o=e.getUint32(c+4,!0);if(n==="fmt ")return e.getUint32(c+12,!0);c+=8+o+(o&1)}return null}async function Mn(t){const e=zn(t)||44100;return await new OfflineAudioContext(1,1,e).decodeAudioData(t)}const It={},Rn=(t,e)=>{if(t=t.replace("#","%23"),!It[t]){Y(`[wavetable] load table ${e}..`,"load-table",{url:t});const c=Date.now();It[t]=fetch(t).then(n=>n.arrayBuffer()).then(async n=>{const o=Date.now()-c,s=Ln(n.byteLength);return Y(`[wavetable] load table ${e}... done! loaded ${s} in ${o}ms`,"loaded-table",{url:t}),await Mn(n)})}return It[t]};function ve(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[c,n]=t.split("github:");return n=n.endsWith("/")?n.slice(0,-1):n,n.split("/").length===2&&(n+="/main"),`https://raw.githubusercontent.com/${n}/${e}`}const Xe=(t,e,c,n={})=>(e=t._base||e,Object.entries(t).forEach(([o,s])=>{if(o==="_base")return!1;if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong json format for "+o);let d=e;d.startsWith("github:")&&(d=ve(d,"")),s=s.map(a=>d+a).filter(a=>a.toLowerCase().endsWith(".wav")?!0:(Y(`[wavetable] skipping ${a} -- wavetables must be ".wav" format`),!1)),s.length&&Be(o,s,{baseUrl:e,frameLen:c})}));function Be(t,e,c){Ie(t,(n,o,s,d)=>Yn(n,o,s,e,d,c?.frameLen??2048),{type:"wavetable",tables:e,...c})}const is=async(t,e,c,n={})=>{if(c!==void 0)return Xe(c,t,e);t.startsWith("github:")&&(t=ve(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432");const o=Le(t);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(t).then(s=>s.json()).then(s=>Xe(s,o,e,n)).catch(s=>{throw console.error(s),new Error(`error loading "${t}"`)})};async function Yn(t,e,c,n,o,s){const{s:d,n:a=0,duration:l,clip:i}=e,h=V(),[u,G,X,b]=dt([e.attack,e.decay,e.sustain,e.release]);let{warpmode:Z}=e;typeof Z=="string"&&(Z=Ge[Z.toUpperCase()]??Ge.NONE);const y=Uc(e),{url:m,label:p}=Ve(e,n),N=await Vn(m,p,s);let W=t+l;i!==void 0&&(W=Math.min(t+i*l,W));const K=W+b,T=K+.01,x=j(h,"wavetable-oscillator-processor",{begin:t,end:T,frequency:y,freqspread:e.detune,position:e.wt,warp:e.warp,warpMode:Z,voices:Math.max(e.unison??1,1),panspread:e.spread,phaserand:e.wtphaserand??e.unison>1?1:0},{outputChannelCount:[2]});if(x.port.postMessage({type:"table",payload:N}),h.currentTime>t){Y(`[wavetable] still loading sound "${d}:${a}"`,"highlight");return}const F=[e.wtattack,e.wtdecay,e.wtsustain,e.wtrelease],S=[e.warpattack,e.warpdecay,e.warpsustain,e.warprelease],C=x.parameters,Q=C.get("position"),v=C.get("warp");let I=e.wtrate;e.wtsync!=null&&(I=o*e.wtsync);const R=le(h,Q,t,K,{offset:e.wt,amount:e.wtenv,defaultAmount:.5,shape:"linear",values:F,holdEnd:W,defaultValues:[0,.5,0,.1]},{frequency:I,depth:e.wtdepth,defaultDepth:.5,shape:e.wtshape,skew:e.wtskew,dcoffset:e.wtdc??0});let J=e.warprate;e.warpsync!=null&&(J=J=o*e.warpsync);const P=le(h,v,t,K,{offset:e.warp,amount:e.warpenv,defaultAmount:.5,shape:"linear",values:S,holdEnd:W,defaultValues:[0,.5,0,.1]},{frequency:J,depth:e.warpdepth,defaultDepth:.5,shape:e.warpshape,skew:e.warpskew,dcoffset:e.warpdc??0}),U=Ye(x.parameters.get("detune"),e,t),pt=Tc(x.parameters.get("frequency"),e,t),ot=h.createGain(),at=x.connect(ot);st(at.gain,u,G,X,b,0,.3,t,W,"linear"),Re(x.parameters.get("detune"),e,t,W);const $={node:at,source:x},Kt=Bt(h,()=>{Xt(x),U?.stop(),pt?.stop(),R?.disconnect(),P?.disconnect(),c()},t,T);return $.stop=mt=>{Kt.stop(mt)},$}let bt;function fn(){const t=V();bt=j(t,"dough-processor",{},{outputChannelCount:[2]}),Zn(bt)}const Mt=new Map,Ze=new Map;E.prototype.supradough=function(){return this.onTrigger((t,e,c,n)=>{t.value._begin=n,t.value._duration=t.duration/c,!bt&&fn();const o=(t.value.bank?t.value.bank+"_":"")+t.value.s,s=t.value.n??0,d=`${o}:${s}`;if(Mt.has(o)&&(t.value.s=d),Mt.has(o)&&!Ze.has(d)){const a=Mt.get(o),l=a[s%a.length];console.log(`load ${d} from ${l}`);const i=Hn(l);Ze.set(d,i),i.then(({channels:h,sampleRate:u})=>bt.port.postMessage({sample:d,channels:h,sampleRate:u}))}bt.port.postMessage({spawn:t.value})},1)};function Kn(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[c,n]=t.split("github:");return n=n.endsWith("/")?n.slice(0,-1):n,n.split("/").length===2&&(n+="/main"),`https://raw.githubusercontent.com/${n}/${e}`}async function xn(t){if(t.startsWith("github:")&&(t=Kn(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[n,o]=t.split("shabda:");t=`https://shabda.ndre.gr/${o}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[n,o]=t.split("shabda/speech");o=o.startsWith("/")?o.substring(1):o;let[s,d]=o.split(":"),a="f",l="en-GB";s&&([l,a]=s.split("/")),t=`https://shabda.ndre.gr/speech/${d}.json?gender=${a}&language=${l}&strudel=1'`}if(typeof fetch!="function")return;const e=t.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const c=await fetch(t).then(n=>n.json()).catch(n=>{throw console.error(n),new Error(`error loading "${t}"`)});return[c,c._base||e]}async function Hn(t){const e=await fetch(t).then(n=>n.arrayBuffer()).then(n=>V().decodeAudioData(n));let c=[];for(let n=0;n<e.numberOfChannels;n++)c.push(e.getChannelData(n));return{channels:c,sampleRate:e.sampleRate}}async function Sn(t,e){if(typeof t=="string"){const[c,n]=await xn(t);return Sn(c,n)}Object.entries(t).map(async([c,n])=>{c!=="_base"&&(n=n.map(o=>e+o),Mt.set(c,n))})}const Nn="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK";const Tn=Nn;Gn(Tn);const{Pattern:gn,logger:wn,repl:Fn}=lc;Xc(wn);const Cn=t=>(t.ensureObjectValue(),t.value),In=(t,e,c,n,o)=>je(Cn(t),o,c,n,t.whole?.begin.valueOf());function hs(t={}){return t={getTime:()=>V().currentTime,defaultOutput:In,...t},Fn(t)}gn.prototype.dough=function(){return this.onTrigger(Wn,1)};function Jn(t,{align:e=!0,color:c="white",thickness:n=3,scale:o=.25,pos:s=.75,trigger:d=0,ctx:a=Yt(),id:l=1}={}){a.lineWidth=n,a.strokeStyle=c;let i=a.canvas;if(!t){a.beginPath();let Z=s*i.height;a.moveTo(0,Z),a.lineTo(i.width,Z),a.stroke();return}const h=At("time",l);a.beginPath();const u=t.frequencyBinCount;let G=e?Array.from(h).findIndex((Z,y,m)=>y&&m[y-1]>-d&&Z<=-d):0;G=Math.max(G,0);const X=i.width*1/u;let b=0;for(let Z=G;Z<u;Z++){const y=h[Z]+1,m=(s-o*(y-1))*i.height;Z===0?a.moveTo(b,m):a.lineTo(b,m),b+=X}a.stroke()}function kn(t,{color:e="white",scale:c=.25,pos:n=.75,lean:o=.5,min:s=-150,max:d=0,ctx:a=Yt(),id:l=1}={}){if(!t){a.beginPath();let b=n*h.height;a.moveTo(0,b),a.lineTo(h.width,b),a.stroke();return}const i=At("frequency",l),h=a.canvas;a.fillStyle=e;const u=t.frequencyBinCount,G=h.width*1/u;let X=0;for(let b=0;b<u;b++){const y=me((i[b]-s)/(d-s),0,1)*c,m=y*h.height,p=(n-y*o)*h.height;a.fillRect(X,p,Math.max(G,1),m),X+=G}}function Oe(t=0,e="0,0,0",c=Yt()){t?(c.fillStyle=`rgba(${e},${1-t})`,c.fillRect(0,0,c.canvas.width,c.canvas.height)):c.clearRect(0,0,c.canvas.width,c.canvas.height)}E.prototype.fscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(()=>{Oe(t.smear,"0,0,0",t.ctx),w[e]&&kn(w[e],t)},{id:e})};E.prototype.tscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(c=>{t.color=c[0]?.value?.color||re().foreground,t.color,Oe(t.smear,"0,0,0",t.ctx),Jn(w[e],t)},{id:e})};E.prototype.scope=E.prototype.tscope;let pe={};E.prototype.spectrum=function(t={}){let e=t.id??1;return this.analyze(e).draw(c=>{t.color=c[0]?.value?.color||pe[e]||re().foreground,pe[e]=t.color,Pn(w[e],t)},{id:e})};E.prototype.scope=E.prototype.tscope;const Jt=new Map;function Pn(t,{thickness:e=3,speed:c=1,min:n=-80,max:o=0,ctx:s=Yt(),id:d=1,color:a}={}){if(s.lineWidth=e,s.strokeStyle=a,!t)return;const l=c,i=At("frequency",d),h=s.canvas;s.fillStyle=a;const u=t.frequencyBinCount;let G=Jt.get(d)||s.getImageData(0,0,h.width,h.height);Jt.set(d,G),s.clearRect(0,0,s.canvas.width,s.canvas.height),s.putImageData(G,-l,0);let X=h.width-c;for(let b=0;b<u;b++){const Z=me((i[b]-n)/(o-n),0,1);s.globalAlpha=Z;const y=Math.log(b+1)/Math.log(u)*h.height;s.fillRect(X,h.height-y,l,2)}Jt.set(d,s.getImageData(0,0,h.width,h.height))}export{un as $,vt as A,Yc as B,Y as C,we as D,vn as E,nt as F,Qt as G,yc as H,An as I,Ec as J,_c as K,Se as L,en as M,ns as N,hs as O,Jn as P,kn as Q,Sn as R,D as S,qn as T,$n as U,_n as V,Gt as W,ts as X,ke as Y,H as Z,cs as _,dt as a,Gn as a0,Xn as a1,Ue as a2,w as a3,et as a4,rn as a5,At as a6,je as a7,as as a8,Dn as a9,vc as aa,Bc as ab,Oc as ac,Dc as ad,En as ae,$c as af,kt as ag,Kc as ah,Me as ai,le as aj,gt as ak,xc as al,He as am,On as an,Pc as ao,jc as ap,bc as aq,Xc as ar,yn as as,ls as at,Wn as au,Mc as av,Ge as aw,Be as ax,is as ay,Yn as az,st as b,Ye as c,Re as d,ln as e,dn as f,V as g,on as h,ds as i,q as j,Zn as k,Qn as l,es as m,os as n,Ot as o,ss as p,ft as q,Ie as r,Bn as s,Uc as t,Rc as u,j as v,In as w,Tc as x,Bt as y,Xt as z};
