# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –£–ª—É—á—à–µ–Ω–∏–µ UX –±—Ä–∞—É–∑–µ—Ä–∞ —Å–µ–º–ø–ª–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-12-07
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `/home/user/Bulka/website/src/repl/components/panel/SoundsTab.jsx`

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ)
3. [–î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–æ–≤](#1-–¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø–∞–∫–æ–≤)
4. [–§–∏–ª—å—Ç—Ä –ø–æ –ø–∞–∫–∞–º](#2-—Ñ–∏–ª—å—Ç—Ä-–ø–æ-–ø–∞–∫–∞–º)
5. [–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫](#3-—É–ª—É—á—à–µ–Ω–Ω—ã–π-–ø–æ–∏—Å–∫)
6. [–ò–∑–±—Ä–∞–Ω–Ω–æ–µ](#4-–∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
7. [–ü—Ä–µ–≤—å—é —É–ª—É—á—à–µ–Ω–∏—è](#5-–ø—Ä–µ–≤—å—é-—É–ª—É—á—à–µ–Ω–∏—è)
8. [–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏](#6-–≥–æ—Ä—è—á–∏–µ-–∫–ª–∞–≤–∏—à–∏)
9. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
10. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

Bulka ‚Äî —ç—Ç–æ –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è DAW –Ω–∞ –æ—Å–Ω–æ–≤–µ Strudel, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –º—É–∑—ã–∫—É —á–µ—Ä–µ–∑ live coding. –ë—Ä–∞—É–∑–µ—Ä —Å–µ–º–ø–ª–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –∑–≤—É–∫–∞–º–∏.

### –ê–Ω–∞–ª–∏–∑ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ DAW

| –§—É–Ω–∫—Ü–∏—è | FL Studio | Ableton | Logic Pro | Bitwig | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|-----------|---------|-----------|--------|-----------|
| –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | **–í—ã—Å–æ–∫–∏–π** |
| –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | **–í—ã—Å–æ–∫–∏–π** |
| Fuzzy search | ‚úÖ | ‚úÖ | ‚ö†Ô∏è | ‚úÖ | –°—Ä–µ–¥–Ω–∏–π |
| –ò–∑–±—Ä–∞–Ω–Ω–æ–µ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | **–í—ã—Å–æ–∫–∏–π** |
| –ü—Ä–µ–≤—å—é —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | –°—Ä–µ–¥–Ω–∏–π |
| –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | **–í—ã—Å–æ–∫–∏–π** |

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ ‚úÖ

- –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ `includes()`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –∑–≤—É–∫–æ–≤ (samples, drums, synths, wavetables, user)
- –ü—Ä–µ–≤—å—é –∑–≤—É–∫–æ–≤ –ø–æ –∫–ª–∏–∫—É (mousedown/mouseup)
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∑–≤—É–∫–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- –í—Å—Ç–∞–≤–∫–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ–º–ø–ª–æ–≤ –≤ –ø–∞–∫–µ: `(N)`

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚ùå

1. **–ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–≤—É–∫–æ–≤** ‚Äî —Å–ª–æ–∂–Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–∞–∫–æ–≤
2. **–ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–∞–∫–∞–º** ‚Äî –∑–≤—É–∫–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–º–µ—à–∞–Ω—ã
3. **–ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫** ‚Äî –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –æ–ø–µ—á–∞—Ç–∫–∏, –Ω–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
4. **–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–≤—É–∫–∏
5. **–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –Ω–µ—è—Å–Ω–æ, —Å–∫–æ–ª—å–∫–æ –¥–ª–∏—Ç—Å—è —Å–µ–º–ø–ª
6. **–¢–æ–ª—å–∫–æ –º—ã—à—å** ‚Äî –Ω–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
// soundMap structure (nanostores map)
soundMap.get() = {
  "sound_name": {
    onTrigger: Function,
    data: {
      type: 'sample' | 'synth' | 'soundfont' | 'wavetable',
      samples: Array | Object,  // –º–∞—Å—Å–∏–≤ URL –∏–ª–∏ –æ–±—ä–µ–∫—Ç {note: [urls]}
      tag: 'drum-machines' | undefined,
      prebake: boolean,
      // + –¥—Ä—É–≥–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    }
  }
}
```

---

## 1. –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–æ–≤

### –¶–µ–ª—å
–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∑–≤—É–∫–∏ –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –∫–∞–∫ –≤ FL Studio Browser –∏–ª–∏ Ableton Browser.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 1.1 –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∑–≤—É–∫–∏ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏–∑ –∏–º–µ–Ω –∑–≤—É–∫–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞–∫–∞ (–¥–æ `_`)
- [ ] –î–ª—è –∑–≤—É–∫–æ–≤ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø—É "–î—Ä—É–≥–∏–µ"

**–ü—Ä–∏–º–µ—Ä—ã:**
```
tidal-drum-machines.json:
  ‚îî‚îÄ 808_bd, 808_sd, 808_hh
     ‚Üí –ü–∞–∫ "808"

Dirt-Samples.json:
  ‚îî‚îÄ arpy, bass, casio
     ‚Üí –ü–∞–∫–∏ "arpy", "bass", "casio"
```

#### 1.2 UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@headlessui/react` `Disclosure` –¥–ª—è —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- [ ] –ò–∫–æ–Ω–∫–∏ –∏–∑ `@heroicons/react`:
  - `ChevronRightIcon` ‚Äî —Å–≤–µ—Ä–Ω—É—Ç–∞—è –ø–∞–ø–∫–∞
  - `ChevronDownIcon` ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è –ø–∞–ø–∫–∞
  - `FolderIcon` ‚Äî –∏–∫–æ–Ω–∫–∞ –ø–∞–∫–∞
  - `MusicalNoteIcon` ‚Äî –∏–∫–æ–Ω–∫–∞ –∑–≤—É–∫–∞

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```jsx
import { Disclosure } from '@headlessui/react';
import { ChevronRightIcon, FolderIcon } from '@heroicons/react/20/solid';

function PackItem({ packName, sounds }) {
  return (
    <Disclosure defaultOpen={false}>
      {({ open }) => (
        <>
          <Disclosure.Button className="flex items-center gap-1 w-full hover:bg-foreground/5 px-2 py-1 rounded">
            {open ? <ChevronDownIcon className="w-4 h-4" /> : <ChevronRightIcon className="w-4 h-4" />}
            <FolderIcon className="w-4 h-4 text-yellow-500" />
            <span className="font-medium">{packName}</span>
            <span className="text-xs opacity-60">({sounds.length})</span>
          </Disclosure.Button>
          <Disclosure.Panel className="pl-6">
            {sounds.map(sound => <SoundItem key={sound.name} {...sound} />)}
          </Disclosure.Panel>
        </>
      )}
    </Disclosure>
  );
}
```

#### 1.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∑–≤—É–∫–æ–≤
function groupSoundsByPack(soundEntries) {
  const packs = new Map();

  soundEntries.forEach(([name, sound]) => {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–º—è –ø–∞–∫–∞
    const packName = getPackName(name, sound.data);

    if (!packs.has(packName)) {
      packs.set(packName, {
        name: packName,
        sounds: [],
        type: sound.data.type,
        tag: sound.data.tag,
        source: getSourceURL(sound.data),
      });
    }

    packs.get(packName).sounds.push({ name, ...sound });
  });

  return Array.from(packs.values()).sort((a, b) => a.name.localeCompare(b.name));
}

function getPackName(soundName, data) {
  // –î–ª—è drum machines –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–µ—Ñ–∏–∫—Å
  if (data.tag === 'drum-machines') {
    return soundName.split('_')[0];
  }

  // –î–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ–º–ø–ª–æ–≤ - –∏–º—è —Å–∞–º–æ–≥–æ –∑–≤—É–∫–∞ –∫–∞–∫ –ø–∞–∫
  if (data.type === 'sample') {
    return soundName;
  }

  // –î–ª—è —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä–æ–≤ –∏ soundfont
  return soundName;
}

function getSourceURL(data) {
  if (!data.samples) return null;
  const firstSample = Array.isArray(data.samples)
    ? data.samples[0]
    : Object.values(data.samples)[0]?.[0];
  // –ò–∑–≤–ª–µ–∫–∞–µ–º –±–∞–∑–æ–≤—ã–π URL
  return firstSample ? extractBaseURL(firstSample) : null;
}
```

#### 1.4 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

- [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –ø–∞–∫–∏ –≤ `localStorage`
- [ ] –ö–ª—é—á: `strudel-expanded-packs`
- [ ] –§–æ—Ä–º–∞—Ç: `{ [packName]: boolean }`

```javascript
import { persistentMap } from '@nanostores/persistent';

export const expandedPacksMap = persistentMap('strudel-expanded-packs', {});
```

---

## 2. –§–∏–ª—å—Ç—Ä –ø–æ –ø–∞–∫–∞–º

### –¶–µ–ª—å
–ü–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∫—Ä—ã–≤–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–∞–∫–∏ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 2.1 UI —Ñ–∏–ª—å—Ç—Ä–∞

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–§–∏–ª—å—Ç—Ä –ø–∞–∫–æ–≤" –Ω–∞–¥ —Å–ø–∏—Å–∫–æ–º –∑–≤—É–∫–æ–≤
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ø–∞–∫–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ "–í—ã–±—Ä–∞—Ç—å –≤—Å–µ" / "–°–Ω—è—Ç—å –≤—Å–µ"
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–≤–µ—Ä–Ω—É—Ç)

**–ú–∞–∫–µ—Ç:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ñº –§–∏–ª—å—Ç—Ä –ø–∞–∫–æ–≤ (12 –≤—ã–±—Ä–∞–Ω–æ –∏–∑ 15)  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–í—ã–±—Ä–∞—Ç—å –≤—Å–µ] [–°–Ω—è—Ç—å –≤—Å–µ]           ‚îÇ
‚îÇ ‚òë 808                    (24)       ‚îÇ
‚îÇ ‚òë 909                    (18)       ‚îÇ
‚îÇ ‚òê CR78                   (12)       ‚îÇ
‚îÇ ‚òë piano                  (31)       ‚îÇ
‚îÇ ...                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–∞

```jsx
import { useState, useMemo } from 'react';
import { Disclosure } from '@headlessui/react';
import { FunnelIcon, CheckIcon } from '@heroicons/react/20/solid';

function PackFilter({ packs, selectedPacks, onPackToggle }) {
  const allPackNames = useMemo(() => packs.map(p => p.name), [packs]);
  const selectedCount = selectedPacks.size;

  return (
    <Disclosure defaultOpen={false}>
      {({ open }) => (
        <div className="border-b border-foreground/10 pb-2 mb-2">
          <Disclosure.Button className="flex items-center gap-2 text-sm">
            <FunnelIcon className="w-4 h-4" />
            <span>
              –§–∏–ª—å—Ç—Ä –ø–∞–∫–æ–≤ ({selectedCount} –∏–∑ {allPackNames.length})
            </span>
          </Disclosure.Button>

          <Disclosure.Panel className="mt-2 space-y-1">
            <div className="flex gap-2 mb-2">
              <button
                onClick={() => onPackToggle(allPackNames, true)}
                className="text-xs px-2 py-1 bg-foreground/5 hover:bg-foreground/10 rounded"
              >
                –í—ã–±—Ä–∞—Ç—å –≤—Å–µ
              </button>
              <button
                onClick={() => onPackToggle([], false)}
                className="text-xs px-2 py-1 bg-foreground/5 hover:bg-foreground/10 rounded"
              >
                –°–Ω—è—Ç—å –≤—Å–µ
              </button>
            </div>

            <div className="max-h-48 overflow-y-auto space-y-1">
              {packs.map(pack => (
                <label
                  key={pack.name}
                  className="flex items-center gap-2 text-sm hover:bg-foreground/5 px-2 py-1 rounded cursor-pointer"
                >
                  <input
                    type="checkbox"
                    checked={selectedPacks.has(pack.name)}
                    onChange={(e) => onPackToggle(pack.name, e.target.checked)}
                    className="rounded"
                  />
                  <span className="flex-1">{pack.name}</span>
                  <span className="text-xs opacity-60">({pack.sounds.length})</span>
                </label>
              ))}
            </div>
          </Disclosure.Panel>
        </div>
      )}
    </Disclosure>
  );
}
```

#### 2.3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

```javascript
import { persistentMap } from '@nanostores/persistent';

// –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞–∫–æ–≤
export const selectedPacksMap = persistentMap('strudel-selected-packs', {
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –≤–∫–ª—é—á–µ–Ω—ã
  _initialized: false,
});

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
function SoundsTab() {
  const selectedPacksData = useStore(selectedPacksMap);
  const [selectedPacks, setSelectedPacks] = useState(() => {
    if (!selectedPacksData._initialized) {
      // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ –ø–∞–∫–∏
      return new Set();
    }
    return new Set(Object.keys(selectedPacksData).filter(k => k !== '_initialized'));
  });

  useEffect(() => {
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å localStorage
    const newData = { _initialized: true };
    selectedPacks.forEach(pack => newData[pack] = true);
    selectedPacksMap.set(newData);
  }, [selectedPacks]);

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞–∫–æ–≤
  const visiblePacks = useMemo(() => {
    if (selectedPacks.size === 0) return allPacks; // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ
    return allPacks.filter(pack => selectedPacks.has(pack.name));
  }, [allPacks, selectedPacks]);
}
```

---

## 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫

### –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "—É–º–Ω—ã–π" –ø–æ–∏—Å–∫ —Å —É—á–µ—Ç–æ–º –æ–ø–µ—á–∞—Ç–æ–∫ –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π, –∫–∞–∫ –≤ Ableton Live.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 3.1 Fuzzy search

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `fuse.js` –¥–ª—è fuzzy search
- [ ] –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–∞–∫–∞ + –∏–º–µ–Ω–∏ –∑–≤—É–∫–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (threshold: 0.3)
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
npm install fuse.js
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```javascript
import Fuse from 'fuse.js';

function useFuzzySearch(sounds, searchQuery) {
  const fuse = useMemo(() => {
    const options = {
      keys: [
        { name: 'packName', weight: 0.7 },
        { name: 'soundName', weight: 1.0 },
        { name: 'tag', weight: 0.5 },
      ],
      threshold: 0.3,  // 0 = —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, 1 = –ª—é–±–æ–µ
      includeScore: true,
      includeMatches: true,  // –î–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
      minMatchCharLength: 2,
    };

    const searchData = sounds.map(([name, sound]) => ({
      packName: getPackName(name, sound.data),
      soundName: name,
      tag: sound.data.tag || '',
      original: [name, sound],
    }));

    return new Fuse(searchData, options);
  }, [sounds]);

  return useMemo(() => {
    if (!searchQuery) return sounds;

    const results = fuse.search(searchQuery);
    return results.map(result => ({
      ...result.item.original,
      matches: result.matches,  // –î–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
      score: result.score,
    }));
  }, [searchQuery, fuse, sounds]);
}
```

#### 3.2 –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

- [ ] –í—ã–¥–µ–ª—è—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ –∂–µ–ª—Ç—ã–º —Ñ–æ–Ω–æ–º
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `mark` —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏

```jsx
function HighlightedText({ text, matches }) {
  if (!matches || matches.length === 0) {
    return <span>{text}</span>;
  }

  // –ù–∞–π—Ç–∏ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏
  const highlights = matches
    .filter(m => m.key === 'soundName')
    .flatMap(m => m.indices);

  if (highlights.length === 0) {
    return <span>{text}</span>;
  }

  // –†–∞–∑–±–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏
  const parts = [];
  let lastIndex = 0;

  highlights.forEach(([start, end]) => {
    if (start > lastIndex) {
      parts.push({ text: text.slice(lastIndex, start), highlight: false });
    }
    parts.push({ text: text.slice(start, end + 1), highlight: true });
    lastIndex = end + 1;
  });

  if (lastIndex < text.length) {
    parts.push({ text: text.slice(lastIndex), highlight: false });
  }

  return (
    <span>
      {parts.map((part, i) =>
        part.highlight ? (
          <mark key={i} className="bg-yellow-300 dark:bg-yellow-600">{part.text}</mark>
        ) : (
          <span key={i}>{part.text}</span>
        )
      )}
    </span>
  );
}
```

#### 3.3 –£–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—è –ø–æ–∏—Å–∫–∞

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –ø–æ–∏—Å–∫–∞ (MagnifyingGlassIcon)
- [ ] –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∏—Å–∫–∞ (XMarkIcon)
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] Debounce –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (300ms)

```jsx
import { MagnifyingGlassIcon, XMarkIcon } from '@heroicons/react/20/solid';
import { useMemo, useState } from 'react';
import { useDebounce } from '@src/hooks/useDebounce';

function SearchBox({ value, onChange, resultsCount }) {
  return (
    <div className="relative">
      <MagnifyingGlassIcon className="absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 opacity-50" />
      <input
        type="text"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder="–ü–æ–∏—Å–∫ –∑–≤—É–∫–æ–≤..."
        className="w-full pl-8 pr-8 py-2 bg-background border border-foreground/20 rounded"
      />
      {value && (
        <button
          onClick={() => onChange('')}
          className="absolute right-2 top-1/2 -translate-y-1/2 opacity-50 hover:opacity-100"
        >
          <XMarkIcon className="w-4 h-4" />
        </button>
      )}
      {value && (
        <div className="text-xs opacity-60 mt-1">
          –ù–∞–π–¥–µ–Ω–æ: {resultsCount}
        </div>
      )}
    </div>
  );
}

// –•—É–∫ –¥–ª—è debounce
function useDebounce(value, delay = 300) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => setDebouncedValue(value), delay);
    return () => clearTimeout(timer);
  }, [value, delay]);

  return debouncedValue;
}
```

---

## 4. –ò–∑–±—Ä–∞–Ω–Ω–æ–µ

### –¶–µ–ª—å
–ü–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–≤—É–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 4.1 UI –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

- [ ] –ò–∫–æ–Ω–∫–∞ –∑–≤–µ–∑–¥—ã —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –∑–≤—É–∫–æ–º (StarIcon)
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∑–≤–µ–∑–¥–∞ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∑–≤—É–∫–æ–≤
- [ ] –û—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" –≤ —Ñ–∏–ª—å—Ç—Ä–µ —Ç–∏–ø–æ–≤
- [ ] –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –≤ UI

**–ò–∫–æ–Ω–∫–∏:**
```jsx
import { StarIcon as StarOutline } from '@heroicons/react/24/outline';
import { StarIcon as StarSolid } from '@heroicons/react/24/solid';

function FavoriteButton({ soundName, isFavorite, onToggle }) {
  return (
    <button
      onClick={(e) => {
        e.stopPropagation();
        onToggle(soundName);
      }}
      className="p-0.5 hover:opacity-50 hover:bg-foreground/10 rounded"
      title={isFavorite ? "–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ" : "–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"}
    >
      {isFavorite ? (
        <StarSolid className="w-3.5 h-3.5 text-yellow-500" />
      ) : (
        <StarOutline className="w-3.5 h-3.5" />
      )}
    </button>
  );
}
```

#### 4.2 –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

```javascript
import { persistentMap } from '@nanostores/persistent';

// –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∑–≤—É–∫–æ–≤
export const favoriteSoundsMap = persistentMap('strudel-favorite-sounds', {});

// –•—É–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º
export function useFavorites() {
  const favoritesData = useStore(favoriteSoundsMap);
  const favorites = useMemo(() => new Set(Object.keys(favoritesData)), [favoritesData]);

  const toggleFavorite = useCallback((soundName) => {
    const current = favoriteSoundsMap.get();
    if (current[soundName]) {
      const { [soundName]: _, ...rest } = current;
      favoriteSoundsMap.set(rest);
    } else {
      favoriteSoundsMap.set({ ...current, [soundName]: true });
    }
  }, []);

  const isFavorite = useCallback((soundName) => {
    return favorites.has(soundName);
  }, [favorites]);

  return { favorites, toggleFavorite, isFavorite, count: favorites.size };
}
```

#### 4.3 –§–∏–ª—å—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `FAVORITES` –≤ `soundFilterType`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `ButtonGroup` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "–∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –≤ –∫–Ω–æ–ø–∫–µ

```javascript
// –í settings.mjs
export const soundFilterType = {
  USER: 'user',
  DRUMS: 'drums',
  SAMPLES: 'samples',
  SYNTHS: 'synths',
  WAVETABLES: 'wavetables',
  FAVORITES: 'favorites',  // –ù–û–í–û–ï
  ALL: 'all',
};

// –í SoundsTab.jsx
const { favorites } = useFavorites();

const soundEntries = useMemo(() => {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ ...

  if (soundsFilter === soundFilterType.FAVORITES) {
    return filtered.filter(([name]) => favorites.has(name));
  }

  return filtered;
}, [sounds, soundsFilter, search, favorites]);

// –í ButtonGroup
<ButtonGroup
  value={soundsFilter}
  onChange={(value) => settingsMap.setKey('soundsFilter', value)}
  items={{
    favorites: `–∏–∑–±—Ä–∞–Ω–Ω–æ–µ (${favoritesCount})`,  // –ù–û–í–û–ï
    samples: '—Å—ç–º–ø–ª—ã',
    drums: '–¥—Ä–∞–º-–º–∞—à–∏–Ω—ã',
    synths: '—Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—ã',
    wavetables: '–≤–æ–ª–Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã',
    user: '—Å–≤–æ–∏',
    importSounds: '–∏–º–ø–æ—Ä—Ç –∑–≤—É–∫–æ–≤',
  }}
/>
```

---

## 5. –ü—Ä–µ–≤—å—é —É–ª—É—á—à–µ–Ω–∏—è

### –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–≤—É–∫–µ –ø–µ—Ä–µ–¥ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 5.1 –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤—É–∫–∞

- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–º–ø–ª–∞ —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º
- [ ] –§–æ—Ä–º–∞—Ç: `MM:SS` –∏–ª–∏ `S.Ss` –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö
- [ ] –ü–æ–ª—É—á–∞—Ç—å –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞

```javascript
import { getCachedBuffer } from '@strudel/webaudio';

function getSampleDuration(soundData) {
  if (!soundData.samples) return null;

  // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å–µ–º–ø–ª
  const firstSample = Array.isArray(soundData.samples)
    ? soundData.samples[0]
    : Object.values(soundData.samples)[0]?.[0];

  if (!firstSample) return null;

  // –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
  const buffer = getCachedBuffer(firstSample);
  if (buffer) {
    return formatDuration(buffer.duration);
  }

  return null;
}

function formatDuration(seconds) {
  if (seconds < 10) {
    return `${seconds.toFixed(1)}s`;
  }
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs.toString().padStart(2, '0')}`;
}
```

#### 5.2 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ

- [ ] –ü—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ –ø–∞–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–æ–≤ –≤ –ø–∞–∫–µ
- [ ] –¢–∏–ø (sample/synth/etc)
- [ ] –ò—Å—Ç–æ—á–Ω–∏–∫ (GitHub URL)

```jsx
function PackInfo({ pack }) {
  return (
    <div className="text-xs opacity-60 px-2 py-1 bg-foreground/5 rounded mb-1">
      <div className="flex justify-between">
        <span>–ó–≤—É–∫–æ–≤: {pack.sounds.length}</span>
        <span>–¢–∏–ø: {pack.type}</span>
      </div>
      {pack.source && (
        <div className="truncate" title={pack.source}>
          –ò—Å—Ç–æ—á–Ω–∏–∫: {pack.source}
        </div>
      )}
    </div>
  );
}
```

#### 5.3 –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ —Ñ–æ—Ä–º—ã –≤–æ–ª–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–æ –≤—Ç–æ—Ä–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Canvas –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ waveform
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏–ª–∏ –≤ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã—Ö waveform

```jsx
import { useEffect, useRef } from 'react';

function WaveformPreview({ soundData, width = 120, height = 30 }) {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const buffer = getCachedBuffer(soundData.samples[0]);
    if (!buffer) return;

    const ctx = canvas.getContext('2d');
    const data = buffer.getChannelData(0);
    const step = Math.ceil(data.length / width);
    const amp = height / 2;

    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = 'rgba(100, 100, 255, 0.5)';

    for (let i = 0; i < width; i++) {
      let min = 1.0;
      let max = -1.0;

      for (let j = 0; j < step; j++) {
        const datum = data[(i * step) + j];
        if (datum < min) min = datum;
        if (datum > max) max = datum;
      }

      ctx.fillRect(i, (1 + min) * amp, 1, Math.max(1, (max - min) * amp));
    }
  }, [soundData, width, height]);

  return (
    <canvas
      ref={canvasRef}
      width={width}
      height={height}
      className="rounded opacity-70"
    />
  );
}
```

---

## 6. –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

### –¶–µ–ª—å
–£—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–æ –∑–≤—É–∫–∞–º–∏ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö DAW.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 6.1 –ù–∞–≤–∏–≥–∞—Ü–∏—è

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|----------|-----------|
| `Space` | –ü—Ä–µ–≤—å—é –∑–≤—É–∫–∞ | **–í—ã—Å–æ–∫–∏–π** |
| `Enter` | –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä | **–í—ã—Å–æ–∫–∏–π** |
| `F` | –î–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ | –°—Ä–µ–¥–Ω–∏–π |
| `‚Üë` / `‚Üì` | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ø–∏—Å–∫—É | **–í—ã—Å–æ–∫–∏–π** |
| `‚Üí` | –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–∞–∫ | –°—Ä–µ–¥–Ω–∏–π |
| `‚Üê` | –°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–∫ | –°—Ä–µ–¥–Ω–∏–π |
| `Esc` | –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä / –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫ | –°—Ä–µ–¥–Ω–∏–π |
| `/` | –§–æ–∫—É—Å –Ω–∞ –ø–æ–∏—Å–∫ | –ù–∏–∑–∫–∏–π |
| `Ctrl/Cmd + C` | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ | –ù–∏–∑–∫–∏–π |

#### 6.2 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

```jsx
import { useEffect, useState, useCallback, useRef } from 'react';

function useSoundNavigation(sounds, onPreview, onInsert) {
  const [selectedIndex, setSelectedIndex] = useState(-1);
  const soundsListRef = useRef(null);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
  useEffect(() => {
    if (selectedIndex >= 0 && soundsListRef.current) {
      const element = soundsListRef.current.children[selectedIndex];
      element?.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
    }
  }, [selectedIndex]);

  const handleKeyDown = useCallback((e) => {
    // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ —Ñ–æ–∫—É—Å –≤ input
    if (e.target.tagName === 'INPUT' && e.key !== 'Escape') {
      return;
    }

    switch(e.key) {
      case 'ArrowDown':
        e.preventDefault();
        setSelectedIndex(prev => Math.min(prev + 1, sounds.length - 1));
        break;

      case 'ArrowUp':
        e.preventDefault();
        setSelectedIndex(prev => Math.max(prev - 1, 0));
        break;

      case ' ':  // Space
        e.preventDefault();
        if (selectedIndex >= 0) {
          onPreview(sounds[selectedIndex]);
        }
        break;

      case 'Enter':
        e.preventDefault();
        if (selectedIndex >= 0) {
          onInsert(sounds[selectedIndex]);
        }
        break;

      case 'f':
      case 'F':
        e.preventDefault();
        if (selectedIndex >= 0) {
          toggleFavorite(sounds[selectedIndex][0]);
        }
        break;

      case 'Escape':
        setSelectedIndex(-1);
        // –°–Ω—è—Ç—å —Ñ–æ–∫—É—Å —Å –ø–æ–∏—Å–∫–∞
        document.activeElement?.blur();
        break;

      case '/':
        e.preventDefault();
        // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
        document.querySelector('#sound-search')?.focus();
        break;
    }
  }, [sounds, selectedIndex, onPreview, onInsert]);

  useEffect(() => {
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [handleKeyDown]);

  return { selectedIndex, setSelectedIndex, soundsListRef };
}
```

#### 6.3 –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

```jsx
function SoundItem({ name, data, isSelected, onClick }) {
  return (
    <div
      className={cn(
        'flex items-center gap-1 px-2 py-1 rounded cursor-pointer',
        isSelected && 'bg-blue-500/20 ring-1 ring-blue-500',
        !isSelected && 'hover:bg-foreground/5'
      )}
      onClick={onClick}
    >
      {/* ... —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ... */}
    </div>
  );
}
```

#### 6.4 –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∫–ª–∞–≤–∏—à–∞–º

- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—Å–ø–ª—ã–≤–∞—é—â—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
- [ ] –ö–Ω–æ–ø–∫–∞ "?" –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–ª–∞–≤–∏—à–∞–º
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@headlessui/react` Dialog –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

```jsx
import { Dialog } from '@headlessui/react';
import { QuestionMarkCircleIcon } from '@heroicons/react/24/outline';

function KeyboardShortcutsHelp() {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <>
      <button
        onClick={() => setIsOpen(true)}
        className="p-1 opacity-60 hover:opacity-100"
        title="–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏"
      >
        <QuestionMarkCircleIcon className="w-5 h-5" />
      </button>

      <Dialog open={isOpen} onClose={() => setIsOpen(false)}>
        <div className="fixed inset-0 bg-black/30" aria-hidden="true" />

        <div className="fixed inset-0 flex items-center justify-center p-4">
          <Dialog.Panel className="bg-background rounded-lg p-6 max-w-md">
            <Dialog.Title className="text-lg font-bold mb-4">
              –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
            </Dialog.Title>

            <table className="w-full text-sm">
              <tbody>
                <tr><td className="py-1 font-mono">Space</td><td>–ü—Ä–µ–≤—å—é –∑–≤—É–∫–∞</td></tr>
                <tr><td className="py-1 font-mono">Enter</td><td>–í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä</td></tr>
                <tr><td className="py-1 font-mono">F</td><td>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</td></tr>
                <tr><td className="py-1 font-mono">‚Üë / ‚Üì</td><td>–ù–∞–≤–∏–≥–∞—Ü–∏—è</td></tr>
                <tr><td className="py-1 font-mono">Esc</td><td>–°–±—Ä–æ—Å–∏—Ç—å</td></tr>
                <tr><td className="py-1 font-mono">/</td><td>–ü–æ–∏—Å–∫</td></tr>
              </tbody>
            </table>

            <button
              onClick={() => setIsOpen(false)}
              className="mt-4 px-4 py-2 bg-blue-500 rounded hover:bg-blue-600"
            >
              –ó–∞–∫—Ä—ã—Ç—å
            </button>
          </Dialog.Panel>
        </div>
      </Dialog>
    </>
  );
}
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (nanostores)

```javascript
// /home/user/Bulka/website/src/soundsSettings.mjs

import { persistentMap } from '@nanostores/persistent';

// –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏: { [soundName]: true }
export const favoriteSoundsMap = persistentMap('strudel-favorite-sounds', {});

// –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –ø–∞–∫–∏: { [packName]: boolean }
export const expandedPacksMap = persistentMap('strudel-expanded-packs', {});

// –í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞: { [packName]: true, _initialized: boolean }
export const selectedPacksMap = persistentMap('strudel-selected-packs', {
  _initialized: false,
});

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ –≥–æ—Ä—è—á–∏–º –∫–ª–∞–≤–∏—à–∞–º
export const showKeyboardHintMap = persistentMap('strudel-keyboard-hint', {
  shown: false,
});
```

### –¢–∏–ø—ã

```typescript
// types.ts

type SoundType = 'sample' | 'synth' | 'soundfont' | 'wavetable';

type SoundTag = 'drum-machines' | string;

interface SoundData {
  type: SoundType;
  samples: string[] | Record<string, string[]>;
  tag?: SoundTag;
  prebake?: boolean;
}

interface Sound {
  onTrigger: Function;
  data: SoundData;
}

interface Pack {
  name: string;
  sounds: Array<[string, Sound]>;
  type: SoundType;
  tag?: SoundTag;
  source?: string;
  totalSamples: number;
}

interface FuzzySearchResult {
  item: [string, Sound];
  matches?: Array<{
    key: string;
    indices: Array<[number, number]>;
  }>;
  score?: number;
}
```

---

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1-2 –¥–Ω—è)

- [x] **–î–µ–Ω—å 1: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –±–∞–∑–æ–≤—ã–π UI**
  - [ ] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `groupSoundsByPack()`
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `PackItem` —Å Disclosure
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `SoundsTab.jsx`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ `expandedPacksMap`
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø–∞–∫–æ–≤

- [x] **–î–µ–Ω—å 2: –ü–æ–ª–∏—Ä–æ–≤–∫–∞**
  - [ ] –ò–∫–æ–Ω–∫–∏ –¥–ª—è –ø–∞–∫–æ–≤ –∏ –∑–≤—É–∫–æ–≤
  - [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage
  - [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞

### –§–∞–∑–∞ 2: –§–∏–ª—å—Ç—Ä –∏ –ø–æ–∏—Å–∫ (2-3 –¥–Ω—è)

- [x] **–î–µ–Ω—å 3: –§–∏–ª—å—Ç—Ä –ø–æ –ø–∞–∫–∞–º**
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PackFilter`
  - [ ] –•—Ä–∞–Ω–∏–ª–∏—â–µ `selectedPacksMap`
  - [ ] –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
  - [ ] UI —á–µ–∫–±–æ–∫—Å–æ–≤

- [x] **–î–µ–Ω—å 4: Fuzzy search**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `fuse.js`
  - [ ] –•—É–∫ `useFuzzySearch()`
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø–æ–∏—Å–∫

- [x] **–î–µ–Ω—å 5: –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π**
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `HighlightedText`
  - [ ] –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
  - [ ] –°—á–µ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  - [ ] Debounce

### –§–∞–∑–∞ 3: –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (1 –¥–µ–Ω—å)

- [x] **–î–µ–Ω—å 6: –ò–∑–±—Ä–∞–Ω–Ω–æ–µ**
  - [ ] –•—Ä–∞–Ω–∏–ª–∏—â–µ `favoriteSoundsMap`
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `FavoriteButton`
  - [ ] –§–∏–ª—å—Ç—Ä "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"
  - [ ] –•—É–∫ `useFavorites()`
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ UI

### –§–∞–∑–∞ 4: –ü—Ä–µ–≤—å—é –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (1-2 –¥–Ω—è)

- [x] **–î–µ–Ω—å 7: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–≤—É–∫–∞—Ö**
  - [ ] –§—É–Ω–∫—Ü–∏—è `getSampleDuration()`
  - [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PackInfo`
  - [ ] –ü–æ–¥—Å—á–µ—Ç —Å–µ–º–ø–ª–æ–≤ –≤ –ø–∞–∫–µ

- [x] **–î–µ–Ω—å 8 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): Waveform**
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `WaveformPreview`
  - [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤–æ–∫
  - [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –§–∞–∑–∞ 5: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (1-2 –¥–Ω—è)

- [x] **–î–µ–Ω—å 9: –ù–∞–≤–∏–≥–∞—Ü–∏—è**
  - [ ] –•—É–∫ `useSoundNavigation()`
  - [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏—à
  - [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞
  - [ ] –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞

- [x] **–î–µ–Ω—å 10: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
  - [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `KeyboardShortcutsHelp`
  - [ ] –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - [ ] –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (onboarding)

### –§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1-2 –¥–Ω—è)

- [x] **–î–µ–Ω—å 11: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –±–æ–ª—å—à–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ (>500 –∑–≤—É–∫–æ–≤)
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - [ ] –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

- [x] **–î–µ–Ω—å 12: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
  - [ ] –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  - [ ] Lazy loading –ø–∞–∫–æ–≤
  - [ ] –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –¥–æ—Ä–æ–≥–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
  - [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

---

## –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (MVP)

- [ ] ‚úÖ –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–æ–≤ —Å —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º
- [ ] ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –ø–∞–∫–æ–≤
- [ ] ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ –ø–∞–∫–∞–º —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏
- [ ] ‚úÖ Fuzzy search –ø–æ –∏–º–µ–Ω–∏ –∑–≤—É–∫–∞ –∏ –ø–∞–∫–∞
- [ ] ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage
- [ ] ‚úÖ –ë–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (‚Üë‚Üì Enter Space)
- [ ] ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–≤—É–∫–æ–≤ –≤ –ø–∞–∫–µ

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] üéØ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –ø–æ–∏—Å–∫–µ
- [ ] üéØ –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à (F, Esc, /, ‚Üí, ‚Üê)
- [ ] üéØ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–≤—É–∫–æ–≤
- [ ] üéØ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≥–æ—Ä—è—á–∏–º –∫–ª–∞–≤–∏—à–∞–º
- [ ] üéØ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ (–∏—Å—Ç–æ—á–Ω–∏–∫, —Ç–∏–ø)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] üí° Waveform preview
- [ ] üí° –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- [ ] üí° Drag & drop –∑–≤—É–∫–æ–≤ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
- [ ] üí° –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- [ ] üí° –ò—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–≤—É–∫–æ–≤

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ø–∏—Å–∫–∞ –∏–∑ 500 –∑–≤—É–∫–æ–≤: < 100ms
- –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –≤ 1000 –∑–≤—É–∫–∞—Ö: < 50ms
- –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞: 60 FPS
- –†–∞–∑–º–µ—Ä localStorage: < 100KB

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è:**
```javascript
const groupedPacks = useMemo(() => groupSoundsByPack(soundEntries), [soundEntries]);
const searchResults = useMemo(() => fuzzySearch(sounds, query), [sounds, query]);
```

2. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
```bash
npm install react-window
```

```jsx
import { FixedSizeList } from 'react-window';

function VirtualizedSoundList({ sounds }) {
  return (
    <FixedSizeList
      height={600}
      itemCount={sounds.length}
      itemSize={35}
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>
          <SoundItem {...sounds[index]} />
        </div>
      )}
    </FixedSizeList>
  );
}
```

3. **Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞:**
```javascript
const debouncedSearch = useDebounce(searchQuery, 300);
```

4. **Lazy loading –ø–∞–∫–æ–≤:**
```javascript
// –ó–∞–≥—Ä—É–∂–∞—Ç—å metadata —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –ø–∞–∫–æ–≤
const packMetadata = useMemo(() => {
  if (!expandedPacks.has(pack.name)) return null;
  return getPackMetadata(pack);
}, [pack, expandedPacks]);
```

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ë—Ä–∞—É–∑–µ—Ä—ã

- Chrome/Edge: 90+
- Firefox: 88+
- Safari: 14+

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "dependencies": {
    "fuse.js": "^7.0.0",
    "@headlessui/react": "^2.2.0",
    "@heroicons/react": "^2.2.0",
    "@nanostores/persistent": "^0.10.2",
    "@nanostores/react": "^0.8.4"
  }
}
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –¥—Ä–∞–º-–º–∞—à–∏–Ω—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É "–ó–≤—É–∫–∏"
2. –ù–∞–∂–∏–º–∞–µ—Ç "/" –¥–ª—è —Ñ–æ–∫—É—Å–∞ –Ω–∞ –ø–æ–∏—Å–∫–µ
3. –í–≤–æ–¥–∏—Ç "808 bd"
4. Fuzzy search –Ω–∞—Ö–æ–¥–∏—Ç "808_bd" –¥–∞–∂–µ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏
5. –ù–∞–∂–∏–º–∞–µ—Ç ‚Üì –¥–ª—è –≤—ã–±–æ—Ä–∞
6. –ù–∞–∂–∏–º–∞–µ—Ç Enter –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–∞–±–æ—Ç–∞ —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–≤—É–∫–∏
2. –ù–∞–∂–∏–º–∞–µ—Ç "F" –Ω–∞ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è –∑–≤—É–∫–∞—Ö
3. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ñ–∏–ª—å—Ç—Ä "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"
4. –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏
5. –ë—ã—Å—Ç—Ä–æ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–∞–∫–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–∞–∫–æ–≤
2. –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ "808" –¥–ª—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
3. –í–∏–¥–∏—Ç –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: "24 –∑–≤—É–∫–∞, –¥—Ä–∞–º-–º–∞—à–∏–Ω–∞"
4. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–≤—É–∫–æ–≤ —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
5. –°–ª—É—à–∞–µ—Ç –ø—Ä–µ–≤—å—é –ø–æ Space
6. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω—É–∂–Ω—ã–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
```

---

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (v2.0)

1. **–¢–µ–≥–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–≥–∏ –¥–ª—è –∑–≤—É–∫–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è (kick, snare, hi-hat)
   - –§–∏–ª—å—Ç—Ä –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ç–µ–≥–∞–º

2. **–ö–æ–ª–ª–µ–∫—Ü–∏–∏**
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
   - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–π
   - –®–∞—Ä–∏–Ω–≥ –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å –¥—Ä—É–≥–∏–º–∏

3. **–ü—Ä–µ–≤—å—é —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏**
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—å—é
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–µ–≤—å—é

4. **AI —Ñ—É–Ω–∫—Ü–∏–∏**
   - –ü–æ—Ö–æ–∂–∏–µ –∑–≤—É–∫–∏ ("Find similar")
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–≤—É–∫–æ–≤ –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DAW**
   - Drag & drop –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –≠–∫—Å–ø–æ—Ä—Ç –∑–≤—É–∫–æ–≤
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ–±–ª–∞–∫–æ–º

---

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

1. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:** –ù—É–∂–Ω–∞ –ª–∏ –æ–Ω–∞ —Å–µ–π—á–∞—Å –∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é?
2. **Waveform:** –í–∫–ª—é—á–∏—Ç—å –≤ MVP –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ–∏—á–µ–π?
3. **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:** –ö–∞–∫–∏–µ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –Ω—É–∂–Ω—ã –¥–ª—è touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤?
4. **–ò–º–ø–æ—Ä—Ç –∑–≤—É–∫–æ–≤:** –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å ImportSoundsButton?

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/timoncool/Bulka
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Strudel:** https://strudel.tidalcycles.org/
- **Fuse.js docs:** https://fusejs.io/
- **Headless UI:** https://headlessui.com/

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-----------|
| 1.0 | 2025-12-07 | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –¢–ó |

