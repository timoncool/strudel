import{r as reify}from"./index.CXEd7qFE.js";import{x as m}from"./codemirror.CljggVKv.js";import{a as getAugmentedNamespace,g as getDefaultExportFromCjs}from"./_commonjsHelpers.BosuxZz1.js";import"./index.Ds4Xb5JZ.js";var treeSitter={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredTreeSitter;function requireTreeSitter(){return hasRequiredTreeSitter||(hasRequiredTreeSitter=1,function(module,exports){var Module=typeof Module<"u"?Module:{},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},scriptDirectory="";function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require$$0,nodePath=require$$0;scriptDirectory=__dirname+"/",readBinary=e=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e);var t=fs.readFileSync(e);return t},readAsync=(e,t=!0)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),new Promise((r,s)=>{fs.readFile(e,t?void 0:"utf8",(_,a)=>{_?s(_):r(t?a.buffer:a)})})),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),module.exports=Module,quit_=(e,t)=>{throw process.exitCode=e,t}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document<"u"&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory.startsWith("blob:")?scriptDirectory="":scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=e=>isFileURI(e)?new Promise((t,r)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=()=>{(s.status==200||s.status==0&&s.response)&&r(s.response),t(s.status)},s.onerror=t,s.send(null)}):fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP_DATA_VIEW;function updateMemoryViews(){var e=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(e),Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=new Int16Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=new Uint16Array(e),Module.HEAP32=new Int32Array(e),Module.HEAPU32=new Uint32Array(e),Module.HEAPF32=new Float32Array(e),Module.HEAPF64=new Float64Array(e)}if(Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:2147483648/65536})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){Module.onAbort?.(e),e="Aborted("+e+")",err(e),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw t}var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=e=>e.startsWith(dataURIPrefix),isFileURI=e=>e.startsWith("file://");function findWasmBinary(){var e="tree-sitter.wasm";return isDataURI(e)?e:locateFile(e)}var wasmBinaryFile;function getBinarySync(e){if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}function getBinaryPromise(e){return wasmBinary?Promise.resolve().then(()=>getBinarySync(e)):readAsync(e).then(t=>new Uint8Array(t),()=>getBinarySync(e))}function instantiateArrayBuffer(e,t,r){return getBinaryPromise(e).then(s=>WebAssembly.instantiate(s,t)).then(r,s=>{err(`failed to asynchronously prepare wasm: ${s}`),abort(s)})}function instantiateAsync(e,t,r,s){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(t)&&!isFileURI(t)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(_=>{var a=WebAssembly.instantiateStreaming(_,r);return a.then(s,function(n){return err(`wasm streaming compile failed: ${n}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(t,r,s)})}):instantiateArrayBuffer(t,r,s)}function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}function createWasm(){var e=getWasmImports();function t(s,_){wasmExports=s.exports,wasmExports=relocateExports(wasmExports,1024);var a=getDylinkMetadata(_);return a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency(),wasmExports}addRunDependency();function r(s){t(s.instance,s.module)}if(Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(s){return err(`Module.instantiateWasm callback failed with error: ${s}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,e,r),{}}function ExitStatus(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(e,t){var r=GOT[t];return r||(r=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(t)||(r.required=!0),r}},LE_HEAP_LOAD_F32=e=>HEAP_DATA_VIEW.getFloat32(e,!0),LE_HEAP_LOAD_F64=e=>HEAP_DATA_VIEW.getFloat64(e,!0),LE_HEAP_LOAD_I16=e=>HEAP_DATA_VIEW.getInt16(e,!0),LE_HEAP_LOAD_I32=e=>HEAP_DATA_VIEW.getInt32(e,!0),LE_HEAP_LOAD_U32=e=>HEAP_DATA_VIEW.getUint32(e,!0),LE_HEAP_STORE_F32=(e,t)=>HEAP_DATA_VIEW.setFloat32(e,t,!0),LE_HEAP_STORE_F64=(e,t)=>HEAP_DATA_VIEW.setFloat64(e,t,!0),LE_HEAP_STORE_I16=(e,t)=>HEAP_DATA_VIEW.setInt16(e,t,!0),LE_HEAP_STORE_I32=(e,t)=>HEAP_DATA_VIEW.setInt32(e,t,!0),LE_HEAP_STORE_U32=(e,t)=>HEAP_DATA_VIEW.setUint32(e,t,!0),callRuntimeCallbacks=e=>{for(;e.length>0;)e.shift()(Module)},UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=(e,t,r)=>{for(var s=t+r,_=t;e[_]&&!(_>=s);)++_;if(_-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,_));for(var a="";t<_;){var n=e[t++];if(!(n&128)){a+=String.fromCharCode(n);continue}var o=e[t++]&63;if((n&224)==192){a+=String.fromCharCode((n&31)<<6|o);continue}var u=e[t++]&63;if((n&240)==224?n=(n&15)<<12|o<<6|u:n=(n&7)<<18|o<<12|u<<6|e[t++]&63,n<65536)a+=String.fromCharCode(n);else{var c=n-65536;a+=String.fromCharCode(55296|c>>10,56320|c&1023)}}return a},getDylinkMetadata=e=>{var t=0,r=0;function s(){return e[t++]}function _(){for(var x=0,k=1;;){var T=e[t++];if(x+=(T&127)*k,k*=128,!(T&128))break}return x}function a(){var x=_();return t+=x,UTF8ArrayToString(e,t-x,x)}function n(x,k){if(x)throw new Error(k)}var o="dylink.0";if(e instanceof WebAssembly.Module){var u=WebAssembly.Module.customSections(e,o);u.length===0&&(o="dylink",u=WebAssembly.Module.customSections(e,o)),n(u.length===0,"need dylink section"),e=new Uint8Array(u[0]),r=e.length}else{var c=new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer),h=c[0]==1836278016||c[0]==6386541;n(!h,"need to see wasm magic number"),n(e[8]!==0,"need the dylink section to be first"),t=9;var I=_();r=t+I,o=a()}var f={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(o=="dylink"){f.memorySize=_(),f.memoryAlign=_(),f.tableSize=_(),f.tableAlign=_();for(var b=_(),w=0;w<b;++w){var d=a();f.neededDynlibs.push(d)}}else{n(o!=="dylink.0");for(var g=1,y=2,l=3,p=4,E=256,A=3,L=1;t<r;){var M=s(),F=_();if(M===g)f.memorySize=_(),f.memoryAlign=_(),f.tableSize=_(),f.tableAlign=_();else if(M===y)for(var b=_(),w=0;w<b;++w)d=a(),f.neededDynlibs.push(d);else if(M===l)for(var P=_();P--;){var O=a(),B=_();B&E&&f.tlsExports.add(O)}else if(M===p)for(var P=_();P--;){a();var O=a(),B=_();(B&A)==L&&f.weakImports.add(O)}else t+=F}}return f};function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return HEAP8[e];case"i8":return HEAP8[e];case"i16":return LE_HEAP_LOAD_I16((e>>1)*2);case"i32":return LE_HEAP_LOAD_I32((e>>2)*4);case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32((e>>2)*4);case"double":return LE_HEAP_LOAD_F64((e>>3)*8);case"*":return LE_HEAP_LOAD_U32((e>>2)*4);default:abort(`invalid type for getValue: ${t}`)}}var newDSO=(e,t,r)=>{var s={refcount:1/0,name:e,exports:r,global:!0};return LDSO.loadedLibsByName[e]=s,t!=null&&(LDSO.loadedLibsByHandle[t]=s),s},LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=(e,t)=>(HEAPU8.fill(0,e,e+t),e),alignMemory=(e,t)=>Math.ceil(e/t)*t,getMemory=e=>{if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,r=t+alignMemory(e,16);return ___heap_base=r,GOT.__heap_base.value=r,t},isInternalSym=e=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(e)||e.startsWith("__em_js__"),uleb128Encode=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},sigToWasmTypes=e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:e[0]=="v"?[]:[t[e[0]]]},s=1;s<e.length;++s)r.parameters.push(t[e[s]]);return r},generateFuncType=(e,t)=>{var r=e.slice(0,1),s=e.slice(1),_={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),uleb128Encode(s.length,t);for(var a=0;a<s.length;++a)t.push(_[s[a]]);r=="v"?t.push(0):t.push(1,_[r])},convertJsFunctionToWasm=(e,t)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(t),e);var r=[1];generateFuncType(t,r);var s=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,s),s.push(...r),s.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var _=new WebAssembly.Module(new Uint8Array(s)),a=new WebAssembly.Instance(_,{e:{f:e}}),n=a.exports.f;return n},wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=e=>{var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t},updateTableMap=(e,t)=>{if(functionsInTableMap)for(var r=e;r<e+t;r++){var s=getWasmTableEntry(r);s&&functionsInTableMap.set(s,r)}},functionsInTableMap,getFunctionAddress=e=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(e)||0),freeTableIndexes=[],getEmptyTableSlot=()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return wasmTable.length-1},setWasmTableEntry=(e,t)=>{wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e)},addFunction=(e,t)=>{var r=getFunctionAddress(e);if(r)return r;var s=getEmptyTableSlot();try{setWasmTableEntry(s,e)}catch(a){if(!(a instanceof TypeError))throw a;var _=convertJsFunctionToWasm(e,t);setWasmTableEntry(s,_)}return functionsInTableMap.set(e,s),s},updateGOT=(e,t)=>{for(var r in e)if(!isInternalSym(r)){var s=e[r];r.startsWith("orig$")&&(r=r.split("$")[1],t=!0),GOT[r]||=new WebAssembly.Global({value:"i32",mutable:!0}),(t||GOT[r].value==0)&&(typeof s=="function"?GOT[r].value=addFunction(s):typeof s=="number"?GOT[r].value=s:err(`unhandled export type for '${r}': ${typeof s}`))}},relocateExports=(e,t,r)=>{var s={};for(var _ in e){var a=e[_];typeof a=="object"&&(a=a.value),typeof a=="number"&&(a+=t),s[_]=a}return updateGOT(s,r),s},isSymbolDefined=e=>{var t=wasmImports[e];return!(!t||t.stub)},dynCallLegacy=(e,t,r)=>{e=e.replace(/p/g,"i");var s=Module["dynCall_"+e];return s(t,...r)},dynCall=(e,t,r=[])=>{if(e.includes("j"))return dynCallLegacy(e,t,r);var s=getWasmTableEntry(t)(...r);return s},stackSave=()=>_emscripten_stack_get_current(),stackRestore=e=>__emscripten_stack_restore(e),createInvokeFunction=e=>(t,...r)=>{var s=stackSave();try{return dynCall(e,t,r)}catch(_){if(stackRestore(s),_!==_+0)throw _;_setThrew(1,0)}},resolveGlobalSymbol=(e,t=!1)=>{var r;return t&&"orig$"+e in wasmImports&&(e="orig$"+e),isSymbolDefined(e)?r=wasmImports[e]:e.startsWith("invoke_")&&(r=wasmImports[e]=createInvokeFunction(e.split("_")[1])),{sym:r,name:e}},UTF8ToString=(e,t)=>e?UTF8ArrayToString(HEAPU8,e,t):"",loadWebAssemblyModule=(binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0,tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length;tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e).sym;return!t&&localScope&&(t=localScope[e]),t||(t=moduleExports[e]),t}var proxyHandler={get(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(t in wasmImports&&!wasmImports[t].stub)return wasmImports[t];if(!(t in e)){var r;e[t]=(...s)=>(r||=resolveSymbol(t),r(...s))}return e[t]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols();function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;eval(func)}if("__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then(e=>postInstantiation(e.module,e.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return flags.loadAsync?metadata.neededDynlibs.reduce((e,t)=>e.then(()=>loadDynamicLibrary(t,flags,localScope)),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach(e=>loadDynamicLibrary(e,flags,localScope)),loadModule())},mergeLibSymbols=(e,t)=>{for(var[r,s]of Object.entries(e)){const _=n=>{isSymbolDefined(n)||(wasmImports[n]=s)};_(r);const a="__main_argc_argv";r=="main"&&_(a),r==a&&_("main"),r.startsWith("dynCall_")&&!Module.hasOwnProperty(r)&&(Module[r]=s)}},asyncLoad=(e,t,r,s)=>{var _=`al ${e}`;readAsync(e).then(a=>{t(new Uint8Array(a)),_&&removeRunDependency()},a=>{if(r)r();else throw`Loading data file "${e}" failed.`}),_&&addRunDependency()};function loadDynamicLibrary(e,t={global:!0,nodelete:!0},r,s){var _=LDSO.loadedLibsByName[e];if(_)return t.global&&(_.global||(_.global=!0,mergeLibSymbols(_.exports))),t.nodelete&&_.refcount!==1/0&&(_.refcount=1/0),_.refcount++,t.loadAsync?Promise.resolve(!0):!0;_=newDSO(e,s,"loading"),_.refcount=t.nodelete?1/0:1,_.global=t.global;function a(){var u=locateFile(e);if(t.loadAsync)return new Promise(function(c,h){asyncLoad(u,c,h)});if(!readBinary)throw new Error(`${u}: file not found, and synchronous loading of external files is not available`);return readBinary(u)}function n(){return t.loadAsync?a().then(u=>loadWebAssemblyModule(u,t,e,r)):loadWebAssemblyModule(a(),t,e,r)}function o(u){_.global&&mergeLibSymbols(u),_.exports=u}return t.loadAsync?n().then(u=>(o(u),!0)):(o(n()),!0)}var reportUndefinedSymbols=()=>{for(var[e,t]of Object.entries(GOT))if(t.value==0){var r=resolveGlobalSymbol(e,!0).sym;if(!r&&!t.required)continue;if(typeof r=="function")t.value=addFunction(r,r.sig);else if(typeof r=="number")t.value=r;else throw new Error(`bad export type for '${e}': ${typeof r}`)}},loadDylibs=()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency(),dynamicLibraries.reduce((e,t)=>e.then(()=>loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency()})},noExitRuntime=Module.noExitRuntime||!0;function setValue(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":HEAP8[e]=t;break;case"i8":HEAP8[e]=t;break;case"i16":LE_HEAP_STORE_I16((e>>1)*2,t);break;case"i32":LE_HEAP_STORE_I32((e>>2)*4,t);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32((e>>2)*4,t);break;case"double":LE_HEAP_STORE_F64((e>>3)*8,t);break;case"*":LE_HEAP_STORE_U32((e>>2)*4,t);break;default:abort(`invalid type for setValue: ${r}`)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=()=>{abort("")};__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=()=>nowIsMonotonic;__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=(e,t,r)=>HEAPU8.copyWithin(e,t,t+r);__emscripten_memcpy_js.sig="vppp";var _emscripten_get_now;_emscripten_get_now=()=>performance.now(),_emscripten_get_now.sig="d";var getHeapMax=()=>2147483648,growMemory=e=>{var t=wasmMemory.buffer,r=(e-t.byteLength+65535)/65536;try{return wasmMemory.grow(r),updateMemoryViews(),1}catch{}},_emscripten_resize_heap=e=>{var t=HEAPU8.length;e>>>=0;var r=getHeapMax();if(e>r)return!1;for(var s=(u,c)=>u+(c-u%c)%c,_=1;_<=4;_*=2){var a=t*(1+.2/_);a=Math.min(a,e+100663296);var n=Math.min(r,s(Math.max(e,a),65536)),o=growMemory(n);if(o)return!0}return!1};_emscripten_resize_heap.sig="ip";var _fd_close=e=>52;_fd_close.sig="ii";function _fd_seek(e,t,r,s,_){return 70}_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=(e,t)=>{var r=printCharBuffers[e];t===0||t===10?((e===1?out:err)(UTF8ArrayToString(r,0)),r.length=0):r.push(t)},_fd_write=(e,t,r,s)=>{for(var _=0,a=0;a<r;a++){var n=LE_HEAP_LOAD_U32((t>>2)*4),o=LE_HEAP_LOAD_U32((t+4>>2)*4);t+=8;for(var u=0;u<o;u++)printChar(e,HEAPU8[n+u]);_+=o}return LE_HEAP_STORE_U32((s>>2)*4,_),0};_fd_write.sig="iippp";function _tree_sitter_log_callback(e,t){if(currentLogCallback){const r=UTF8ToString(t);currentLogCallback(r,e!==0)}}function _tree_sitter_parse_callback(e,t,r,s,_){const n=currentParseCallback(t,{row:r,column:s});typeof n=="string"?(setValue(_,n.length,"i32"),stringToUTF16(n,e,10240)):setValue(_,0,"i32")}var keepRuntimeAlive=()=>noExitRuntime,_proc_exit=e=>{EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit?.(e),ABORT=!0),quit_(e,new ExitStatus(e))};_proc_exit.sig="vi";var exitJS=(e,t)=>{EXITSTATUS=e,_proc_exit(e)},handleException=e=>{if(e instanceof ExitStatus||e=="unwind")return EXITSTATUS;quit_(1,e)},lengthBytesUTF8=e=>{for(var t=0,r=0;r<e.length;++r){var s=e.charCodeAt(r);s<=127?t++:s<=2047?t+=2:s>=55296&&s<=57343?(t+=4,++r):t+=3}return t},stringToUTF8Array=(e,t,r,s)=>{if(!(s>0))return 0;for(var _=r,a=r+s-1,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343){var u=e.charCodeAt(++n);o=65536+((o&1023)<<10)|u&1023}if(o<=127){if(r>=a)break;t[r++]=o}else if(o<=2047){if(r+1>=a)break;t[r++]=192|o>>6,t[r++]=128|o&63}else if(o<=65535){if(r+2>=a)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|o&63}else{if(r+3>=a)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|o&63}}return t[r]=0,r-_},stringToUTF8=(e,t,r)=>stringToUTF8Array(e,HEAPU8,t,r),stackAlloc=e=>__emscripten_stack_alloc(e),stringToUTF8OnStack=e=>{var t=lengthBytesUTF8(e)+1,r=stackAlloc(t);return stringToUTF8(e,r,t),r},stringToUTF16=(e,t,r)=>{if(r??=2147483647,r<2)return 0;r-=2;for(var s=t,_=r<e.length*2?r/2:e.length,a=0;a<_;++a){var n=e.charCodeAt(a);LE_HEAP_STORE_I16((t>>1)*2,n),t+=2}return LE_HEAP_STORE_I16((t>>1)*2,0),t-s},AsciiToString=e=>{for(var t="";;){var r=HEAPU8[e++];if(!r)return t;t+=String.fromCharCode(r)}},wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),_malloc=Module._malloc=e=>(_malloc=Module._malloc=wasmExports.malloc)(e);Module._calloc=(e,t)=>(Module._calloc=wasmExports.calloc)(e,t),Module._realloc=(e,t)=>(Module._realloc=wasmExports.realloc)(e,t),Module._free=e=>(Module._free=wasmExports.free)(e),Module._ts_language_symbol_count=e=>(Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(e),Module._ts_language_state_count=e=>(Module._ts_language_state_count=wasmExports.ts_language_state_count)(e),Module._ts_language_version=e=>(Module._ts_language_version=wasmExports.ts_language_version)(e),Module._ts_language_field_count=e=>(Module._ts_language_field_count=wasmExports.ts_language_field_count)(e),Module._ts_language_next_state=(e,t,r)=>(Module._ts_language_next_state=wasmExports.ts_language_next_state)(e,t,r),Module._ts_language_symbol_name=(e,t)=>(Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(e,t),Module._ts_language_symbol_for_name=(e,t,r,s)=>(Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(e,t,r,s),Module._strncmp=(e,t,r)=>(Module._strncmp=wasmExports.strncmp)(e,t,r),Module._ts_language_symbol_type=(e,t)=>(Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(e,t),Module._ts_language_field_name_for_id=(e,t)=>(Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(e,t),Module._ts_lookahead_iterator_new=(e,t)=>(Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(e,t),Module._ts_lookahead_iterator_delete=e=>(Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(e),Module._ts_lookahead_iterator_reset_state=(e,t)=>(Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(e,t),Module._ts_lookahead_iterator_reset=(e,t,r)=>(Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(e,t,r),Module._ts_lookahead_iterator_next=e=>(Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(e),Module._ts_lookahead_iterator_current_symbol=e=>(Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(e),Module._memset=(e,t,r)=>(Module._memset=wasmExports.memset)(e,t,r),Module._memcpy=(e,t,r)=>(Module._memcpy=wasmExports.memcpy)(e,t,r),Module._ts_parser_delete=e=>(Module._ts_parser_delete=wasmExports.ts_parser_delete)(e),Module._ts_parser_reset=e=>(Module._ts_parser_reset=wasmExports.ts_parser_reset)(e),Module._ts_parser_set_language=(e,t)=>(Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(e,t),Module._ts_parser_timeout_micros=e=>(Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(e),Module._ts_parser_set_timeout_micros=(e,t,r)=>(Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(e,t,r),Module._ts_parser_set_included_ranges=(e,t,r)=>(Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(e,t,r),Module._memmove=(e,t,r)=>(Module._memmove=wasmExports.memmove)(e,t,r),Module._memcmp=(e,t,r)=>(Module._memcmp=wasmExports.memcmp)(e,t,r),Module._ts_query_new=(e,t,r,s,_)=>(Module._ts_query_new=wasmExports.ts_query_new)(e,t,r,s,_),Module._ts_query_delete=e=>(Module._ts_query_delete=wasmExports.ts_query_delete)(e),Module._iswspace=e=>(Module._iswspace=wasmExports.iswspace)(e),Module._iswalnum=e=>(Module._iswalnum=wasmExports.iswalnum)(e),Module._ts_query_pattern_count=e=>(Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(e),Module._ts_query_capture_count=e=>(Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(e),Module._ts_query_string_count=e=>(Module._ts_query_string_count=wasmExports.ts_query_string_count)(e),Module._ts_query_capture_name_for_id=(e,t,r)=>(Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(e,t,r),Module._ts_query_string_value_for_id=(e,t,r)=>(Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(e,t,r),Module._ts_query_predicates_for_pattern=(e,t,r)=>(Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(e,t,r),Module._ts_query_disable_capture=(e,t,r)=>(Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(e,t,r),Module._ts_tree_copy=e=>(Module._ts_tree_copy=wasmExports.ts_tree_copy)(e),Module._ts_tree_delete=e=>(Module._ts_tree_delete=wasmExports.ts_tree_delete)(e),Module._ts_init=()=>(Module._ts_init=wasmExports.ts_init)(),Module._ts_parser_new_wasm=()=>(Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),Module._ts_parser_enable_logger_wasm=(e,t)=>(Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(e,t),Module._ts_parser_parse_wasm=(e,t,r,s,_)=>(Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(e,t,r,s,_),Module._ts_parser_included_ranges_wasm=e=>(Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(e),Module._ts_language_type_is_named_wasm=(e,t)=>(Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(e,t),Module._ts_language_type_is_visible_wasm=(e,t)=>(Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(e,t),Module._ts_tree_root_node_wasm=e=>(Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(e),Module._ts_tree_root_node_with_offset_wasm=e=>(Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(e),Module._ts_tree_edit_wasm=e=>(Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(e),Module._ts_tree_included_ranges_wasm=e=>(Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(e),Module._ts_tree_get_changed_ranges_wasm=(e,t)=>(Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(e,t),Module._ts_tree_cursor_new_wasm=e=>(Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(e),Module._ts_tree_cursor_delete_wasm=e=>(Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(e),Module._ts_tree_cursor_reset_wasm=e=>(Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(e),Module._ts_tree_cursor_reset_to_wasm=(e,t)=>(Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(e,t),Module._ts_tree_cursor_goto_first_child_wasm=e=>(Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(e),Module._ts_tree_cursor_goto_last_child_wasm=e=>(Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(e),Module._ts_tree_cursor_goto_first_child_for_index_wasm=e=>(Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(e),Module._ts_tree_cursor_goto_first_child_for_position_wasm=e=>(Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(e),Module._ts_tree_cursor_goto_next_sibling_wasm=e=>(Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(e),Module._ts_tree_cursor_goto_previous_sibling_wasm=e=>(Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(e),Module._ts_tree_cursor_goto_descendant_wasm=(e,t)=>(Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(e,t),Module._ts_tree_cursor_goto_parent_wasm=e=>(Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(e),Module._ts_tree_cursor_current_node_type_id_wasm=e=>(Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(e),Module._ts_tree_cursor_current_node_state_id_wasm=e=>(Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(e),Module._ts_tree_cursor_current_node_is_named_wasm=e=>(Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(e),Module._ts_tree_cursor_current_node_is_missing_wasm=e=>(Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(e),Module._ts_tree_cursor_current_node_id_wasm=e=>(Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(e),Module._ts_tree_cursor_start_position_wasm=e=>(Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(e),Module._ts_tree_cursor_end_position_wasm=e=>(Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(e),Module._ts_tree_cursor_start_index_wasm=e=>(Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(e),Module._ts_tree_cursor_end_index_wasm=e=>(Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(e),Module._ts_tree_cursor_current_field_id_wasm=e=>(Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(e),Module._ts_tree_cursor_current_depth_wasm=e=>(Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(e),Module._ts_tree_cursor_current_descendant_index_wasm=e=>(Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(e),Module._ts_tree_cursor_current_node_wasm=e=>(Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(e),Module._ts_node_symbol_wasm=e=>(Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(e),Module._ts_node_field_name_for_child_wasm=(e,t)=>(Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(e,t),Module._ts_node_children_by_field_id_wasm=(e,t)=>(Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(e,t),Module._ts_node_first_child_for_byte_wasm=e=>(Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(e),Module._ts_node_first_named_child_for_byte_wasm=e=>(Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(e),Module._ts_node_grammar_symbol_wasm=e=>(Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(e),Module._ts_node_child_count_wasm=e=>(Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(e),Module._ts_node_named_child_count_wasm=e=>(Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(e),Module._ts_node_child_wasm=(e,t)=>(Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(e,t),Module._ts_node_named_child_wasm=(e,t)=>(Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(e,t),Module._ts_node_child_by_field_id_wasm=(e,t)=>(Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(e,t),Module._ts_node_next_sibling_wasm=e=>(Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(e),Module._ts_node_prev_sibling_wasm=e=>(Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(e),Module._ts_node_next_named_sibling_wasm=e=>(Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(e),Module._ts_node_prev_named_sibling_wasm=e=>(Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(e),Module._ts_node_descendant_count_wasm=e=>(Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(e),Module._ts_node_parent_wasm=e=>(Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(e),Module._ts_node_descendant_for_index_wasm=e=>(Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(e),Module._ts_node_named_descendant_for_index_wasm=e=>(Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(e),Module._ts_node_descendant_for_position_wasm=e=>(Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(e),Module._ts_node_named_descendant_for_position_wasm=e=>(Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(e),Module._ts_node_start_point_wasm=e=>(Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(e),Module._ts_node_end_point_wasm=e=>(Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(e),Module._ts_node_start_index_wasm=e=>(Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(e),Module._ts_node_end_index_wasm=e=>(Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(e),Module._ts_node_to_string_wasm=e=>(Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(e),Module._ts_node_children_wasm=e=>(Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(e),Module._ts_node_named_children_wasm=e=>(Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(e),Module._ts_node_descendants_of_type_wasm=(e,t,r,s,_,a,n)=>(Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(e,t,r,s,_,a,n),Module._ts_node_is_named_wasm=e=>(Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(e),Module._ts_node_has_changes_wasm=e=>(Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(e),Module._ts_node_has_error_wasm=e=>(Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(e),Module._ts_node_is_error_wasm=e=>(Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(e),Module._ts_node_is_missing_wasm=e=>(Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(e),Module._ts_node_is_extra_wasm=e=>(Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(e),Module._ts_node_parse_state_wasm=e=>(Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(e),Module._ts_node_next_parse_state_wasm=e=>(Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(e),Module._ts_query_matches_wasm=(e,t,r,s,_,a,n,o,u,c,h)=>(Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(e,t,r,s,_,a,n,o,u,c,h),Module._ts_query_captures_wasm=(e,t,r,s,_,a,n,o,u,c,h)=>(Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(e,t,r,s,_,a,n,o,u,c,h),Module._iswalpha=e=>(Module._iswalpha=wasmExports.iswalpha)(e),Module._iswblank=e=>(Module._iswblank=wasmExports.iswblank)(e),Module._iswdigit=e=>(Module._iswdigit=wasmExports.iswdigit)(e),Module._iswlower=e=>(Module._iswlower=wasmExports.iswlower)(e),Module._iswupper=e=>(Module._iswupper=wasmExports.iswupper)(e),Module._iswxdigit=e=>(Module._iswxdigit=wasmExports.iswxdigit)(e),Module._memchr=(e,t,r)=>(Module._memchr=wasmExports.memchr)(e,t,r),Module._strlen=e=>(Module._strlen=wasmExports.strlen)(e),Module._strcmp=(e,t)=>(Module._strcmp=wasmExports.strcmp)(e,t),Module._strncat=(e,t,r)=>(Module._strncat=wasmExports.strncat)(e,t,r),Module._strncpy=(e,t,r)=>(Module._strncpy=wasmExports.strncpy)(e,t,r),Module._towlower=e=>(Module._towlower=wasmExports.towlower)(e),Module._towupper=e=>(Module._towupper=wasmExports.towupper)(e);var _setThrew=(e,t)=>(_setThrew=wasmExports.setThrew)(e,t),__emscripten_stack_restore=e=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(e),__emscripten_stack_alloc=e=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(e),_emscripten_stack_get_current=()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)();Module.dynCall_jiji=(e,t,r,s,_)=>(Module.dynCall_jiji=wasmExports.dynCall_jiji)(e,t,r,s,_),Module._orig$ts_parser_timeout_micros=e=>(Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(e),Module._orig$ts_parser_set_timeout_micros=(e,t)=>(Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(e,t),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16;var calledRun;dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)};function callMain(e=[]){var t=resolveGlobalSymbol("main").sym;if(t){e.unshift(thisProgram);var r=e.length,s=stackAlloc((r+1)*4),_=s;e.forEach(n=>{LE_HEAP_STORE_U32((_>>2)*4,stringToUTF8OnStack(n)),_+=4}),LE_HEAP_STORE_U32((_>>2)*4,0);try{var a=t(r,s);return exitJS(a,!0),a}catch(n){return handleException(n)}}}function run(e=arguments_){if(runDependencies>0||(preRun(),runDependencies>0))return;function t(){calledRun||(calledRun=!0,Module.calledRun=!0,!ABORT&&(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;let VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(t){let r;if(!t)r=0,t=null;else if(t.constructor===Language){r=t[0];const s=C._ts_language_version(r);if(s<MIN_COMPATIBLE_VERSION||VERSION<s)throw new Error(`Incompatible language version ${s}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}else throw new Error("Argument must be a Language");return this.language=t,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(t,r,s){if(typeof t=="string")currentParseCallback=(u,c)=>t.slice(u);else if(typeof t=="function")currentParseCallback=t;else throw new Error("Argument must be a string or a function");this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let _=0,a=0;if(s?.includedRanges){_=s.includedRanges.length,a=C._calloc(_,SIZE_OF_RANGE);let u=a;for(let c=0;c<_;c++)marshalRange(u,s.includedRanges[c]),u+=SIZE_OF_RANGE}const n=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,a,_);if(!n)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");const o=new Tree(INTERNAL,n,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,o}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);const t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),s=new Array(t);if(t>0){let _=r;for(let a=0;a<t;a++)s[a]=unmarshalRange(_),_+=SIZE_OF_RANGE;C._free(r)}return s}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(t){C._ts_parser_set_timeout_micros(this[0],t)}setLogger(t){if(!t)t=null;else if(typeof t!="function")throw new Error("Logger callback must be a function");return this.logCallback=t,this}getLogger(){return this.logCallback}}class Tree{constructor(t,r,s,_){assertInternal(t),this[0]=r,this.language=s,this.textCallback=_}copy(){const t=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,t,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(t){marshalEdit(t),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(t,r){const s=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(s,t,"i32"),marshalPoint(s+SIZE_OF_INT,r),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(t){if(t.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],t[0]);const r=getValue(TRANSFER_BUFFER,"i32"),s=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),_=new Array(r);if(r>0){let a=s;for(let n=0;n<r;n++)_[n]=unmarshalRange(a),a+=SIZE_OF_RANGE;C._free(s)}return _}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);const t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),s=new Array(t);if(t>0){let _=r;for(let a=0;a<t;a++)s[a]=unmarshalRange(_),_+=SIZE_OF_RANGE;C._free(r)}return s}}class Node{constructor(t,r){assertInternal(t),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}get hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}get hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}get isError(){return marshalNode(this),C._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}get isExtra(){return marshalNode(this),C._ts_node_is_extra_wasm(this.tree[0])===1}equals(t){return this.id===t.id}child(t){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}namedChild(t){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldId(t){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldName(t){const r=this.tree.language.fields.indexOf(t);return r!==-1?this.childForFieldId(r):null}fieldNameForChild(t){marshalNode(this);const r=C._ts_node_field_name_for_child_wasm(this.tree[0],t);return r?AsciiToString(r):null}childrenForFieldName(t){const r=this.tree.language.fields.indexOf(t);return r!==-1&&r!==0?this.childrenForFieldId(r):[]}childrenForFieldId(t){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],t);const r=getValue(TRANSFER_BUFFER,"i32"),s=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),_=new Array(r);if(r>0){let a=s;for(let n=0;n<r;n++)_[n]=unmarshalNode(this.tree,a),a+=SIZE_OF_NODE;C._free(s)}return _}firstChildForIndex(t){marshalNode(this);const r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,t,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(t){marshalNode(this);const r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,t,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(t),t>0){let s=r;for(let _=0;_<t;_++)this._children[_]=unmarshalNode(this.tree,s),s+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(t),t>0){let s=r;for(let _=0;_<t;_++)this._namedChildren[_]=unmarshalNode(this.tree,s),s+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(t,r,s){Array.isArray(t)||(t=[t]),r||(r=ZERO_POINT),s||(s=ZERO_POINT);const _=[],a=this.tree.language.types;for(let h=0,I=a.length;h<I;h++)t.includes(a[h])&&_.push(h);const n=C._malloc(SIZE_OF_INT*_.length);for(let h=0,I=_.length;h<I;h++)setValue(n+h*SIZE_OF_INT,_[h],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],n,_.length,r.row,r.column,s.row,s.column);const o=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(o);if(o>0){let h=u;for(let I=0;I<o;I++)c[I]=unmarshalNode(this.tree,h),h+=SIZE_OF_NODE}return C._free(u),C._free(n),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);const s=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(s,t,"i32"),setValue(s+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);const s=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(s,t,"i32"),setValue(s+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);const s=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(s,t),marshalPoint(s+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);const s=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(s,t),marshalPoint(s+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const t=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(t);return C._free(t),r}}class TreeCursor{constructor(t,r){assertInternal(t),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(t){marshalNode(t),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(t){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(t,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],t.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);const t=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,t,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);const t=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoLastChild(){marshalTreeCursor(this);const t=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoFirstChildForIndex(t){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,t,"i32");const r=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoFirstChildForPosition(t){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,t);const r=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoNextSibling(){marshalTreeCursor(this);const t=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoPreviousSibling(){marshalTreeCursor(this);const t=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoDescendant(t){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],t),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);const t=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}}class Language{constructor(t,r){assertInternal(t),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let s=0,_=this.types.length;s<_;s++)C._ts_language_symbol_type(this[0],s)<2&&(this.types[s]=UTF8ToString(C._ts_language_symbol_name(this[0],s)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let s=0,_=this.fields.length;s<_;s++){const a=C._ts_language_field_name_for_id(this[0],s);a!==0?this.fields[s]=UTF8ToString(a):this.fields[s]=null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(t){const r=this.fields.indexOf(t);return r!==-1?r:null}fieldNameForId(t){return this.fields[t]||null}idForNodeType(t,r){const s=lengthBytesUTF8(t),_=C._malloc(s+1);stringToUTF8(t,_,s+1);const a=C._ts_language_symbol_for_name(this[0],_,s,r);return C._free(_),a||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(t){const r=C._ts_language_symbol_name(this[0],t);return r?UTF8ToString(r):null}nodeTypeIsNamed(t){return!!C._ts_language_type_is_named_wasm(this[0],t)}nodeTypeIsVisible(t){return!!C._ts_language_type_is_visible_wasm(this[0],t)}nextState(t,r){return C._ts_language_next_state(this[0],t,r)}lookaheadIterator(t){const r=C._ts_lookahead_iterator_new(this[0],t);return r?new LookaheadIterable(INTERNAL,r,this):null}query(t){const r=lengthBytesUTF8(t),s=C._malloc(r+1);stringToUTF8(t,s,r+1);const _=C._ts_query_new(this[0],s,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!_){const d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=getValue(TRANSFER_BUFFER,"i32"),y=UTF8ToString(s,g).length,l=t.substr(y,100).split(`
`)[0];let p=l.match(QUERY_WORD_REGEX)[0],E;switch(d){case 2:E=new RangeError(`Bad node name '${p}'`);break;case 3:E=new RangeError(`Bad field name '${p}'`);break;case 4:E=new RangeError(`Bad capture name @${p}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${y}: '${l}'...`),p="";break;default:E=new SyntaxError(`Bad syntax at offset ${y}: '${l}'...`),p="";break}throw E.index=y,E.length=p.length,C._free(s),E}const a=C._ts_query_string_count(_),n=C._ts_query_capture_count(_),o=C._ts_query_pattern_count(_),u=new Array(n),c=new Array(a);for(let d=0;d<n;d++){const g=C._ts_query_capture_name_for_id(_,d,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");u[d]=UTF8ToString(g,y)}for(let d=0;d<a;d++){const g=C._ts_query_string_value_for_id(_,d,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");c[d]=UTF8ToString(g,y)}const h=new Array(o),I=new Array(o),f=new Array(o),b=new Array(o),w=new Array(o);for(let d=0;d<o;d++){const g=C._ts_query_predicates_for_pattern(_,d,TRANSFER_BUFFER),y=getValue(TRANSFER_BUFFER,"i32");b[d]=[],w[d]=[];const l=[];let p=g;for(let E=0;E<y;E++){const A=getValue(p,"i32");p+=SIZE_OF_INT;const L=getValue(p,"i32");if(p+=SIZE_OF_INT,A===PREDICATE_STEP_TYPE_CAPTURE)l.push({type:"capture",name:u[L]});else if(A===PREDICATE_STEP_TYPE_STRING)l.push({type:"string",value:c[L]});else if(l.length>0){if(l[0].type!=="string")throw new Error("Predicates must begin with a literal value");const M=l[0].value;let F=!0,P=!0,O;switch(M){case"any-not-eq?":case"not-eq?":F=!1;case"any-eq?":case"eq?":if(l.length!==3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 2, got ${l.length-1}`);if(l[1].type!=="capture")throw new Error(`First argument of \`#${M}\` predicate must be a capture. Got "${l[1].value}"`);if(P=!M.startsWith("any-"),l[2].type==="capture"){const T=l[1].name,S=l[2].name;w[d].push(N=>{const R=[],U=[];for(const v of N)v.name===T&&R.push(v.node),v.name===S&&U.push(v.node);const V=(v,D,Z)=>Z?v.text===D.text:v.text!==D.text;return P?R.every(v=>U.some(D=>V(v,D,F))):R.some(v=>U.some(D=>V(v,D,F)))})}else{O=l[1].name;const T=l[2].value,S=R=>R.text===T,N=R=>R.text!==T;w[d].push(R=>{const U=[];for(const v of R)v.name===O&&U.push(v.node);const V=F?S:N;return P?U.every(V):U.some(V)})}break;case"any-not-match?":case"not-match?":F=!1;case"any-match?":case"match?":if(l.length!==3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 2, got ${l.length-1}.`);if(l[1].type!=="capture")throw new Error(`First argument of \`#${M}\` predicate must be a capture. Got "${l[1].value}".`);if(l[2].type!=="string")throw new Error(`Second argument of \`#${M}\` predicate must be a string. Got @${l[2].value}.`);O=l[1].name;const B=new RegExp(l[2].value);P=!M.startsWith("any-"),w[d].push(T=>{const S=[];for(const R of T)R.name===O&&S.push(R.node.text);const N=(R,U)=>U?B.test(R):!B.test(R);return S.length===0?!F:P?S.every(R=>N(R,F)):S.some(R=>N(R,F))});break;case"set!":if(l.length<2||l.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${l.length-1}.`);if(l.some(T=>T.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');h[d]||(h[d]={}),h[d][l[1].value]=l[2]?l[2].value:null;break;case"is?":case"is-not?":if(l.length<2||l.length>3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 1 or 2. Got ${l.length-1}.`);if(l.some(T=>T.type!=="string"))throw new Error(`Arguments to \`#${M}\` predicate must be a strings.".`);const x=M==="is?"?I:f;x[d]||(x[d]={}),x[d][l[1].value]=l[2]?l[2].value:null;break;case"not-any-of?":F=!1;case"any-of?":if(l.length<2)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected at least 1. Got ${l.length-1}.`);if(l[1].type!=="capture")throw new Error(`First argument of \`#${M}\` predicate must be a capture. Got "${l[1].value}".`);for(let T=2;T<l.length;T++)if(l[T].type!=="string")throw new Error(`Arguments to \`#${M}\` predicate must be a strings.".`);O=l[1].name;const k=l.slice(2).map(T=>T.value);w[d].push(T=>{const S=[];for(const N of T)N.name===O&&S.push(N.node.text);return S.length===0?!F:S.every(N=>k.includes(N))===F});break;default:b[d].push({operator:M,operands:l.slice(1)})}l.length=0}}Object.freeze(h[d]),Object.freeze(I[d]),Object.freeze(f[d])}return C._free(s),new Query(INTERNAL,_,u,w,b,Object.freeze(h),Object.freeze(I),Object.freeze(f))}static load(t){let r;if(t instanceof Uint8Array)r=Promise.resolve(t);else{const s=t;if(typeof process<"u"&&process.versions&&process.versions.node){const _=require$$0;r=Promise.resolve(_.readFileSync(s))}else r=fetch(s).then(_=>_.arrayBuffer().then(a=>{if(_.ok)return new Uint8Array(a);{const n=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${_.status}.

${n}`)}}))}return r.then(s=>loadWebAssemblyModule(s,{loadAsync:!0})).then(s=>{const _=Object.keys(s),a=_.find(o=>LANGUAGE_FUNCTION_REGEX.test(o)&&!o.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(_,null,2)}`);const n=s[a]();return new Language(INTERNAL,n)})}}class LookaheadIterable{constructor(t,r,s){assertInternal(t),this[0]=r,this.language=s}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(t){return C._ts_lookahead_iterator_reset_state(this[0],t)}reset(t,r){return C._ts_lookahead_iterator_reset(this[0],t[0],r)?(this.language=t,!0):!1}[Symbol.iterator](){const t=this;return{next(){return C._ts_lookahead_iterator_next(t[0])?{done:!1,value:t.currentType}:{done:!0,value:""}}}}}class Query{constructor(t,r,s,_,a,n,o,u){assertInternal(t),this[0]=r,this.captureNames=s,this.textPredicates=_,this.predicates=a,this.setProperties=n,this.assertedProperties=o,this.refutedProperties=u,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(t,{startPosition:r=ZERO_POINT,endPosition:s=ZERO_POINT,startIndex:_=0,endIndex:a=0,matchLimit:n=4294967295,maxStartDepth:o=4294967295,timeoutMicros:u=0}={}){if(typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_matches_wasm(this[0],t.tree[0],r.row,r.column,s.row,s.column,_,a,n,o,u);const c=getValue(TRANSFER_BUFFER,"i32"),h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),I=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=new Array(c);this.exceededMatchLimit=!!I;let b=0,w=h;for(let d=0;d<c;d++){const g=getValue(w,"i32");w+=SIZE_OF_INT;const y=getValue(w,"i32");w+=SIZE_OF_INT;const l=new Array(y);if(w=unmarshalCaptures(this,t.tree,w,l),this.textPredicates[g].every(p=>p(l))){f[b]={pattern:g,captures:l};const p=this.setProperties[g];p&&(f[b].setProperties=p);const E=this.assertedProperties[g];E&&(f[b].assertedProperties=E);const A=this.refutedProperties[g];A&&(f[b].refutedProperties=A),b++}}return f.length=b,C._free(h),f}captures(t,{startPosition:r=ZERO_POINT,endPosition:s=ZERO_POINT,startIndex:_=0,endIndex:a=0,matchLimit:n=4294967295,maxStartDepth:o=4294967295,timeoutMicros:u=0}={}){if(typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_captures_wasm(this[0],t.tree[0],r.row,r.column,s.row,s.column,_,a,n,o,u);const c=getValue(TRANSFER_BUFFER,"i32"),h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),I=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=[];this.exceededMatchLimit=!!I;const b=[];let w=h;for(let d=0;d<c;d++){const g=getValue(w,"i32");w+=SIZE_OF_INT;const y=getValue(w,"i32");w+=SIZE_OF_INT;const l=getValue(w,"i32");if(w+=SIZE_OF_INT,b.length=y,w=unmarshalCaptures(this,t.tree,w,b),this.textPredicates[g].every(p=>p(b))){const p=b[l],E=this.setProperties[g];E&&(p.setProperties=E);const A=this.assertedProperties[g];A&&(p.assertedProperties=A);const L=this.refutedProperties[g];L&&(p.refutedProperties=L),f.push(p)}}return C._free(h),f}predicatesForPattern(t){return this.predicates[t]}disableCapture(t){const r=lengthBytesUTF8(t),s=C._malloc(r+1);stringToUTF8(t,s,r+1),C._ts_query_disable_capture(this[0],s,r),C._free(s)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,r){const s=r-t;let _=e.textCallback(t,null,r);for(t+=_.length;t<r;){const a=e.textCallback(t,null,r);if(a&&a.length>0)t+=a.length,_+=a;else break}return t>r&&(_=_.slice(0,s)),_}function unmarshalCaptures(e,t,r,s){for(let _=0,a=s.length;_<a;_++){const n=getValue(r,"i32");r+=SIZE_OF_INT;const o=unmarshalNode(t,r);r+=SIZE_OF_NODE,s[_]={name:e.captureNames[n],node:o}}return r}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&typeof e.row=="number"&&typeof e.column=="number"}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32")}function unmarshalNode(e,t=TRANSFER_BUFFER){const r=getValue(t,"i32");if(t+=SIZE_OF_INT,r===0)return null;const s=getValue(t,"i32");t+=SIZE_OF_INT;const _=getValue(t,"i32");t+=SIZE_OF_INT;const a=getValue(t,"i32");t+=SIZE_OF_INT;const n=getValue(t,"i32"),o=new Node(INTERNAL,e);return o.id=r,o.startIndex=s,o.startPosition={row:_,column:a},o[0]=n,o}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32"),setValue(t+3*SIZE_OF_INT,e[3],"i32")}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),e[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32")}function unmarshalPoint(e){return{row:getValue(e,"i32")>>>0,column:getValue(e+SIZE_OF_INT,"i32")>>>0}}function marshalRange(e,t){marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.endPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.endIndex,"i32"),e+=SIZE_OF_INT}function unmarshalRange(e){const t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32")>>>0,e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32")>>>0,t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT}for(const e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();module.exports=TreeSitter}(treeSitter)),treeSitter.exports}var treeSitterExports=requireTreeSitter();const Parser=getDefaultExportFromCjs(treeSitterExports);let base="/",isReady=!1,parser;async function _loadParser(){await Parser.init({locateFile(t,r){return`${base}${t}`}}),parser=new Parser;const e=await Parser.Language.load(`${base}tree-sitter-haskell.wasm`);return parser.setLanguage(e),isReady=!0,parser}let parserLoaded;function loadParser(){return parserLoaded||(parserLoaded=_loadParser()),parserLoaded}function parse(e){if(!isReady)throw new Error("hs2js not ready. await loadParser before calling evaluate or parse functions");return parser.parse(e.replaceAll(`

`,"~~~~").replaceAll(`
`," ").replaceAll("~~~~",` 
`))}function runApply(e,t,r){if(e.children.length!==2)throw new Error(`expected 2 children for node type apply, got ${e.children.length}`);const[s,_]=e.children.map(a=>run(a,t,r));if(typeof s!="function")throw new Error(`${e.children[0].text} is not a function`);return s(_)}function runInfix(e,t,r,s){const _=s[t];if(_)return _(e,r);switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r;case"$":return e(r);case"&":return console.log("right",r),r(e);case".":return a=>e(r(a));default:throw new Error("unexpected infix operator "+t)}}function curry(e,t,r,s){const[_,...a]=e;return n=>{let o={...r,[_.text]:n};return e.length===1?run(t,o,s):curry(a,t,o,s)}}function run(e,t,r={}){let s=(_,a=t)=>run(_,a,r);if(r[e.type])return r[e.type](e);switch(e.type){case"ERROR":throw new Error(`invalid syntax: "${e.text}"`);case"declarations":let _;return e.children.forEach(g=>{_=s(g)}),_;case"integer":return Number(e.text);case"float":return Number(e.text);case"string":const a=e.text.slice(1,-1);return String(a);case"lambda":const[n,o,u,c]=e.children;return curry(o.children,c,t,r);case"function":const[h,I,f]=e.children;return t[h.text]=curry(I.children,f,t,r),t[h.text];case"list":return e.children.filter((g,y)=>y%2===1).map(g=>s(g));case"match":if(e.children[0].text!=="="||e.children.length!==2)throw new Error("match node so far only support simple assignments");return s(e.children[1]);case"bind":if(e.children.length!==2)throw new Error("expected 2 children for node type bind");if(e.children[0].type!=="variable")throw new Error("expected variable as first child of bind node");if(e.children[1].type!=="match")throw new Error("expected match as first child of bind node");const[b,w]=e.children,d=s(w);return t[b.text]=d,d;case"variable":return t[e.text];case"infix":{const[g,y,l]=e.children,p=y.text,[E,A]=[s(g),s(l)];return runInfix(E,p,A,r)}case"apply":return runApply(e,t,r);case"left_section":{const[g,y,l]=e.children,p=s(y);return E=>runInfix(E,l.text,p,r)}case"right_section":{const[g,y,l]=e.children,p=s(l);return E=>runInfix(E,y.text,p,r)}case"parens":if(e.children.length!==3)throw new Error("expected 3 children for node type parens");return s(e.children[1]);default:if(e.children.length===0)throw new Error("unhandled leaf type "+e.type);if(e.children.length>1)throw new Error("unhandled branch type "+e.type);return s(e.children[0])}}function evaluate(e,t=globalThis,r){const s=parse(e);return run(s.rootNode,t,r)}function getInfixOperators(){let e={">":"set","#":"set","+":"add","-":"sub","*":"mul","/":"div"},t={in:s=>"|"+s,out:s=>s+"|",mix:s=>"|"+s+"|"},r={};return Object.entries(e).forEach(([s,_])=>{r[s]=(a,n)=>reify(a)[_](reify(n)),Object.entries(t).forEach(([a,n])=>{let o=n(s);r[o]=(u,c)=>reify(u)[_][a](reify(c))})}),r["~>"]=(s,_)=>reify(s).late(reify(_)),r["<~"]=(s,_)=>reify(s).early(reify(_)),r["<$>"]=(s,_)=>reify(_).fmap(s).outerJoin(),r}const ops=getInfixOperators();async function initTidal(){return window.d1=e=>e.p("d1"),window.d2=e=>e.p("d2"),window.d3=e=>e.p("d3"),window.d4=e=>e.p("d4"),window.d5=e=>e.p("d5"),window.d6=e=>e.p("d6"),window.d7=e=>e.p("d7"),window.d8=e=>e.p("d8"),window.d9=e=>e.p("d9"),loadParser()}function tidal(e,t=0){return Array.isArray(e)&&(e=e.join("")),evaluate(e,window,{...ops,string:r=>{const s=r.text.slice(1,-1),_=r.startIndex+t;return m(s,_)}})}export{initTidal,tidal};
