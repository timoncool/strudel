# API Reference — Справочник функций

Полный справочник всех функций Hydra с параметрами и значениями по умолчанию.

---

## Sources (Источники)

### osc(frequency, sync, offset)
Осциллятор — полосатый паттерн.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| frequency | float | 60 | Частота полос |
| sync | float | 0.1 | Скорость движения |
| offset | float | 0 | Цветовое смещение |

### noise(scale, offset)
Шум Перлина.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scale | float | 10 | Масштаб шума |
| offset | float | 0.1 | Скорость анимации |

### shape(sides, radius, smoothing)
Геометрическая фигура.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| sides | float | 3 | Количество сторон |
| radius | float | 0.3 | Размер (0-1) |
| smoothing | float | 0.01 | Размытие краёв |

### voronoi(scale, speed, blending)
Диаграмма Вороного.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scale | float | 5 | Количество ячеек |
| speed | float | 0.3 | Скорость движения |
| blending | float | 0.3 | Смешивание цветов |

### gradient(speed)
Цветовой градиент.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| speed | float | 0 | Скорость анимации |

### solid(r, g, b, a)
Сплошной цвет.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| r | float | 0 | Красный (0-1) |
| g | float | 0 | Зелёный (0-1) |
| b | float | 0 | Синий (0-1) |
| a | float | 1 | Альфа (0-1) |

### src(input)
Внешний источник.

| Параметр | Тип | Описание |
|----------|-----|----------|
| input | source | s0-s3 или o0-o3 |

---

## Geometry (Геометрия)

### rotate(angle, speed)
Вращение.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| angle | float | 10 | Угол (радианы) |
| speed | float | 0 | Скорость вращения |

### scale(amount, xMult, yMult, offsetX, offsetY)
Масштабирование.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 1.5 | Общий масштаб |
| xMult | float | 1 | Множитель X |
| yMult | float | 1 | Множитель Y |
| offsetX | float | 0.5 | Смещение X |
| offsetY | float | 0.5 | Смещение Y |

### pixelate(pixelX, pixelY)
Пикселизация.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| pixelX | float | 20 | Пиксели по X |
| pixelY | float | 20 | Пиксели по Y |

### kaleid(nSides)
Калейдоскоп.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| nSides | float | 4 | Количество сегментов |

### repeat(repeatX, repeatY, offsetX, offsetY)
Повторение.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| repeatX | float | 3 | Повторений по X |
| repeatY | float | 3 | Повторений по Y |
| offsetX | float | 0 | Смещение X |
| offsetY | float | 0 | Смещение Y |

### repeatX(reps, offset)
Повторение по X.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| reps | float | 3 | Количество повторений |
| offset | float | 0 | Смещение |

### repeatY(reps, offset)
Повторение по Y.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| reps | float | 3 | Количество повторений |
| offset | float | 0 | Смещение |

### scroll(scrollX, scrollY, speedX, speedY)
Прокрутка.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scrollX | float | 0.5 | Позиция X |
| scrollY | float | 0.5 | Позиция Y |
| speedX | float | 0 | Скорость X |
| speedY | float | 0 | Скорость Y |

### scrollX(scrollX, speed)
Прокрутка по X.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scrollX | float | 0.5 | Позиция |
| speed | float | 0 | Скорость |

### scrollY(scrollY, speed)
Прокрутка по Y.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scrollY | float | 0.5 | Позиция |
| speed | float | 0 | Скорость |

---

## Color (Цвет)

### color(r, g, b, a)
Цветовой множитель.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| r | float | 1 | Множитель красного |
| g | float | 1 | Множитель зелёного |
| b | float | 1 | Множитель синего |
| a | float | 1 | Множитель альфы |

### brightness(amount)
Яркость.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 0.4 | Величина (-1 до 1) |

### contrast(amount)
Контраст.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 1.6 | Уровень контраста |

### saturate(amount)
Насыщенность.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 2 | Уровень насыщенности |

### hue(amount)
Сдвиг оттенка.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 0.4 | Сдвиг (0-1) |

### invert(amount)
Инверсия.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 1 | Степень (0-1) |

### luma(threshold, tolerance)
Яркостная маска.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| threshold | float | 0.5 | Порог |
| tolerance | float | 0.1 | Допуск |

### thresh(threshold, tolerance)
Пороговая обработка.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| threshold | float | 0.5 | Порог |
| tolerance | float | 0.04 | Допуск |

### posterize(bins, gamma)
Постеризация.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| bins | float | 3 | Количество уровней |
| gamma | float | 0.6 | Гамма-коррекция |

### colorama(amount)
Цветовой сдвиг.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| amount | float | 0.005 | Интенсивность |

### r(scale, offset)
Масштабирование красного канала.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| scale | float | 1 | Масштаб |
| offset | float | 0 | Смещение |

### g(scale, offset)
Масштабирование зелёного канала.

### b(scale, offset)
Масштабирование синего канала.

### a(scale, offset)
Масштабирование альфа-канала.

---

## Blend (Смешивание)

### add(texture, amount)
Сложение.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Второй источник |
| amount | float | 1 | Интенсивность |

### mult(texture, amount)
Умножение.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Второй источник |
| amount | float | 1 | Интенсивность |

### diff(texture)
Разница.

| Параметр | Тип | Описание |
|----------|-----|----------|
| texture | source | Второй источник |

### blend(texture, amount)
Смешивание.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Второй источник |
| amount | float | 0.5 | Пропорция |

### layer(texture)
Наложение.

| Параметр | Тип | Описание |
|----------|-----|----------|
| texture | source | Второй источник |

### mask(texture)
Маскирование.

| Параметр | Тип | Описание |
|----------|-----|----------|
| texture | source | Источник-маска |

---

## Modulate (Модуляция)

### modulate(texture, amount)
Базовая модуляция.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Модулятор |
| amount | float | 0.1 | Интенсивность |

### modulateScale(texture, multiple, offset)
Модуляция масштаба.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Модулятор |
| multiple | float | 1 | Множитель |
| offset | float | 1 | Смещение |

### modulateRotate(texture, multiple, offset)
Модуляция вращения.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Модулятор |
| multiple | float | 1 | Множитель |
| offset | float | 0 | Смещение |

### modulateHue(texture, amount)
Модуляция по оттенку.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Модулятор |
| amount | float | 1 | Интенсивность |

### modulateKaleid(texture, nSides)
Модуляция калейдоскопа.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| texture | source | - | Модулятор |
| nSides | float | 4 | Сегменты |

### modulateRepeat(texture, repeatX, repeatY, offsetX, offsetY)
Модуляция повторения.

### modulateScrollX(texture, scrollX, speed)
Модуляция прокрутки X.

### modulateScrollY(texture, scrollY, speed)
Модуляция прокрутки Y.

### modulatePixelate(texture, multiple, offset)
Модуляция пикселизации.

---

## Output (Вывод)

### out(output)
Вывод в буфер.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| output | buffer | o0 | Целевой буфер (o0-o3) |

### render(output)
Рендеринг буфера.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| output | buffer | - | Буфер для показа или все |

---

## External Sources (Внешние источники)

### s0.initCam(index)
Инициализация камеры.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| index | int | 0 | Номер камеры |

### s0.initImage(url)
Загрузка изображения.

| Параметр | Тип | Описание |
|----------|-----|----------|
| url | string | URL изображения |

### s0.initVideo(url)
Загрузка видео.

| Параметр | Тип | Описание |
|----------|-----|----------|
| url | string | URL видео |

### s0.initScreen()
Захват экрана.

### s0.init({src, dynamic})
Загрузка произвольного элемента.

| Параметр | Тип | Описание |
|----------|-----|----------|
| src | element | HTML элемент |
| dynamic | bool | Обновлять постоянно |

### s0.initStream(name)
Подключение к потоку.

| Параметр | Тип | Описание |
|----------|-----|----------|
| name | string | Имя сессии |

---

## Audio (Аудио)

### a.show()
Показать FFT визуализацию.

### a.hide()
Скрыть FFT визуализацию.

### a.setBins(n)
Установить количество частотных диапазонов.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| n | int | 4 | Количество bins |

### a.setSmooth(n)
Установить сглаживание.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| n | float | 0.4 | Сглаживание (0-1) |

### a.setScale(n)
Установить чувствительность.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| n | float | 10 | Максимум громкости |

### a.setCutoff(n)
Установить порог шума.

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| n | float | 0 | Минимальный уровень |

### a.fft[n]
Доступ к значению частотного диапазона (0-1).

---

## Sequencing (Секвенсирование)

### [].fast(speed)
Ускорить массив.

| Параметр | Тип | Описание |
|----------|-----|----------|
| speed | float | Множитель скорости |

### [].slow(speed)
Замедлить массив.

| Параметр | Тип | Описание |
|----------|-----|----------|
| speed | float | Делитель скорости |

### [].smooth()
Плавные переходы между значениями.

---

## Global Variables (Глобальные переменные)

| Переменная | Описание |
|------------|----------|
| `time` | Время в секундах |
| `mouse.x` | Позиция мыши X (0-1) |
| `mouse.y` | Позиция мыши Y (0-1) |
| `bpm` | Темп (по умолчанию 30) |
| `width` | Ширина canvas |
| `height` | Высота canvas |

---

## Strudel Integration

### initHydra(options)
Инициализация Hydra в Strudel.

| Опция | Тип | По умолчанию | Описание |
|-------|-----|--------------|----------|
| detectAudio | bool | false | Включить аудио анализ |
| feedStrudel | int | 0 | Использовать визуализацию Strudel как источник |

### H(pattern)
Использовать Strudel паттерн как значение Hydra.

| Параметр | Тип | Описание |
|----------|-----|----------|
| pattern | string/Pattern | Strudel паттерн |
