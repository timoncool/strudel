typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const g=BigInt(0),b=BigInt(1),gt=BigInt(2),Rt=BigInt(5),j=BigInt(10),Kf=2e3,w={s:b,n:g,d:b};function X(t,e){try{t=BigInt(t)}catch{throw nt()}return t*e}function U(t){return typeof t=="bigint"?t:Math.floor(t)}function C(t,e){if(e===g)throw Kt();const n=Object.create(B.prototype);n.s=t<g?-b:b,t=t<g?-t:t;const s=it(t,e);return n.n=t/s,n.d=e/s,n}function ut(t){const e={};let n=t,s=gt,r=Rt-b;for(;r<=n;){for(;n%s===g;)n/=s,e[s]=(e[s]||g)+b;r+=b+gt*s++}return n!==t?n>1&&(e[n]=(e[n]||g)+b):e[t]=(e[t]||g)+b,e}const M=function(t,e){let n=g,s=b,r=b;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw nt();if(t%1!==0)throw Te();n=BigInt(t)}if(typeof e=="bigint")s=e;else{if(isNaN(e))throw nt();if(e%1!==0)throw Te();s=BigInt(e)}r=n*s}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),s=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(s=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw nt();r=n*s}else if(typeof t=="number"){if(isNaN(t))throw nt();if(t<0&&(r=-b,t=-t),t%1===0)n=BigInt(t);else if(t>0){let o=1,c=0,u=1,a=1,l=1,p=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);u<=p&&l<=p;){let h=(c+a)/(u+l);if(t===h){u+l<=p?(n=c+a,s=u+l):l>u?(n=a,s=l):(n=c,s=u);break}else t>h?(c+=a,u+=l):(a+=c,l+=u),u>p?(n=a,s=l):(n=c,s=u)}n=BigInt(n)*BigInt(o),s=BigInt(s)}}else if(typeof t=="string"){let o=0,c=g,u=g,a=g,l=b,p=b,h=t.replace(/_/g,"").match(/\d+|./g);if(h===null)throw nt();if(h[o]==="-"?(r=-b,o++):h[o]==="+"&&o++,h.length===o+1?u=X(h[o++],r):h[o+1]==="."||h[o]==="."?(h[o]!=="."&&(c=X(h[o++],r)),o++,(o+1===h.length||h[o+1]==="("&&h[o+3]===")"||h[o+1]==="'"&&h[o+3]==="'")&&(u=X(h[o],r),l=j**BigInt(h[o].length),o++),(h[o]==="("&&h[o+2]===")"||h[o]==="'"&&h[o+2]==="'")&&(a=X(h[o+1],r),p=j**BigInt(h[o+1].length)-b,o+=3)):h[o+1]==="/"||h[o+1]===":"?(u=X(h[o],r),l=X(h[o+2],b),o+=3):h[o+3]==="/"&&h[o+1]===" "&&(c=X(h[o],r),u=X(h[o+2],r),l=X(h[o+4],b),o+=5),h.length<=o)s=l*p,r=n=a+s*c+p*u;else throw nt()}else if(typeof t=="bigint")n=t,r=t,s=b;else throw nt();if(s===g)throw Kt();w.s=r<g?-b:b,w.n=n<g?-n:n,w.d=s<g?-s:s};function Zf(t,e,n){let s=b;for(;e>g;t=t*t%n,e>>=b)e&b&&(s=s*t%n);return s}function Xf(t,e){for(;e%gt===g;e/=gt);for(;e%Rt===g;e/=Rt);if(e===b)return g;let n=j%e,s=1;for(;n!==b;s++)if(n=n*j%e,s>Kf)return g;return BigInt(s)}function Yf(t,e,n){let s=b,r=Zf(j,n,e);for(let o=0;o<300;o++){if(s===r)return BigInt(o);s=s*j%e,r=r*j%e}return 0}function it(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function B(t,e){if(M(t,e),this instanceof B)t=it(w.d,w.n),this.s=w.s,this.n=w.n/t,this.d=w.d/t;else return C(w.s*w.n,w.d)}var Kt=function(){return new Error("Division by Zero")},nt=function(){return new Error("Invalid argument")},Te=function(){return new Error("Parameters must be integer")};B.prototype={s:b,n:g,d:b,abs:function(){return C(this.n,this.d)},neg:function(){return C(-this.s*this.n,this.d)},add:function(t,e){return M(t,e),C(this.s*this.n*w.d+w.s*this.d*w.n,this.d*w.d)},sub:function(t,e){return M(t,e),C(this.s*this.n*w.d-w.s*this.d*w.n,this.d*w.d)},mul:function(t,e){return M(t,e),C(this.s*w.s*this.n*w.n,this.d*w.d)},div:function(t,e){return M(t,e),C(this.s*w.s*this.n*w.d,this.d*w.n)},clone:function(){return C(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return C(this.s*this.n%this.d,b);if(M(t,e),g===w.n*this.d)throw Kt();return C(this.s*(w.d*this.n)%(w.n*this.d),w.d*this.d)},gcd:function(t,e){return M(t,e),C(it(w.n,this.n)*it(w.d,this.d),w.d*this.d)},lcm:function(t,e){return M(t,e),w.n===g&&this.n===g?C(g,b):C(w.n*this.n,it(w.n,this.n)*it(w.d,this.d))},inverse:function(){return C(this.s*this.d,this.n)},pow:function(t,e){if(M(t,e),w.d===b)return w.s<g?C((this.s*this.d)**w.n,this.n**w.n):C((this.s*this.n)**w.n,this.d**w.n);if(this.s<g)return null;let n=ut(this.n),s=ut(this.d),r=b,o=b;for(let c in n)if(c!=="1"){if(c==="0"){r=g;break}if(n[c]*=w.n,n[c]%w.d===g)n[c]/=w.d;else return null;r*=BigInt(c)**n[c]}for(let c in s)if(c!=="1"){if(s[c]*=w.n,s[c]%w.d===g)s[c]/=w.d;else return null;o*=BigInt(c)**s[c]}return w.s<g?C(o,r):C(r,o)},log:function(t,e){if(M(t,e),this.s<=g||w.s<=g)return null;const n={},s=ut(w.n),r=ut(w.d),o=ut(this.n),c=ut(this.d);for(const l in r)s[l]=(s[l]||g)-r[l];for(const l in c)o[l]=(o[l]||g)-c[l];for(const l in s)l!=="1"&&(n[l]=!0);for(const l in o)l!=="1"&&(n[l]=!0);let u=null,a=null;for(const l in n){const p=s[l]||g,h=o[l]||g;if(p===g){if(h!==g)return null;continue}let k=h,_=p;const A=it(k,_);if(k/=A,_/=A,u===null&&a===null)u=k,a=_;else if(k*a!==u*_)return null}return u!==null&&a!==null?C(u,a):null},equals:function(t,e){return M(t,e),this.s*this.n*w.d===w.s*w.n*this.d},lt:function(t,e){return M(t,e),this.s*this.n*w.d<w.s*w.n*this.d},lte:function(t,e){return M(t,e),this.s*this.n*w.d<=w.s*w.n*this.d},gt:function(t,e){return M(t,e),this.s*this.n*w.d>w.s*w.n*this.d},gte:function(t,e){return M(t,e),this.s*this.n*w.d>=w.s*w.n*this.d},compare:function(t,e){M(t,e);let n=this.s*this.n*w.d-w.s*w.n*this.d;return(g<n)-(n<g)},ceil:function(t){return t=j**BigInt(t||0),C(U(this.s*t*this.n/this.d)+(t*this.n%this.d>g&&this.s>=g?b:g),t)},floor:function(t){return t=j**BigInt(t||0),C(U(this.s*t*this.n/this.d)-(t*this.n%this.d>g&&this.s<g?b:g),t)},round:function(t){return t=j**BigInt(t||0),C(U(this.s*t*this.n/this.d)+this.s*((this.s>=g?b:g)+gt*(t*this.n%this.d)>this.d?b:g),t)},roundTo:function(t,e){M(t,e);const n=this.n*w.d,s=this.d*w.n,r=n%s;let o=U(n/s);return r+r>=s&&o++,C(this.s*o*w.n,w.d)},divisible:function(t,e){return M(t,e),!(!(w.n*this.d)||this.n*w.d%(w.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let s=Xf(e,n),r=Yf(e,n,s),o=this.s<g?"-":"";if(o+=U(e/n),e%=n,e*=j,e&&(o+="."),s){for(let c=r;c--;)o+=U(e/n),e%=n,e*=j;o+="(";for(let c=s;c--;)o+=U(e/n),e%=n,e*=j;o+=")"}else for(let c=t;e&&c--;)o+=U(e/n),e%=n,e*=j;return o},toFraction:function(t){let e=this.n,n=this.d,s=this.s<g?"-":"";if(n===b)s+=e;else{let r=U(e/n);t&&r>g&&(s+=r,s+=" ",e%=n),s+=e,s+="/",s+=n}return s},toLatex:function(t){let e=this.n,n=this.d,s=this.s<g?"-":"";if(n===b)s+=e;else{let r=U(e/n);t&&r>g&&(s+=r,e%=n),s+="\\frac{",s+=e,s+="}{",s+=n,s+="}"}return s},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(U(t/e));let s=t%e;t=e,e=s}while(t!==b);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),s=n.toContinued();for(let r=1;r<s.length;r++){let o=C(s[r-1],b);for(let u=r-2;u>=0;u--)o=o.inverse().add(s[u]);let c=o.sub(n);if(c.n*e<c.d)return o.mul(this.s)}return this}};const Zt="strudel.log";let tp=1e3,Ce,xe;function Ot(t,e="cyclist"){J(`[${e}] error: ${t.message}`)}function J(t,e,n={}){let s=performance.now();Ce===t&&s-xe<tp||(Ce=t,xe=s,console.log(`%c${t}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(Zt,{detail:{message:t,type:e,data:n}})))}J.key=Zt;const ep=t=>/^[a-gA-G][#bsf]*[0-9]*$/.test(t),zt=t=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(t),Ee=t=>{if(typeof t!="string")return[];const[e,n="",s]=t.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return e?[e,n,s?Number(s):void 0]:[]},np={c:0,d:2,e:4,f:5,g:7,a:9,b:11},sp={"#":1,b:-1,s:1,f:-1},Ne=t=>t?.split("").reduce((e,n)=>e+sp[n],0)||0,kt=(t,e=3)=>{const[n,s,r=e]=Ee(t);if(!n)throw new Error('not a note: "'+t+'"');const o=np[n.toLowerCase()],c=Ne(s);return(Number(r)+1)*12+o+c},lt=t=>Math.pow(2,(t-69)/12)*440,Me=t=>12*Math.log(t/440)/Math.LN2+69,rp=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=t;if(typeof n=="number")return Me(n);if(typeof s=="string")return kt(s);if(typeof s=="number")return s;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},op=(t,e)=>(t-e)*1e3,Pe=t=>lt(typeof t=="number"?t:kt(t)),ip=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],cp=t=>{const e=Math.floor(t/12)-1;return ip[t%12]+e},qt=(t,e)=>(t%e+e)%e,Ie=t=>t.reduce((e,n)=>e+n)/t.length;function je(t,e=0){return isNaN(Number(t))?(J(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const up=(t,e)=>qt(Math.round(je(t??0,0)),e),ap=t=>{let{value:e,context:n}=t,s=e;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof s=="number"&&n.type!=="frequency")s=lt(t.value);else if(typeof s=="number"&&n.type==="frequency")s=t.value;else if(typeof s!="string"||!zt(s))throw new Error("not a note: "+JSON.stringify(s));return s},lp=t=>{let{value:e,context:n}=t;if(typeof e=="object")return e.freq?e.freq:Pe(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=lt(t.value);else if(typeof e=="string"&&zt(e))e=lt(kt(t.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},Je=(t,e)=>t.slice(e).concat(t.slice(0,e)),$e=(...t)=>t.reduce((e,n)=>(...s)=>e(n(...s)),e=>e),fp=(...t)=>$e(...t.reverse()),pt=t=>t.filter(e=>e!=null),Y=t=>[].concat(...t),at=t=>t,pp=(t,e)=>t,At=(t,e)=>Array.from({length:e-t+1},(n,s)=>s+t);function v(t,e,n=t.length){const s=function r(...o){if(o.length>=n)return t.apply(this,o);{const c=function(...u){return r.apply(this,o.concat(u))};return e&&e(c,o),c}};return e&&e(s,[]),s}function Xt(t){const e=Number(t);if(!isNaN(e))return e;if(zt(t))return kt(t);throw new Error(`cannot parse as numeral: "${t}"`)}function Yt(t,e){return(...n)=>t(...n.map(e))}function V(t){return Yt(t,Xt)}function Le(t){const e=Number(t);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[t];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${t}"`)}const hp=t=>Yt(t,Le),te=function(t,e){return[e.slice(0,t),e.slice(t)]},Et=(t,e,n)=>e.map((s,r)=>t(s,n[r])),We=function(t){const e=[];for(let n=0;n<t.length-1;++n)e.push([t[n],t[n+1]]);return e},Re=(t,e,n)=>Math.min(Math.max(t,e),n),dp=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],mp=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],yp=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],wp=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],gp=["I","Ro","Ha","Ni","Ho","He","To"],bp=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],_p=(t,e="letters")=>{const s=(e==="solfeggio"?dp:e==="indian"?mp:e==="german"?yp:e==="byzantine"?wp:e==="japanese"?gp:bp)[t%12],r=Math.floor(t/12)-1;return s+r};function vp(t){var e={};return t.filter(function(n){return e.hasOwn(n)?!1:e[n]=!0})}function kp(t){return t.sort().filter(function(e,n,s){return!n||e!=s[n-1]})}function Fe(t){return t.sort((e,n)=>e.compare(n)).filter(function(e,n,s){return!n||e.ne(s[n-1])})}function Ve(t){const e=new TextEncoder().encode(t);return btoa(String.fromCharCode(...e))}function De(t){const e=new Uint8Array(atob(t).split("").map(s=>s.charCodeAt(0)));return new TextDecoder().decode(e)}function qp(t){return encodeURIComponent(Ve(t))}function Ap(t){return De(decodeURIComponent(t))}function He(t,e){return Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([n,s],r)=>[n,e(s,n,r)]))}function Ft(t,e){return t/e}class Qe{constructor({getTargetClockTime:e=Bp,weight:n=16,offsetDelta:s=.005,checkAfterTime:r=2,resetAfterTime:o=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=e,this.weight=n,this.offsetDelta=s,this.checkAfterTime=r,this.resetAfterTime=o,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(e){const n=this.getTargetClockTime(),s=n-this.timeAtPrevOffsetSample,r=n-e;if(s>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=r),this.prevOffsetTimes.push(r),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||s>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const o=Ie(this.prevOffsetTimes);Math.abs(o-this.offsetTime)>this.offsetDelta&&(this.offsetTime=o)}return this.offsetTime}calculateTimestamp(e,n){return this.calculateOffset(e)+n}}function Sp(){return performance.now()*.001}function Bp(){return Date.now()*.001}const Ge=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let wt;function Ue(){if(wt==null){if(typeof window>"u")return;wt={},window.addEventListener("keydown",t=>{wt[t.key]=!0}),window.addEventListener("keyup",t=>{wt[t.key]=!1})}return{...wt}}function ee(t,e=!1){return typeof t=="object"?e?JSON.stringify(t).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(t):t}B.prototype.sam=function(){return this.floor()};B.prototype.nextSam=function(){return this.sam().add(1)};B.prototype.wholeCycle=function(){return new z(this.sam(),this.nextSam())};B.prototype.cyclePos=function(){return this.sub(this.sam())};B.prototype.lt=function(t){return this.compare(t)<0};B.prototype.gt=function(t){return this.compare(t)>0};B.prototype.lte=function(t){return this.compare(t)<=0};B.prototype.gte=function(t){return this.compare(t)>=0};B.prototype.eq=function(t){return this.compare(t)==0};B.prototype.ne=function(t){return this.compare(t)!=0};B.prototype.max=function(t){return this.gt(t)?this:t};B.prototype.maximum=function(...t){return t=t.map(e=>new B(e)),t.reduce((e,n)=>n.max(e),this)};B.prototype.min=function(t){return this.lt(t)?this:t};B.prototype.mulmaybe=function(t){return t!==void 0?this.mul(t):void 0};B.prototype.divmaybe=function(t){return t!==void 0?this.div(t):void 0};B.prototype.addmaybe=function(t){return t!==void 0?this.add(t):void 0};B.prototype.submaybe=function(t){return t!==void 0?this.sub(t):void 0};B.prototype.show=function(){return this.s*this.n+"/"+this.d};B.prototype.or=function(t){return this.eq(0)?t:this};const y=t=>B(t),Tp=(...t)=>{if(t=pt(t),t.length!==0)return t.reduce((e,n)=>e.gcd(n),y(1))},ct=(...t)=>{if(t=pt(t),t.length===0)return;const e=t.pop();return t.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),e)},Cp=t=>t instanceof B;y._original=B;class z{constructor(e,n){this.begin=y(e),this.end=y(n)}get spanCycles(){const e=[];var n=this.begin;const s=this.end,r=s.sam();if(n.equals(s))return[new z(n,s)];for(;s.gt(n);){if(n.sam().equals(r)){e.push(new z(n,this.end));break}const o=n.nextSam();e.push(new z(n,o)),n=o}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new z(e,n)}withTime(e){return new z(e(this.begin),e(this.end))}withEnd(e){return new z(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),s=n.add(e(this.begin.sub(n))),r=n.add(e(this.end.sub(n)));return new z(s,r)}intersection(e){const n=this.begin.max(e.begin),s=this.end.min(e.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new z(n,s)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(y(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class E{constructor(e,n,s,r={},o=!1){this.whole=e,this.part=n,this.value=s,this.context=r,this.stateful=o,o&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let e;return typeof this.value?.duration=="number"?e=y(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,n){return n-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,n){return n<this.whole.begin&&n>this.whole.begin-e}isWithinTime(e,n){return this.whole.begin<=n&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new E(n,e(this.part),this.value,this.context)}withValue(e){return new E(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){return this.context.tags?.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,r]=n(e);return[s,new E(this.whole,this.part,r,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var r=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),r||(s+="("),s+=this.part.show(),r||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${ee(this.value,e)}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new E(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class ft{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new ft(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new ft(this.span,{...this.controls,...e})}}function xp(t,e,n){if(e?.value!==void 0&&Object.keys(e).length===1)return J("[warn]: Can't do arithmetic on control pattern."),t;const s=Object.keys(t).filter(r=>Object.keys(e).includes(r));return Object.assign({},t,e,Object.fromEntries(s.map(r=>[r,n(t[r],e[r])])))}v((t,e)=>t*e);v((t,e)=>e.map(t));function Ke(t,e=60){let n=0,s=y(0),r=[""],o="";for(;r[0].length<e;){const c=t.queryArc(n,n+1),u=c.filter(p=>p.hasOnset()).map(p=>p.duration),a=Tp(...u),l=a.inverse();r=r.map(p=>p+"|"),o+="|";for(let p=0;p<l;p++){const[h,k]=[s,s.add(a)],_=c.filter(x=>x.whole.begin.lte(h)&&x.whole.end.gte(k)),A=_.length-r.length;A>0&&(r=r.concat(Array(A).fill(o))),r=r.map((x,W)=>{const R=_[W];if(R){const O=R.whole.begin.eq(h)?""+R.value:"-";return x+O}return x+"."}),o+=".",s=s.add(a)}n++}return r.join(`
`)}let Vt,H=!0;const Op=function(t){H=!!t},zp=t=>Vt=t;class d{constructor(e,n=void 0){this.query=e,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(e){this.__steps=e===void 0?void 0:y(e)}setSteps(e){return this._steps=e,this}withSteps(e){return H?new d(this.query,this._steps===void 0?void 0:e(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(e){const n=new d(s=>this.query(s).map(r=>r.withValue(e)));return n._steps=this._steps,n}withState(e){return new d(n=>this.query(e(n)))}fmap(e){return this.withValue(e)}appWhole(e,n){const s=this,r=function(o){const c=s.query(o),u=n.query(o),a=function(l,p){const h=l.part.intersection(p.part);if(h!=null)return new E(e(l.whole,p.whole),h,l.value(p.value),p.combineContext(l))};return Y(c.map(l=>pt(u.map(p=>a(l,p)))))};return new d(r)}appBoth(e){const n=this,s=function(o,c){if(!(o==null||c==null))return o.intersection_e(c)},r=n.appWhole(s,e);return H&&(r._steps=ct(e._steps,n._steps)),r}appLeft(e){const n=this,s=function(o){const c=[];for(const u of n.query(o)){const a=e.query(o.setSpan(u.wholeOrPart()));for(const l of a){const p=u.whole,h=u.part.intersection(l.part);if(h){const k=u.value(l.value),_=l.combineContext(u),A=new E(p,h,k,_);c.push(A)}}}return c},r=new d(s);return r._steps=this._steps,r}appRight(e){const n=this,s=function(o){const c=[];for(const u of e.query(o)){const a=n.query(o.setSpan(u.wholeOrPart()));for(const l of a){const p=u.whole,h=l.part.intersection(u.part);if(h){const k=l.value(u.value),_=u.combineContext(l),A=new E(p,h,k,_);c.push(A)}}}return c},r=new d(s);return r._steps=e._steps,r}bindWhole(e,n){const s=this,r=function(o){const c=function(a,l){return new E(e(a.whole,l.whole),l.part,l.value,Object.assign({},a.context,l.context,{locations:(a.context.locations||[]).concat(l.context.locations||[])}))},u=function(a){return n(a.value).query(o.setSpan(a.part)).map(l=>c(a,l))};return Y(s.query(o).map(a=>u(a)))};return new d(r)}bind(e){const n=function(s,r){if(!(s==null||r==null))return s.intersection_e(r)};return this.bindWhole(n,e)}join(){return this.bind(at)}outerBind(e){return this.bindWhole(n=>n,e).setSteps(this._steps)}outerJoin(){return this.outerBind(at)}innerBind(e){return this.bindWhole((n,s)=>s,e)}innerJoin(){return this.innerBind(at)}resetJoin(e=!1){const n=this;return new d(s=>n.discreteOnly().query(s).map(r=>r.value.late(e?r.whole.begin:r.whole.begin.cyclePos()).query(s).map(o=>new E(o.whole?o.whole.intersection(r.whole):void 0,o.part.intersection(r.part),o.value).setContext(r.combineContext(o))).filter(o=>o.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function n(s){const r=e.discreteOnly().query(s);function o(u){const l=u.value._focusSpan(u.wholeOrPart()).query(s.setSpan(u.part));function p(h,k){let _;if(k.whole&&h.whole&&(_=k.whole.intersection(h.whole),!_))return;const A=k.part.intersection(h.part);if(!A)return;const x=k.combineContext(h);return new E(_,A,k.value,x)}return l.map(h=>p(u,h))}return Y(r.map(o)).filter(u=>u)}return new d(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}polyJoin=function(){const e=this;return e.fmap(n=>n.extend(e._steps.div(n._steps))).outerJoin()};polyBind(e){return this.fmap(e).polyJoin()}queryArc(e,n,s={}){try{return this.query(new ft(new z(e,n),s))}catch(r){return Ot(r,"query"),[]}}splitQueries(){const e=this,n=s=>Y(s.span.spanCycles.map(r=>e.query(s.setSpan(r))));return new d(n)}withQuerySpan(e){return new d(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new d(s=>{const r=s.withSpan(e);return r.span?n.query(r):[]})}withQueryTime(e){return new d(n=>this.query(n.withSpan(s=>s.withTime(e))))}withHapSpan(e){return new d(n=>this.query(n).map(s=>s.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){const n=new d(s=>e(this.query(s),s));return n._steps=this._steps,n}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){const n=this.withHap(s=>s.setContext(e(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const s={start:e,end:n},r=this.withContext(o=>{const c=(o.locations||[]).concat([s]);return{...o,locations:c}});return this.__pure&&(r.__pure=this.__pure,r.__pure_loc=s),r}filterHaps(e){return new d(n=>this.query(n).filter(e))}filterValues(e){return new d(n=>this.query(n).filter(s=>e(s.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(n=>{const s=[];for(var r=0;r<n.length;++r){for(var o=!0,c=n[r];o;){const l=JSON.stringify(n[r].value);for(var u=!1,a=r+1;a<n.length;a++){const p=n[a];if(c.whole.equals(p.whole)){if(c.part.begin.eq(p.part.end)){if(l===JSON.stringify(p.value)){c=new E(c.whole,new z(p.part.begin,c.part.end),c.value),n.splice(a,1),u=!0;break}}else if(p.part.begin.eq(c.part.end)&&l==JSON.stringify(p.value)){c=new E(c.whole,new z(c.part.begin,p.part.end),c.value),n.splice(a,1),u=!0;break}}}o=u}s.push(c)}return s})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new ft(new z(y(0),y(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(Xt)}_opIn(e,n){return this.fmap(n).appLeft(m(e))}_opOut(e,n){return this.fmap(n).appRight(m(e))}_opMix(e,n){return this.fmap(n).appBoth(m(e))}_opSqueeze(e,n){const s=m(e);return this.fmap(r=>s.fmap(o=>n(r)(o))).squeezeJoin()}_opSqueezeOut(e,n){const s=this;return m(e).fmap(o=>s.fmap(c=>n(c)(o))).squeezeJoin()}_opReset(e,n){return m(e).fmap(r=>this.fmap(o=>n(o)(r))).resetJoin()}_opRestart(e,n){return m(e).fmap(r=>this.fmap(o=>n(o)(r))).restartJoin()}_opPoly(e,n){const s=m(e);return this.fmap(r=>s.fmap(o=>n(o)(r))).polyJoin()}layer(...e){return N(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return N(this,...e)}sequence(...e){return tt(this,...e)}seq(...e){return tt(this,...e)}cat(...e){return bt(this,...e)}fastcat(...e){return L(this,...e)}slowcat(...e){return st(this,...e)}onTrigger(e,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...r)=>{s.context.onTrigger?.(...r),e(...r)},dominantTrigger:s.context.dominantTrigger||n}))}log(e=s=>`[hap] ${s.showWhole(!0)}`,n=s=>({hap:s})){return this.onTrigger((...s)=>{J(e(...s),void 0,n(...s))},!1)}logValues(e=n=>`[hap] ${ee(n,!0)}`){return this.log(n=>e(n.value))}drawLine(){return console.log(Ke(this)),this}unjoin(e,n=at){return e.withHap(s=>s.withValue(r=>r?n(this.ribbon(s.whole.begin,s.whole.duration)):this))}into(e,n){return this.unjoin(e,n).innerJoin()}}function Ep(t,e){let n=[];return e.forEach(s=>{const r=n.findIndex(([o])=>t(s,o));r===-1?n.push([s]):n[r].push(s)}),n}const Np=(t,e)=>t.spanEquals(e);d.prototype.collect=function(){return this.withHaps(t=>Ep(Np,t).map(e=>new E(e[0].whole,e[0].part,e,{})))};const Mp=f("arpWith",(t,e)=>e.collect().fmap(n=>m(t(n))).innerJoin().withHap(n=>new E(n.whole,n.part,n.value.value,n.combineContext(n.value)))),Pp=f("arp",(t,e)=>e.arpWith(n=>m(t).fmap(s=>n[s%n.length])),!1);function Ct(t){return!Array.isArray(t)&&typeof t=="object"&&!Cp(t)}function Ip(t,e,n){return Ct(t)||Ct(e)?(Ct(t)||(t={value:t}),Ct(e)||(e={value:e}),xp(t,e,n)):n(t,e)}(function(){const t={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[V((n,s)=>n+s)],sub:[V((n,s)=>n-s)],mul:[V((n,s)=>n*s)],div:[V((n,s)=>n/s)],mod:[V(qt)],pow:[V(Math.pow)],log2:[V(Math.log2)],band:[V((n,s)=>n&s)],bor:[V((n,s)=>n|s)],bxor:[V((n,s)=>n^s)],blshift:[V((n,s)=>n<<s)],brshift:[V((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[s,r]]of Object.entries(t)){d.prototype["_"+n]=function(o){return this.fmap(c=>s(c,o))},Object.defineProperty(d.prototype,n,{get:function(){const o=this,c=(...u)=>o[n].in(...u);for(const u of e)c[u.toLowerCase()]=function(...a){var l=o;a=tt(a),r&&(l=r(l),a=r(a));var p;return n==="keepif"?(p=l["_op"+u](a,h=>k=>s(h,k)),p=p.removeUndefineds()):p=l["_op"+u](a,h=>k=>Ip(h,k,s)),p};return c.squeezein=c.squeeze,c}});for(const o of e)d.prototype[o.toLowerCase()]=function(...c){return this.set[o.toLowerCase()](c)}}d.prototype.struct=function(...n){return this.keepif.out(...n)},d.prototype.structAll=function(...n){return this.keep.out(...n)},d.prototype.mask=function(...n){return this.keepif.in(...n)},d.prototype.maskAll=function(...n){return this.keep.in(...n)},d.prototype.reset=function(...n){return this.keepif.reset(...n)},d.prototype.resetAll=function(...n){return this.keep.reset(...n)},d.prototype.restart=function(...n){return this.keepif.restart(...n)},d.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const jp=N,Jp=N,$p=Nt,ht=t=>new d(()=>[],t),S=ht(1),D=ht(0);function I(t){function e(s){return s.span.spanCycles.map(r=>new E(y(r.begin).wholeCycle(),r,t))}const n=new d(e,1);return n.__pure=t,n}function ne(t){return t instanceof d||t?._Pattern}function m(t){return ne(t)?t:Vt&&typeof t=="string"?Vt(t):I(t)}function Ze(t){let e=I([]);for(const n of t)e=e.bind(s=>n.fmap(r=>s.concat([r])));return e}function N(...t){t=t.map(s=>Array.isArray(s)?tt(...s):m(s));const e=s=>Y(t.map(r=>r.query(s))),n=new d(e);return H&&(n._steps=ct(...t.map(s=>s._steps))),n}function se(t,e){if(e=e.map(o=>Array.isArray(o)?tt(...o):m(o)),e.length===0)return S;if(e.length===1)return e[0];const[n,...s]=e.map(o=>o._steps),r=H?n.maximum(...s):void 0;return N(...t(r,e))}function Xe(...t){return se((e,n)=>n.map(s=>s._steps.eq(e)?s:$(s,ht(e.sub(s._steps)))),t)}function Ye(...t){return se((e,n)=>n.map(s=>s._steps.eq(e)?s:$(ht(e.sub(s._steps)),s)),t)}function tn(...t){return se((e,n)=>n.map(s=>{if(s._steps.eq(e))return s;const r=ht(e.sub(s._steps).div(2));return $(r,s,r)}),t)}function Lp(t,...e){const[n,...s]=e.map(c=>c._steps),r=n.maximum(...s),o={centre:tn,left:Xe,right:Ye,expand:N,repeat:(...c)=>Nt(...c).steps(r)};return t.inhabit(o).fmap(c=>c(...e)).innerJoin().setSteps(r)}function st(...t){if(t=t.map(s=>Array.isArray(s)?L(...s):m(s)),t.length==1)return t[0];const e=function(s){const r=s.span,o=qt(r.begin.sam(),t.length),c=t[o];if(!c)return[];const u=r.begin.floor().sub(r.begin.div(t.length).floor());return c.withHapTime(a=>a.add(u)).query(s.setSpan(r.withTime(a=>a.sub(u))))},n=H?ct(...t.map(s=>s._steps)):void 0;return new d(e).splitQueries().setSteps(n)}function re(...t){t=t.map(m);const e=function(n){const s=Math.floor(n.span.begin)%t.length;return t[s]?.query(n)||[]};return new d(e).splitQueries()}function bt(...t){return st(...t)}function Wp(...t){const e=t.reduce((n,[s])=>n+s,0);return t=t.map(([n,s])=>[n,s.fast(n)]),$(...t).slow(e)}function Rp(...t){let e=y(0);for(let n of t)n.length==2&&n.unshift(e),e=n[1];return N(...t.map(([n,s,r])=>I(m(r)).compress(y(n).div(e),y(s).div(e)))).slow(e).innerJoin()}function L(...t){let e=st(...t);return t.length>1&&(e=e._fast(t.length),e._steps=t.length),t.length==1&&t[0].__steps_source&&(t._steps=t[0]._steps),e}function tt(...t){return L(...t)}function en(...t){return L(...t)}function Dt(t){return Array.isArray(t)?t.length==0?[S,0]:t.length==1?Dt(t[0]):[L(...t.map(e=>Dt(e)[0])),t.length]:[m(t),1]}const Fp=v((t,e)=>m(e).mask(t)),Vp=v((t,e)=>m(e).struct(t)),Dp=v((t,e)=>m(e).superimpose(...t)),Hp=v((t,e)=>m(e).withValue(t)),Qp=v((t,e)=>m(e).bind(t)),Gp=v((t,e)=>m(e).innerBind(t)),Up=v((t,e)=>m(e).outerBind(t)),Kp=v((t,e)=>m(e).squeezeBind(t)),Zp=v((t,e)=>m(e).stepBind(t)),Xp=v((t,e)=>m(e).polyBind(t)),Yp=v((t,e)=>m(e).set(t)),th=v((t,e)=>m(e).keep(t)),eh=v((t,e)=>m(e).keepif(t)),nh=v((t,e)=>m(e).add(t)),sh=v((t,e)=>m(e).sub(t)),rh=v((t,e)=>m(e).mul(t)),oh=v((t,e)=>m(e).div(t)),ih=v((t,e)=>m(e).mod(t)),ch=v((t,e)=>m(e).pow(t)),uh=v((t,e)=>m(e).band(t)),ah=v((t,e)=>m(e).bor(t)),lh=v((t,e)=>m(e).bxor(t)),fh=v((t,e)=>m(e).blshift(t)),ph=v((t,e)=>m(e).brshift(t)),hh=v((t,e)=>m(e).lt(t)),dh=v((t,e)=>m(e).gt(t)),mh=v((t,e)=>m(e).lte(t)),yh=v((t,e)=>m(e).gte(t)),wh=v((t,e)=>m(e).eq(t)),gh=v((t,e)=>m(e).eqt(t)),bh=v((t,e)=>m(e).ne(t)),_h=v((t,e)=>m(e).net(t)),vh=v((t,e)=>m(e).and(t)),kh=v((t,e)=>m(e).or(t)),qh=v((t,e)=>m(e).func(t));function f(t,e,n=!0,s=!1,r=o=>o.innerJoin()){if(Array.isArray(t)){const u={};for(const a of t)u[a]=f(a,e,n,s,r);return u}const o=e.length;var c;return n?c=function(...u){u=u.map(m);const a=u[u.length-1];let l;if(o===1)l=e(a);else{const p=u.slice(0,-1);if(p.every(h=>h.__pure!=null)){const h=p.map(_=>_.__pure),k=p.filter(_=>_.__pure_loc).map(_=>_.__pure_loc);l=e(...h,a),l=l.withContext(_=>{const A=(_.locations||[]).concat(k);return{..._,locations:A}})}else{const[h,...k]=p;let _=(...A)=>e(...A,a);_=v(_,null,o-1),l=r(k.reduce((A,x)=>A.appLeft(x),h.fmap(_)))}}return s&&(l._steps=a._steps),l}:c=function(...u){u=u.map(m);const a=e(...u);return s&&(a._steps=u[u.length-1]._steps),a},d.prototype[t]=function(...u){if(o===2&&u.length!==1)u=[tt(...u)];else if(o!==u.length+1)throw new Error(`.${t}() expects ${o-1} inputs but got ${u.length}.`);return u=u.map(m),c(...u,this)},o>1&&(d.prototype["_"+t]=function(...u){const a=e(...u,this);return s&&a.setSteps(this._steps),a}),v(c,null,o)}function dt(t,e,n=!0,s=!1,r=o=>o.stepJoin()){return f(t,e,n,s,r)}const Ah=f("round",function(t){return t.asNumber().fmap(e=>Math.round(e))}),Sh=f("floor",function(t){return t.asNumber().fmap(e=>Math.floor(e))}),Bh=f("ceil",function(t){return t.asNumber().fmap(e=>Math.ceil(e))}),Th=f("toBipolar",function(t){return t.fmap(e=>e*2-1)}),Ch=f("fromBipolar",function(t){return t.fmap(e=>(e+1)/2)}),xh=f("range",function(t,e,n){return n.mul(e-t).add(t)}),Oh=f("rangex",function(t,e,n){return n._range(Math.log(t),Math.log(e)).fmap(Math.exp)}),zh=f("range2",function(t,e,n){return n.fromBipolar()._range(t,e)}),Eh=f("ratio",t=>t.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,s)=>n/s,e[0]):e)),Nh=f("compress",function(t,e,n){return t=y(t),e=y(e),t.gt(e)||t.gt(1)||e.gt(1)||t.lt(0)||e.lt(0)?S:n._fastGap(y(1).div(e.sub(t)))._late(t)}),{compressSpan:Mh,compressspan:Ph}=f(["compressSpan","compressspan"],function(t,e){return e._compress(t.begin,t.end)}),{fastGap:Ih,fastgap:jh}=f(["fastGap","fastgap"],function(t,e){const n=function(r){const o=r.begin.sam(),c=r.begin.sub(o).mul(t).min(1),u=r.end.sub(o).mul(t).min(1);if(!(c>=1))return new z(o.add(c),o.add(u))},s=function(r){const o=r.part.begin,c=r.part.end,u=o.sam(),a=o.sub(u).div(t).min(1),l=c.sub(u).div(t).min(1),p=new z(u.add(a),u.add(l)),h=r.whole?new z(p.begin.sub(o.sub(r.whole.begin).div(t)),p.end.add(r.whole.end.sub(c).div(t))):void 0;return new E(h,p,r.value,r.context)};return e.withQuerySpanMaybe(n).withHap(s).splitQueries()}),Jh=f("focus",function(t,e,n){return t=y(t),e=y(e),n._early(t.sam())._fast(y(1).div(e.sub(t)))._late(t)}),{focusSpan:$h,focusspan:Lh}=f(["focusSpan","focusspan"],function(t,e){return e._focus(t.begin,t.end)}),Wh=f("ply",function(t,e){const n=e.fmap(s=>I(s)._fast(t)).squeezeJoin();return H&&(n._steps=y(t).mulmaybe(e._steps)),n}),{fast:Rh,density:cw}=f(["fast","density"],function(t,e){return t===0?S:(t=y(t),e.withQueryTime(s=>s.mul(t)).withHapTime(s=>s.div(t)).setSteps(e._steps))},!0,!0),Fh=f("hurry",function(t,e){return e._fast(t).mul(I({speed:t}))}),{slow:Vh,sparsity:Dh}=f(["slow","sparsity"],function(t,e){return t===0?S:e._fast(y(1).div(t))}),Hh=f("inside",function(t,e,n){return e(n._slow(t))._fast(t)}),Qh=f("outside",function(t,e,n){return e(n._fast(t))._slow(t)}),Gh=f("lastOf",function(t,e,n){const s=Array(t-1).fill(n);return s.push(e(n)),re(...s)}),{firstOf:Uh,every:Kh}=f(["firstOf","every"],function(t,e,n){const s=Array(t-1).fill(n);return s.unshift(e(n)),re(...s)}),Zh=f("apply",function(t,e){return t(e)}),Xh=f("cpm",function(t,e){return e._fast(t/60/1)}),Yh=f("early",function(t,e){return t=y(t),e.withQueryTime(n=>n.add(t)).withHapTime(n=>n.sub(t))},!0,!0),nn=f("late",function(t,e){return t=y(t),e._early(y(0).sub(t))},!0,!0),td=f("zoom",function(t,e,n){if(e=y(e),t=y(t),t.gte(e))return D;const s=e.sub(t),r=H?n._steps?.mulmaybe(s):void 0;return n.withQuerySpan(o=>o.withCycle(c=>c.mul(s).add(t))).withHapSpan(o=>o.withCycle(c=>c.sub(t).div(s))).splitQueries().setSteps(r)}),{zoomArc:ed,zoomarc:nd}=f(["zoomArc","zoomarc"],function(t,e){return e.zoom(t.begin,t.end)}),sd=f("bite",(t,e,n)=>e.fmap(s=>r=>{const o=y(s).div(r).mod(1),c=o.add(y(1).div(r));return n.zoom(o,c)}).appLeft(t).squeezeJoin(),!1),rd=f("linger",function(t,e){return t==0?S:t<0?e._zoom(t.add(1),1)._slow(t):e._zoom(0,t)._slow(t)},!0,!0),{segment:od,seg:id}=f(["segment","seg"],function(t,e){return e.struct(I(!0)._fast(t)).setSteps(t)}),cd=f("swingBy",(t,e,n)=>n.inside(e,nn(en(0,t/2)))),ud=f("swing",(t,e)=>e.swingBy(1/3,t)),{invert:ad,inv:ld}=f(["invert","inv"],function(t){return t.fmap(e=>!e)},!0,!0),fd=f("when",function(t,e,n){return t?e(n):n}),pd=f("off",function(t,e,n){return N(n,e(n.late(t)))}),hd=f("brak",function(t){return t.when(st(!1,!0),e=>L(e,S)._late(.25))}),sn=f("rev",function(t){const e=function(n){const s=n.span,r=s.begin.sam(),o=s.begin.nextSam(),c=function(a){const l=a.withTime(h=>r.add(o.sub(h))),p=l.begin;return l.begin=l.end,l.end=p,l};return t.query(n.setSpan(c(s))).map(a=>a.withSpan(c))};return new d(e).splitQueries()},!1,!0),dd=f("revv",function(t){const e=n=>new z(y(0).sub(n.end),y(0).sub(n.begin));return t.withQuerySpan(e).withHapSpan(e)}),md=f("pressBy",function(t,e){return e.fmap(n=>I(n).compress(t,1)).squeezeJoin()}),yd=f("press",function(t){return t._pressBy(.5)});d.prototype.hush=function(){return S};const wd=f("palindrome",function(t){return t.lastOf(2,sn)},!0,!0),{juxBy:gd,juxby:bd}=f(["juxBy","juxby"],function(t,e,n){t/=2;const s=function(c,u,a){return u in c?c[u]:a},r=n.withValue(c=>Object.assign({},c,{pan:s(c,"pan",.5)-t})),o=e(n.withValue(c=>Object.assign({},c,{pan:s(c,"pan",.5)+t})));return N(r,o).setSteps(H?ct(r._steps,o._steps):void 0)}),_d=f("jux",function(t,e){return e._juxBy(1,t,e)}),{echoWith:vd,echowith:kd,stutWith:qd,stutwith:Ad}=f(["echoWith","echowith","stutWith","stutwith"],function(t,e,n,s){return N(...At(0,t-1).map(r=>n(s.late(y(e).mul(r)),r)))}),Sd=f("echo",function(t,e,n,s){return s._echoWith(t,e,(r,o)=>r.gain(Math.pow(n,o)))}),Bd=f("stut",function(t,e,n,s){return s._echoWith(t,n,(r,o)=>r.gain(Math.pow(e,o)))}),rn=f("applyN",function(t,e,n){let s=n;for(let r=0;r<t;r++)s=e(s);return s}),Td=f(["plyWith","plywith"],function(t,e,n){const s=n.fmap(r=>bt(...At(0,t-1).map(o=>rn(o,e,r)))._fast(t)).squeezeJoin();return H&&(s._steps=y(t).mulmaybe(n._steps)),s}),Cd=f(["plyForEach","plyforeach"],function(t,e,n){const s=n.fmap(r=>bt(bt(I(r),...At(1,t-1).map(o=>e(I(r),o))))._fast(t)).squeezeJoin();return H&&(s._steps=y(t).mulmaybe(n._steps)),s}),oe=function(t,e,n=!1){return t=y(t),st(...At(0,t.sub(1)).map(s=>n?e.late(y(s).div(t)):e.early(y(s).div(t))))},xd=f("iter",function(t,e){return oe(t,e,!1)},!0,!0),{iterBack:Od,iterback:zd}=f(["iterBack","iterback"],function(t,e){return oe(t,e,!0)},!0,!0),{repeatCycles:Ed}=f("repeatCycles",function(t,e){return new d(function(n){const s=n.span.begin.sam(),r=s.div(t).sam(),o=s.sub(r);return n=n.withSpan(c=>c.withTime(u=>u.sub(o))),e.query(n).map(c=>c.withSpan(u=>u.withTime(a=>a.add(o))))}).splitQueries()},!0,!0),ie=function(t,e,n,s=!1,r=!1){const o=Array(t-1).fill(!1);o.unshift(!0);const c=oe(t,tt(...o),!s);return r||(n=n.repeatCycles(t)),n.when(c,e)},{chunk:Nd,slowchunk:Md,slowChunk:Pd}=f(["chunk","slowchunk","slowChunk"],function(t,e,n){return ie(t,e,n,!1,!1)},!0,!0),{chunkBack:Id,chunkback:jd}=f(["chunkBack","chunkback"],function(t,e,n){return ie(t,e,n,!0)},!0,!0),{fastchunk:Jd,fastChunk:$d}=f(["fastchunk","fastChunk"],function(t,e,n){return ie(t,e,n,!1,!0)},!0,!0),{chunkinto:Ld,chunkInto:Wd}=f(["chunkinto","chunkInto"],function(t,e,n){return n.into(L(!0,...Array(t-1).fill(!1))._iterback(t),e)}),{chunkbackinto:Rd,chunkBackInto:Fd}=f(["chunkbackinto","chunkBackInto"],function(t,e,n){return n.into(L(!0,...Array(t-1).fill(!1))._iter(t)._early(1),e)}),Vd=f("bypass",function(t,e){return t=!!parseInt(t),t?S:e},!0,!0),{ribbon:Dd,rib:Hd}=f(["ribbon","rib"],(t,e,n)=>n.early(t).restart(I(1).slow(e))),Qd=f("hsla",(t,e,n,s,r)=>r.color(`hsla(${t}turn,${e*100}%,${n*100}%,${s})`)),Gd=f("hsl",(t,e,n,s)=>s.color(`hsl(${t}turn,${e*100}%,${n*100}%)`));d.prototype.tag=function(t){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([t])}))};const Ud=f("filter",(t,e)=>e.withHaps(n=>n.filter(t))),Kd=f("filterWhen",(t,e)=>e.filter(n=>t(n.whole.begin))),Zd=f("within",(t,e,n,s)=>N(n(s.filterWhen(r=>r.cyclePos()>=t&&r.cyclePos()<=e)),s.filterWhen(r=>r.cyclePos()<t||r.cyclePos()>e)));d.prototype.stepJoin=function(){const t=this,e=$(...Ht(Qt(t.queryArc(0,1))))._steps,n=function(s){const o=t.early(s.span.begin.sam()).query(s.setSpan(new z(y(0),y(1))));return $(...Ht(Qt(o))).query(s)};return new d(n,e)};d.prototype.stepBind=function(t){return this.fmap(t).stepJoin()};function Ht(t){const e=t.filter((o,c)=>c.hasSteps).reduce((o,c)=>o.add(c),y(0)),n=pt(t.map((o,c)=>c._steps)).reduce((o,c)=>o.add(c),y(0)),s=e.eq(0)?void 0:n.div(e);function r(o,c){return c._steps===void 0?[o.mulmaybe(s),c]:[c._steps,c]}return t.map(o=>r(...o))}function Qt(t){const e=Y(t.map(r=>[r.part.begin,r.part.end])),n=Fe([y(0),y(1),...e]);return We(n).map(r=>[r[1].sub(r[0]),N(...on(new z(...r),t).map(o=>o.value.withHap(c=>c.setContext(c.combineContext(o)))))])}function on(t,e){return pt(e.map(n=>cn(t,n)))}function cn(t,e){const n=t.intersection(e.part);if(n!=null)return new E(e.whole,n,e.value,e.context)}const un=f("pace",function(t,e){return e._steps===void 0?e:e._steps.eq(y(0))?D:e._fast(y(t).div(e._steps)).setSteps(t)});function an(t,...e){const n=e.map(r=>Dt(r));if(n.length==0)return S;t==0&&(t=n[0][1]);const s=[];for(const r of n)r[1]!=0&&(t==r[1]?s.push(r[0]):s.push(r[0]._fast(y(t).div(y(r[1])))));return N(...s)}function Nt(...t){if(Array.isArray(t[0]))return an(0,...t);if(t=t.filter(s=>s.hasSteps),t.length==0)return S;const e=ct(...t.map(s=>s._steps));if(e.eq(y(0)))return D;const n=N(...t.map(s=>s.pace(e)));return n._steps=e,n}function $(...t){if(t.length===0)return D;const e=c=>Array.isArray(c)?c:[c._steps??1,c];if(t=t.map(e),t.find(c=>c[0]===void 0)){const c=t.map(a=>a[0]).filter(a=>a!==void 0);if(c.length===0)return L(...t.map(a=>a[1]));if(c.length===t.length)return D;const u=c.reduce((a,l)=>a.add(l),y(0)).div(c.length);for(let a of t)a[0]===void 0&&(a[0]=u)}if(t.length==1)return m(t[0][1]).withSteps(u=>t[0][0]);const n=t.map(c=>c[0]).reduce((c,u)=>c.add(u),y(0));let s=y(0);const r=[];for(const[c,u]of t){if(y(c).eq(0))continue;const a=s.add(c);r.push(m(u)._compress(s.div(n),a.div(n))),s=a}const o=N(...r);return o._steps=n,o}function ln(...t){t=t.map(r=>Array.isArray(r)?r.map(m):[m(r)]);const e=ct(...t.map(r=>y(r.length)));let n=[];for(let r=0;r<e;++r)n.push(...t.map(o=>o.length==0?S:o[r%o.length]));n=n.filter(r=>r.hasSteps&&r._steps>0);const s=n.reduce((r,o)=>r.add(o._steps),y(0));return n=$(...n),n._steps=s,n}const fn=dt("take",function(t,e){if(!e.hasSteps||e._steps.lte(0)||(t=y(t),t.eq(0)))return D;const n=t<0;n&&(t=t.abs());const s=t.div(e._steps);return s.lte(0)?D:s.gte(1)?e:n?e.zoom(y(1).sub(s),1):e.zoom(0,s)}),pn=dt("drop",function(t,e){return e.hasSteps?(t=y(t),t.lt(0)?e.take(e._steps.add(t)):e.take(y(0).sub(e._steps.sub(t)))):D}),hn=dt("extend",function(t,e){return e.fast(t).expand(t)}),Xd=dt("replicate",function(t,e){return e.repeatCycles(t).fast(t).expand(t)}),dn=dt("expand",function(t,e){return e.withSteps(n=>n.mul(y(t)))}),mn=dt("contract",function(t,e){return e.withSteps(n=>n.div(y(t)))});d.prototype.shrinklist=function(t){const e=this;if(!e.hasSteps)return[e];let[n,s]=Array.isArray(t)?t:[t,e._steps];if(n=y(n),s===0||n===0)return[e];const r=n>0,o=[];if(r){const c=y(1).div(e._steps).mul(n);for(let u=0;u<s;++u){const a=c.mul(u);if(a.gt(1))break;o.push([a,1])}}else{n=y(0).sub(n);const c=y(1).div(e._steps).mul(n);for(let u=0;u<s;++u){const a=y(1).sub(c.mul(u));if(a.lt(0))break;o.push([y(0),a])}}return o.map(c=>e.zoom(...c))};const yn=(t,e)=>e.shrinklist(t),wn=f("shrink",function(t,e){if(!e.hasSteps)return D;const n=e.shrinklist(t),s=$(...n);return s._steps=n.reduce((r,o)=>r.add(o._steps),y(0)),s},!0,!1,t=>t.stepJoin()),Yd=f("grow",function(t,e){if(!e.hasSteps)return D;const n=e.shrinklist(y(0).sub(t));n.reverse();const s=$(...n);return s._steps=n.reduce((r,o)=>r.add(o._steps),y(0)),s},!0,!1,t=>t.stepJoin()),gn=function(t,...e){return t.tour(...e)};d.prototype.tour=function(...t){return $(...[].concat(...t.map((e,n)=>[...t.slice(0,t.length-n),this,...t.slice(t.length-n)]),this,...t))};const bn=function(...t){t=t.filter(s=>s.hasSteps);const e=st(...t.map(s=>s._slow(s._steps))),n=ct(...t.map(s=>s._steps));return e._fast(n).setSteps(n)},tm=$,_n=$,em=$,nm=ln,sm=Nt;d.prototype.s_polymeter=d.prototype.polymeter;const rm=wn;d.prototype.s_taper=d.prototype.shrink;const om=yn;d.prototype.s_taperlist=d.prototype.shrinklist;const im=fn;d.prototype.s_add=d.prototype.take;const cm=pn;d.prototype.s_sub=d.prototype.drop;const um=dn;d.prototype.s_expand=d.prototype.expand;const am=hn;d.prototype.s_extend=d.prototype.extend;const lm=mn;d.prototype.s_contract=d.prototype.contract;const fm=gn;d.prototype.s_tour=d.prototype.tour;const pm=bn;d.prototype.s_zip=d.prototype.zip;const hm=un;d.prototype.steps=d.prototype.pace;const dm=f("chop",function(t,e){const s=Array.from({length:t},(c,u)=>u).map(c=>({begin:c/t,end:(c+1)/t})),r=function(c,u){if("begin"in c&&"end"in c&&c.begin!==void 0&&c.end!==void 0){const a=c.end-c.begin;u={begin:c.begin+u.begin*a,end:c.begin+u.end*a}}return Object.assign({},c,u)},o=function(c){return tt(s.map(u=>r(c,u)))};return e.squeezeBind(o).setSteps(H?y(t).mulmaybe(e._steps):void 0)}),mm=f("striate",function(t,e){const s=Array.from({length:t},(o,c)=>c).map(o=>({begin:o/t,end:(o+1)/t})),r=st(...s);return e.set(r)._fast(t).setSteps(H?y(t).mulmaybe(e._steps):void 0)}),vn=function(t,e,n=.5){return e.speed(1/t*n).unit("c").slow(t)},kn=f("slice",function(t,e,n){return t.innerBind(s=>e.outerBind(r=>n.outerBind(o=>{o=o instanceof Object?o:{s:o};const c=Array.isArray(s)?s[r]:r/s,u=Array.isArray(s)?s[r+1]:(r+1)/s;return I({begin:c,end:u,_slices:s,...o})}))).setSteps(e._steps)},!1);d.prototype.onTriggerTime=function(t){return this.onTrigger((e,n,s,r)=>{const o=r-n;window.setTimeout(()=>{t(e)},o*1e3)},!1)};const ym=f("splice",function(t,e,n){const s=kn(t,e,n);return new d(r=>{const o=r.controls._cps||1;return s.query(r).map(u=>u.withValue(a=>({speed:o/a._slices/u.whole.duration*(a.speed||1),unit:"c",...a})))}).setSteps(e._steps)},!1),{loopAt:wm,loopat:gm}=f(["loopAt","loopat"],function(t,e){const n=e._steps?e._steps.div(t):void 0;return new d(s=>vn(t,e,s.controls._cps).query(s),n)}),bm=f("fit",t=>t.withHaps((e,n)=>e.map(s=>s.withValue(r=>{const o=("end"in r?r.end:1)-("begin"in r?r.begin:0);return{...r,speed:(n.controls._cps||1)/s.whole.duration*o,unit:"c"}})))),{loopAtCps:_m,loopatcps:vm}=f(["loopAtCps","loopatcps"],function(t,e,n){return vn(t,n,e)}),km=t=>I(1).withValue(()=>m(t())).innerJoin();let Oe=t=>t<.5?1:1-(t-.5)/.5,qn=(t,e,n)=>{e=m(e),t=m(t),n=m(n);let s=e.fmap(o=>({gain:Oe(o)})),r=e.fmap(o=>({gain:Oe(1-o)}));return N(t.mul(s),n.mul(r))};d.prototype.xfade=function(t,e){return qn(this,t,e)};const qm=t=>(e,n,s)=>{e=y(e).mod(n),n=y(n);const r=e.div(n),o=e.add(1).div(n);return t(s.fmap(c=>I(c)._compress(r,o)))},{beat:Am}=f(["beat"],qm(t=>t.innerJoin())),ce=(t,e,n)=>{n=y(n);const s=y(1).div(t.length),r=u=>{const a=[];for(const[l,p]of u.entries())p&&a.push([y(l).div(u.length),p]);return a},o=Et(([u,a],[l,p])=>{const h=n.mul(l-u).add(u),k=h.add(s);return new z(h,k)},r(t),r(e));function c(u){const a=u.span.begin.sam(),l=u.span.cycleArc(),p=[];for(const h of o){const k=h.intersection(l);k!==void 0&&p.push(new E(h.withTime(_=>_.add(a)),k.withTime(_=>_.add(a)),!0))}return p}return new d(c).splitQueries()},Sm=(t,e,n)=>(t=m(t),e=m(e),n=m(n),t.innerBind(s=>e.innerBind(r=>n.innerBind(o=>ce(s,r,o))))),Bm=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const t of Bm)d.prototype[t]=function(e){const n=m(e).fmap(s=>Array.isArray(s)?[...s,t]:[s,1,t]);return this.distort(n)};const An=t=>{let n=I(v((...s)=>s,null,t.length));for(const s of t)n=n.appBoth(m(s));return n},Mt=t=>Array.isArray(t)?An(t):m(t);d.prototype.partials=function(t){return this.withValue(e=>n=>({...e,partials:n})).appLeft(Mt(t))};const Tm=t=>Mt(t).as("partials");d.prototype.phases=function(t){return this.withValue(e=>n=>({...e,phases:n})).appLeft(Mt(t))};const Cm=t=>Mt(t).as("phases");function Pt(t){let e=Array.isArray(t);t=e?t:[t];const n=t[0],s=o=>{let c;if(typeof o=="object"&&o.value!==void 0&&(c={...o},o=o.value,delete c.value),e&&Array.isArray(o)){const u=c||{};return o.forEach((a,l)=>{l<t.length&&(u[t[l]]=a)}),u}else return c?(c[n]=o,c):{[n]:o}},r=function(o,c){return c?typeof o>"u"?c.fmap(s):c.set(m(o).withValue(s)):m(o).withValue(s)};return d.prototype[n]=function(o){return r(o,this)},r}const _t=new Map;function Sn(t){return _t.has(t)}function i(t,...e){const n=Array.isArray(t)?t[0]:t;let s={};return s[n]=Pt(t),_t.set(n,n),e.forEach(r=>{s[r]=s[n],_t.set(r,n),d.prototype[r]=d.prototype[n]}),s}function K(t,e,...n){t=Array.isArray(t)?t:[t];let s={};for(let r=1;r<=e;r++){let o=[...n],c=[...t];if(r===1){const a=o.map(p=>`${p}1`),l=c.map(p=>`${p}1`);o=o.concat(a).concat(l)}else o=o.map(a=>`${a}${r}`),c=c.map(a=>`${a}${r}`);const u=i(c,...o);s={...s,...u}}return s}const{s:Bn,sound:Tn}=i(["s","n","gain"],"sound"),{wt:Cn,wavetablePosition:xn}=i("wt","wavetablePosition"),{wtenv:On}=i("wtenv"),{wtattack:zn,wtatt:En}=i("wtattack","wtatt"),{wtdecay:Nn,wtdec:Mn}=i("wtdecay","wtdec"),{wtsustain:Pn,wtsus:In}=i("wtsustain","wtsus"),{wtrelease:jn,wtrel:Jn}=i("wtrelease","wtrel"),{wtrate:$n}=i("wtrate"),{wtsync:Ln}=i("wtsync"),{wtdepth:Wn}=i("wtdepth"),{wtshape:Rn}=i("wtshape"),{wtdc:Fn}=i("wtdc"),{wtskew:Vn}=i("wtskew"),{warp:Dn,wavetableWarp:Hn}=i("warp","wavetableWarp"),{warpattack:Qn,warpatt:Gn}=i("warpattack","warpatt"),{warpdecay:Un,warpdec:Kn}=i("warpdecay","warpdec"),{warpsustain:Zn,warpsus:Xn}=i("warpsustain","warpsus"),{warprelease:Yn,warprel:ts}=i("warprelease","warprel"),{warprate:es}=i("warprate"),{warpdepth:ns}=i("warpdepth"),{warpshape:ss}=i("warpshape"),{warpdc:rs}=i("warpdc"),{warpskew:os}=i("warpskew"),{warpmode:is,wavetableWarpMode:cs}=i("warpmode","wavetableWarpMode"),{wtphaserand:us,wavetablePhaseRand:as}=i("wtphaserand","wavetablePhaseRand"),{warpenv:ls}=i("warpenv"),{warpsync:fs}=i("warpsync"),{source:ps,src:hs}=i("source","src"),{n:ds}=i("n"),{note:ms}=i(["note","n"]),{accelerate:ys}=i("accelerate"),{velocity:ws}=i("velocity"),{gain:gs}=i("gain"),{postgain:bs}=i("postgain"),{amp:_s}=i("amp"),{attack:vs,att:ks}=i("attack","att"),{fmh:qs,fmh1:As,fmh2:Ss,fmh3:Bs,fmh4:Ts,fmh5:Cs,fmh6:xs,fmh7:Os,fmh8:zs}=K(["fmh","fmi"],8,"fmh"),{fmi:Es,fmi1:Ns,fmi2:Ms,fmi3:Ps,fmi4:Is,fmi5:js,fmi6:Js,fmi7:$s,fmi8:Ls,fm:Ws,fm1:Rs,fm2:Fs,fm3:Vs,fm4:Ds,fm5:Hs,fm6:Qs,fm7:Gs,fm8:Us}=K(["fmi","fmh"],8,"fm"),{fmenv:Ks,fmenv1:Zs,fmenv2:Xs,fmenv3:Ys,fmenv4:tr,fmenv5:er,fmenv6:nr,fmenv7:sr,fmenv8:rr}=K("fmenv",8),{fmattack:or,fmattack1:ir,fmattack2:cr,fmattack3:ur,fmattack4:ar,fmattack5:lr,fmattack6:fr,fmattack7:pr,fmattack8:hr,fmatt:dr,fmatt1:mr,fmatt2:yr,fmatt3:wr,fmatt4:gr,fmatt5:br,fmatt6:_r,fmatt7:vr,fmatt8:kr}=K("fmattack",8,"fmatt"),{fmwave:qr,fmwave1:Ar,fmwave2:Sr,fmwave3:Br,fmwave4:Tr,fmwave5:Cr,fmwave6:xr,fmwave7:Or,fmwave8:zr}=K("fmwave",8),{fmdecay:Er,fmdecay1:Nr,fmdecay2:Mr,fmdecay3:Pr,fmdecay4:Ir,fmdecay5:jr,fmdecay6:Jr,fmdecay7:$r,fmdecay8:Lr,fmdec:Wr,fmdec1:Rr,fmdec2:Fr,fmdec3:Vr,fmdec4:Dr,fmdec5:Hr,fmdec6:Qr,fmdec7:Gr,fmdec8:Ur}=K("fmdecay",8,"fmdec"),{fmsustain:Kr,fmsustain1:Zr,fmsustain2:Xr,fmsustain3:Yr,fmsustain4:to,fmsustain5:eo,fmsustain6:no,fmsustain7:so,fmsustain8:ro,fmsus:oo,fmsus1:io,fmsus2:co,fmsus3:uo,fmsus4:ao,fmsus5:lo,fmsus6:fo,fmsus7:po,fmsus8:ho}=K("fmsustain",8,"fmsus"),{fmrelease:mo,fmrelease1:yo,fmrelease2:wo,fmrelease3:go,fmrelease4:bo,fmrelease5:_o,fmrelease6:vo,fmrelease7:ko,fmrelease8:qo,fmrel:Ao,fmrel1:So,fmrel2:Bo,fmrel3:To,fmrel4:Co,fmrel5:xo,fmrel6:Oo,fmrel7:zo,fmrel8:Eo}=K("fmrelease",8,"fmrel");for(let t=0;t<=8;t++)for(let e=0;e<=8;e++)i(`fmi${t}${e}`,`fm${t}${e}`);const{bank:No}=i("bank"),{chorus:Mo}=i("chorus"),{analyze:Po}=i("analyze"),{fft:Io}=i("fft"),{decay:jo,dec:Jo}=i("decay","dec"),{sustain:$o,sus:Lo}=i("sustain","sus"),{release:Wo,rel:Ro}=i("release","rel"),{hold:Fo}=i("hold"),{bandf:Vo,bpf:Do,bp:Ho}=i(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Qo,bpq:Go}=i("bandq","bpq"),{begin:Uo}=i("begin"),{end:Ko}=i("end"),{loop:Zo}=i("loop"),{loopBegin:Xo,loopb:Yo}=i("loopBegin","loopb"),{loopEnd:ti,loope:ei}=i("loopEnd","loope"),{crush:ni}=i("crush"),{coarse:si}=i("coarse"),{tremolo:ri}=i(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:oi}=i(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:ii}=i("tremolodepth","tremdepth"),{tremoloskew:ci}=i("tremoloskew","tremskew"),{tremolophase:ui}=i("tremolophase","tremphase"),{tremoloshape:ai}=i("tremoloshape","tremshape"),{drive:li}=i("drive"),{duck:fi}=i("duckorbit","duck"),{duckdepth:pi}=i("duckdepth"),{duckonset:hi}=i("duckonset","duckons"),{duckattack:di}=i("duckattack","duckatt"),{byteBeatExpression:mi,bbexpr:yi}=i("byteBeatExpression","bbexpr"),{byteBeatStartTime:wi,bbst:gi}=i("byteBeatStartTime","bbst"),{channels:bi,ch:_i}=i("channels","ch"),{pw:vi}=i(["pw","pwrate","pwsweep"]),{pwrate:ki}=i("pwrate"),{pwsweep:qi}=i("pwsweep"),{phaserrate:Ai,ph:Si,phaser:Bi}=i(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:Ti,phs:Ci}=i("phasersweep","phs"),{phasercenter:xi,phc:Oi}=i("phasercenter","phc"),{phaserdepth:zi,phd:Ei,phasdp:Ni}=i("phaserdepth","phd","phasdp"),{channel:Mi}=i("channel"),{cut:Pi}=i("cut"),{cutoff:Ii,ctf:ji,lpf:Ji,lp:$i}=i(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Li,lpe:Wi}=i("lpenv","lpe"),{hpenv:Ri,hpe:Fi}=i("hpenv","hpe"),{bpenv:Vi,bpe:Di}=i("bpenv","bpe"),{lpattack:Hi,lpa:Qi}=i("lpattack","lpa"),{hpattack:Gi,hpa:Ui}=i("hpattack","hpa"),{bpattack:Ki,bpa:Zi}=i("bpattack","bpa"),{lpdecay:Xi,lpd:Yi}=i("lpdecay","lpd"),{hpdecay:tc,hpd:ec}=i("hpdecay","hpd"),{bpdecay:nc,bpd:sc}=i("bpdecay","bpd"),{lpsustain:rc,lps:oc}=i("lpsustain","lps"),{hpsustain:ic,hps:cc}=i("hpsustain","hps"),{bpsustain:uc,bps:ac}=i("bpsustain","bps"),{lprelease:lc,lpr:fc}=i("lprelease","lpr"),{hprelease:pc,hpr:hc}=i("hprelease","hpr"),{bprelease:dc,bpr:mc}=i("bprelease","bpr"),{ftype:yc}=i("ftype"),{fanchor:wc}=i("fanchor"),{lprate:gc}=i("lprate"),{lpsync:bc}=i("lpsync"),{lpdepth:_c}=i("lpdepth"),{lpdepthfrequency:vc}=i("lpdepthfrequency","lpdepthfreq"),{lpshape:kc}=i("lpshape"),{lpdc:qc}=i("lpdc"),{lpskew:Ac}=i("lpskew"),{bprate:Sc}=i("bprate"),{bpsync:Bc}=i("bpsync"),{bpdepth:Tc}=i("bpdepth"),{bpdepthfrequency:Cc}=i("bpdepthfrequency","bpdepthfreq"),{bpshape:xc}=i("bpshape"),{bpdc:Oc}=i("bpdc"),{bpskew:zc}=i("bpskew"),{hprate:Ec}=i("hprate"),{hpsync:Nc}=i("hpsync"),{hpdepth:Mc,hpdepthfreq:Pc}=i("hpdepth"),{hpdepthfrequency:Ic}=i("hpdepthfrequency","hpdepthfreq"),{hpshape:jc}=i("hpshape"),{hpdc:Jc}=i("hpdc"),{hpskew:$c}=i("hpskew"),{vib:Lc,vibrato:Wc,v:Rc}=i(["vib","vibmod"],"vibrato","v"),{noise:Fc}=i("noise"),{vibmod:Vc,vmod:Dc}=i(["vibmod","vib"],"vmod"),{hcutoff:Hc,hpf:Qc,hp:Gc}=i(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:Uc,hpq:Kc}=i("hresonance","hpq"),{resonance:Zc,lpq:Xc}=i("resonance","lpq"),{djf:Yc}=i("djf"),{delay:tu}=i(["delay","delaytime","delayfeedback"]),{delayfeedback:eu,delayfb:nu,dfb:su}=i("delayfeedback","delayfb","dfb"),{delayspeed:ru}=i("delayspeed"),{delaytime:ou,delayt:iu,dt:cu}=i("delaytime","delayt","dt"),{delaysync:uu}=i("delaysync"),{lock:au}=i("lock"),{detune:lu,det:fu}=i("detune","det"),{unison:pu}=i("unison"),{spread:hu}=i("spread"),{dry:du}=i("dry"),{fadeTime:mu,fadeOutTime:yu}=i("fadeTime","fadeOutTime"),{fadeInTime:wu}=i("fadeInTime"),{freq:gu}=i("freq"),{pattack:bu,patt:_u}=i("pattack","patt"),{pdecay:vu,pdec:ku}=i("pdecay","pdec"),{psustain:qu,psus:Au}=i("psustain","psus"),{prelease:Su,prel:Bu}=i("prelease","prel"),{penv:Tu}=i("penv"),{pcurve:Cu}=i("pcurve"),{panchor:xu}=i("panchor"),{gate:Ou,gat:zu}=i("gate","gat"),{leslie:Eu}=i("leslie"),{lrate:Nu}=i("lrate"),{lsize:Mu}=i("lsize"),{activeLabel:Pu}=i("activeLabel"),{label:Iu}=i(["label","activeLabel"]),{degree:ju}=i("degree"),{mtranspose:Ju}=i("mtranspose"),{ctranspose:$u}=i("ctranspose"),{harmonic:Lu}=i("harmonic"),{stepsPerOctave:Wu}=i("stepsPerOctave"),{octaveR:Ru}=i("octaveR"),{nudge:Fu}=i("nudge"),{octave:Vu,oct:Du}=i("octave","oct"),{orbit:Hu}=i("orbit","o"),{overgain:Qu}=i("overgain"),{overshape:Gu}=i("overshape"),{pan:Uu}=i("pan"),{panspan:Ku}=i("panspan"),{pansplay:Zu}=i("pansplay"),{panwidth:Xu}=i("panwidth"),{panorient:Yu}=i("panorient"),{rate:ta}=i("rate"),{slide:ea}=i("slide"),{semitone:na}=i("semitone"),{voice:sa}=i("voice"),{chord:ra}=i("chord"),{dictionary:oa,dict:ia}=i("dictionary","dict"),{anchor:ca}=i("anchor"),{offset:ua}=i("offset"),{octaves:aa}=i("octaves"),{mode:la}=i(["mode","anchor"]),{room:fa}=i(["room","size"]),{roomlp:pa,rlp:ha}=i("roomlp","rlp"),{roomdim:da,rdim:ma}=i("roomdim","rdim"),{roomfade:ya,rfade:wa}=i("roomfade","rfade"),{ir:ga,iresponse:ba}=i(["ir","i"],"iresponse"),{irspeed:_a}=i("irspeed"),{irbegin:va}=i("irbegin"),{roomsize:ka,size:qa,sz:Aa,rsize:Sa}=i("roomsize","size","sz","rsize"),{shape:Ba}=i(["shape","shapevol"]),{distort:Ta,dist:Ca}=i(["distort","distortvol","distorttype"],"dist"),{distortvol:xa}=i("distortvol","distvol"),{distorttype:Oa}=i("distorttype","disttype"),{compressor:za}=i(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:Ea}=i("compressorKnee"),{compressorRatio:Na}=i("compressorRatio"),{compressorAttack:Ma}=i("compressorAttack"),{compressorRelease:Pa}=i("compressorRelease"),{speed:ue}=i("speed"),{stretch:Ia}=i("stretch"),{unit:ja}=i("unit"),{squiz:Ja}=i("squiz"),{vowel:$a}=i("vowel"),{waveloss:La}=i("waveloss"),{density:xm}=i("density"),{expression:Wa}=i("expression"),{sustainpedal:Ra}=i("sustainpedal"),{fshift:Fa}=i("fshift"),{fshiftnote:Va}=i("fshiftnote"),{fshiftphase:Da}=i("fshiftphase"),{triode:Ha}=i("triode"),{krush:Qa}=i("krush"),{kcutoff:Ga}=i("kcutoff"),{octer:Ua}=i("octer"),{octersub:Ka}=i("octersub"),{octersubsub:Za}=i("octersubsub"),{ring:Xa}=i("ring"),{ringf:Ya}=i("ringf"),{ringdf:tl}=i("ringdf"),{freeze:el}=i("freeze"),{xsdelay:nl}=i("xsdelay"),{tsdelay:sl}=i("tsdelay"),{real:rl}=i("real"),{imag:ol}=i("imag"),{enhance:il}=i("enhance"),{comb:cl}=i("comb"),{smear:ul}=i("smear"),{scram:al}=i("scram"),{binshift:ll}=i("binshift"),{hbrick:fl}=i("hbrick"),{lbrick:pl}=i("lbrick"),{frameRate:hl}=i("frameRate"),{frames:dl}=i("frames"),{hours:ml}=i("hours"),{minutes:yl}=i("minutes"),{seconds:wl}=i("seconds"),{songPtr:gl}=i("songPtr"),{uid:bl}=i("uid"),{val:_l}=i("val"),{cps:vl}=i("cps"),{clip:kl,legato:ql}=i("clip","legato"),{duration:Al,dur:Sl}=i("duration","dur"),{zrand:Bl}=i("zrand"),{curve:Tl}=i("curve"),{deltaSlide:Cl}=i("deltaSlide"),{pitchJump:xl}=i("pitchJump"),{pitchJumpTime:Ol}=i("pitchJumpTime"),{lfo:zl,repeatTime:El}=i("lfo","repeatTime"),{znoise:Nl}=i("znoise"),{zmod:Ml}=i("zmod"),{zcrush:Pl}=i("zcrush"),{zdelay:Il}=i("zdelay"),{zzfx:jl}=i("zzfx"),{color:Jl,colour:$l}=i(["color","colour"]);let Ll=(...t)=>t.reduce((e,n)=>Object.assign(e,{[n]:Pt(n)}),{});const Wl=f("adsr",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s,r,o]=t;return e.set({attack:n,decay:s,sustain:r,release:o})}),Rl=f("ad",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.attack(n).decay(s)}),Fl=f("ds",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=0]=t;return e.set({decay:n,sustain:s})}),Vl=f("ar",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.set({attack:n,release:s})}),{midichan:Dl}=i("midichan"),{midimap:Hl}=i("midimap"),{midiport:Ql}=i("midiport"),{midicmd:Gl}=i("midicmd"),Ul=f("control",(t,e)=>{if(!Array.isArray(t))throw new Error("control expects an array of [ccn, ccv]");const[n,s]=t;return e.ccn(n).ccv(s)}),{ccn:Kl}=i("ccn"),{ccv:Zl}=i("ccv"),{ctlNum:Xl}=i("ctlNum"),{nrpnn:Yl}=i("nrpnn"),{nrpv:tf}=i("nrpv"),{progNum:ef}=i("progNum"),nf=f("sysex",(t,e)=>{if(!Array.isArray(t))throw new Error("sysex expects an array of [id, data]");const[n,s]=t;return e.sysexid(n).sysexdata(s)}),{sysexid:sf}=i("sysexid"),{sysexdata:rf}=i("sysexdata"),{midibend:of}=i("midibend"),{miditouch:cf}=i("miditouch"),{polyTouch:uf}=i("polyTouch"),{oschost:af}=i("oschost"),{oscport:lf}=i("oscport"),ae=t=>_t.has(t)?_t.get(t):t,ff=f("as",(t,e)=>(t=Array.isArray(t)?t:[t],e.fmap(n=>(n=Array.isArray(n)?n:[n],n=Object.fromEntries(t.map((s,r)=>[ae(s),n[r]])),n)))),pf=f("scrub",(t,e)=>t.outerBind(n=>{Array.isArray(n)||(n=[n]);const[s,r=1]=n;return e.begin(s).mul(ue(r)).clip(1)}),!1),Om=Object.freeze(Object.defineProperty({__proto__:null,accelerate:ys,activeLabel:Pu,ad:Rl,adsr:Wl,amp:_s,analyze:Po,anchor:ca,ar:Vl,as:ff,att:ks,attack:vs,bandf:Vo,bandq:Qo,bank:No,bbexpr:yi,bbst:gi,begin:Uo,binshift:ll,bp:Ho,bpa:Zi,bpattack:Ki,bpd:sc,bpdc:Oc,bpdecay:nc,bpdepth:Tc,bpdepthfrequency:Cc,bpe:Di,bpenv:Vi,bpf:Do,bpq:Go,bpr:mc,bprate:Sc,bprelease:dc,bps:ac,bpshape:xc,bpskew:zc,bpsustain:uc,bpsync:Bc,byteBeatExpression:mi,byteBeatStartTime:wi,ccn:Kl,ccv:Zl,ch:_i,channel:Mi,channels:bi,chord:ra,chorus:Mo,clip:kl,coarse:si,color:Jl,colour:$l,comb:cl,compressor:za,compressorAttack:Ma,compressorKnee:Ea,compressorRatio:Na,compressorRelease:Pa,control:Ul,cps:vl,createParam:Pt,createParams:Ll,crush:ni,ctf:ji,ctlNum:Xl,ctranspose:$u,curve:Tl,cut:Pi,cutoff:Ii,dec:Jo,decay:jo,degree:ju,delay:tu,delayfb:nu,delayfeedback:eu,delayspeed:ru,delaysync:uu,delayt:iu,delaytime:ou,deltaSlide:Cl,density:xm,det:fu,detune:lu,dfb:su,dict:ia,dictionary:oa,dist:Ca,distort:Ta,distorttype:Oa,distortvol:xa,djf:Yc,drive:li,dry:du,ds:Fl,dt:cu,duck:fi,duckattack:di,duckdepth:pi,duckonset:hi,dur:Sl,duration:Al,end:Ko,enhance:il,expression:Wa,fadeInTime:wu,fadeOutTime:yu,fadeTime:mu,fanchor:wc,fft:Io,fm:Ws,fm1:Rs,fm2:Fs,fm3:Vs,fm4:Ds,fm5:Hs,fm6:Qs,fm7:Gs,fm8:Us,fmatt:dr,fmatt1:mr,fmatt2:yr,fmatt3:wr,fmatt4:gr,fmatt5:br,fmatt6:_r,fmatt7:vr,fmatt8:kr,fmattack:or,fmattack1:ir,fmattack2:cr,fmattack3:ur,fmattack4:ar,fmattack5:lr,fmattack6:fr,fmattack7:pr,fmattack8:hr,fmdec:Wr,fmdec1:Rr,fmdec2:Fr,fmdec3:Vr,fmdec4:Dr,fmdec5:Hr,fmdec6:Qr,fmdec7:Gr,fmdec8:Ur,fmdecay:Er,fmdecay1:Nr,fmdecay2:Mr,fmdecay3:Pr,fmdecay4:Ir,fmdecay5:jr,fmdecay6:Jr,fmdecay7:$r,fmdecay8:Lr,fmenv:Ks,fmenv1:Zs,fmenv2:Xs,fmenv3:Ys,fmenv4:tr,fmenv5:er,fmenv6:nr,fmenv7:sr,fmenv8:rr,fmh:qs,fmh1:As,fmh2:Ss,fmh3:Bs,fmh4:Ts,fmh5:Cs,fmh6:xs,fmh7:Os,fmh8:zs,fmi:Es,fmi1:Ns,fmi2:Ms,fmi3:Ps,fmi4:Is,fmi5:js,fmi6:Js,fmi7:$s,fmi8:Ls,fmrel:Ao,fmrel1:So,fmrel2:Bo,fmrel3:To,fmrel4:Co,fmrel5:xo,fmrel6:Oo,fmrel7:zo,fmrel8:Eo,fmrelease:mo,fmrelease1:yo,fmrelease2:wo,fmrelease3:go,fmrelease4:bo,fmrelease5:_o,fmrelease6:vo,fmrelease7:ko,fmrelease8:qo,fmsus:oo,fmsus1:io,fmsus2:co,fmsus3:uo,fmsus4:ao,fmsus5:lo,fmsus6:fo,fmsus7:po,fmsus8:ho,fmsustain:Kr,fmsustain1:Zr,fmsustain2:Xr,fmsustain3:Yr,fmsustain4:to,fmsustain5:eo,fmsustain6:no,fmsustain7:so,fmsustain8:ro,fmwave:qr,fmwave1:Ar,fmwave2:Sr,fmwave3:Br,fmwave4:Tr,fmwave5:Cr,fmwave6:xr,fmwave7:Or,fmwave8:zr,frameRate:hl,frames:dl,freeze:el,freq:gu,fshift:Fa,fshiftnote:Va,fshiftphase:Da,ftype:yc,gain:gs,gat:zu,gate:Ou,getControlName:ae,harmonic:Lu,hbrick:fl,hcutoff:Hc,hold:Fo,hours:ml,hp:Gc,hpa:Ui,hpattack:Gi,hpd:ec,hpdc:Jc,hpdecay:tc,hpdepth:Mc,hpdepthfreq:Pc,hpdepthfrequency:Ic,hpe:Fi,hpenv:Ri,hpf:Qc,hpq:Kc,hpr:hc,hprate:Ec,hprelease:pc,hps:cc,hpshape:jc,hpskew:$c,hpsustain:ic,hpsync:Nc,hresonance:Uc,imag:ol,ir:ga,irbegin:va,iresponse:ba,irspeed:_a,isControlName:Sn,kcutoff:Ga,krush:Qa,label:Iu,lbrick:pl,legato:ql,leslie:Eu,lfo:zl,lock:au,loop:Zo,loopBegin:Xo,loopEnd:ti,loopb:Yo,loope:ei,lp:$i,lpa:Qi,lpattack:Hi,lpd:Yi,lpdc:qc,lpdecay:Xi,lpdepth:_c,lpdepthfrequency:vc,lpe:Wi,lpenv:Li,lpf:Ji,lpq:Xc,lpr:fc,lprate:gc,lprelease:lc,lps:oc,lpshape:kc,lpskew:Ac,lpsustain:rc,lpsync:bc,lrate:Nu,lsize:Mu,midibend:of,midichan:Dl,midicmd:Gl,midimap:Hl,midiport:Ql,miditouch:cf,minutes:yl,mode:la,mtranspose:Ju,n:ds,noise:Fc,note:ms,nrpnn:Yl,nrpv:tf,nudge:Fu,oct:Du,octave:Vu,octaveR:Ru,octaves:aa,octer:Ua,octersub:Ka,octersubsub:Za,offset:ua,orbit:Hu,oschost:af,oscport:lf,overgain:Qu,overshape:Gu,pan:Uu,panchor:xu,panorient:Yu,panspan:Ku,pansplay:Zu,panwidth:Xu,patt:_u,pattack:bu,pcurve:Cu,pdec:ku,pdecay:vu,penv:Tu,ph:Si,phasdp:Ni,phaser:Bi,phasercenter:xi,phaserdepth:zi,phaserrate:Ai,phasersweep:Ti,phc:Oi,phd:Ei,phs:Ci,pitchJump:xl,pitchJumpTime:Ol,polyTouch:uf,postgain:bs,prel:Bu,prelease:Su,progNum:ef,psus:Au,psustain:qu,pw:vi,pwrate:ki,pwsweep:qi,rate:ta,rdim:ma,real:rl,registerControl:i,registerMultiControl:K,rel:Ro,release:Wo,repeatTime:El,resonance:Zc,rfade:wa,ring:Xa,ringdf:tl,ringf:Ya,rlp:ha,room:fa,roomdim:da,roomfade:ya,roomlp:pa,roomsize:ka,rsize:Sa,s:Bn,scram:al,scrub:pf,seconds:wl,semitone:na,shape:Ba,size:qa,slide:ea,smear:ul,songPtr:gl,sound:Tn,source:ps,speed:ue,spread:hu,squiz:Ja,src:hs,stepsPerOctave:Wu,stretch:Ia,sus:Lo,sustain:$o,sustainpedal:Ra,sysex:nf,sysexdata:rf,sysexid:sf,sz:Aa,tremolo:ri,tremolodepth:ii,tremolophase:ui,tremoloshape:ai,tremoloskew:ci,tremolosync:oi,triode:Ha,tsdelay:sl,uid:bl,unison:pu,unit:ja,v:Rc,val:_l,velocity:ws,vib:Lc,vibmod:Vc,vibrato:Wc,vmod:Dc,voice:sa,vowel:$a,warp:Dn,warpatt:Gn,warpattack:Qn,warpdc:rs,warpdec:Kn,warpdecay:Un,warpdepth:ns,warpenv:ls,warpmode:is,warprate:es,warprel:ts,warprelease:Yn,warpshape:ss,warpskew:os,warpsus:Xn,warpsustain:Zn,warpsync:fs,waveloss:La,wavetablePhaseRand:as,wavetablePosition:xn,wavetableWarp:Hn,wavetableWarpMode:cs,wt:Cn,wtatt:En,wtattack:zn,wtdc:Fn,wtdec:Mn,wtdecay:Nn,wtdepth:Wn,wtenv:On,wtphaserand:us,wtrate:$n,wtrel:Jn,wtrelease:jn,wtshape:Rn,wtskew:Vn,wtsus:In,wtsustain:Pn,wtsync:Ln,xsdelay:nl,zcrush:Pl,zdelay:Il,zmod:Ml,znoise:Nl,zrand:Bl,zzfx:jl},Symbol.toStringTag,{value:"Module"})),zm=function(t,e){const[n,s]=t,[r,o]=e,[c,u]=te(s,r);return[[s,n-s],[Et((a,l)=>a.concat(l),c,o),u]]},Em=function(t,e){const[n,s]=t,[r,o]=e,[c,u]=te(n,o);return[[n,s-n],[Et((l,p)=>l.concat(p),r,c),u]]},hf=function(t,e){const[n,s]=t;return Math.min(n,s)<=1?[t,e]:hf(...n>s?zm(t,e):Em(t,e))},le=function(t,e){const n=t<0,s=Math.abs(t),r=e-s,o=Array(s).fill([1]),c=Array(r).fill([0]),u=hf([s,r],[o,c]),a=Y(u[1][0]).concat(Y(u[1][1]));return n?a.map(l=>1-l):a},It=function(t,e,n){const s=le(t,e);return n?Je(s,-n):s},Nm=f("euclid",function(t,e,n){return n.struct(It(t,e,0))}),Mm=f("bjork",function(t,e){Array.isArray(t)||(t=[t]);const[n,s=n,r=0]=t;return e.struct(It(n,s,r))}),{euclidrot:Pm,euclidRot:Im}=f(["euclidrot","euclidRot"],function(t,e,n,s){return s.struct(It(t,e,n))}),df=function(t,e,n,s){if(t<1)return S;const o=It(t,e,0).join("").split("1").slice(1).map(c=>[c.length+1,!0]);return s.struct(_n(...o)).late(y(n).div(e))},jm=f(["euclidLegato"],function(t,e,n){return df(t,e,0,n)}),Jm=f(["euclidLegatoRot"],function(t,e,n,s){return df(t,e,n,s)}),{euclidish:$m,eish:Lm}=f(["euclidish","eish"],function(t,e,n,s){const r=ce(le(t,e),new Array(t).fill(1),n);return s.struct(r).setSteps(e)});function mf(t,e,n=.05,s=.1,r=.1,o=globalThis.setInterval,c=globalThis.clearInterval,u=!0){let a=0,l=0,p=10**4,h=.01;const k=F=>n=F(n);r=r||s/2;const _=()=>{const F=t(),rt=F+s+r;for(l===0&&(l=F+h);l<rt;)l=u?Math.round(l*p)/p:l,e(l,n,a,F),l+=n,a++};let A;const x=()=>{W(),_(),A=o(_,s*1e3)},W=()=>{A!==void 0&&c(A),A=void 0};return{setDuration:k,start:x,stop:()=>{a=0,l=0,W()},pause:()=>W(),duration:n,interval:s,getPhase:()=>l,minLatency:h}}function Wm(t){return new d(e=>[new E(void 0,e.span,t)])}const G=t=>{const e=n=>[new E(void 0,n.span,t(n.span.begin))];return new d(e)},St=G(t=>t%1),fe=St.toBipolar(),jt=G(t=>1-t%1),pe=jt.toBipolar(),he=G(t=>Math.sin(Math.PI*2*t)),yf=he.fromBipolar(),Rm=yf._early(y(1).div(4)),Fm=he._early(y(1).div(4)),wf=G(t=>Math.floor(t*2%2)),Vm=wf.toBipolar(),Dm=L(St,jt),Hm=L(fe,pe),Qm=L(jt,St),Gm=L(pe,fe),de=G(at);let me=0,ye=0;typeof window<"u"&&document.addEventListener("mousemove",t=>{me=t.clientY/document.body.clientHeight,ye=t.clientX/document.body.clientWidth});const Um=G(()=>me),Km=G(()=>me),Zm=G(()=>ye),Xm=G(()=>ye),gf=t=>{const e=t<<13^t,n=e>>17^e;return n<<5^n},Ym=t=>t-Math.trunc(t),bf=t=>gf(Math.trunc(Ym(t/300)*536870912)),_f=t=>t%536870912/536870912,vt=t=>Math.abs(_f(bf(t))),ty=(t,e)=>{const n=[];for(let s=0;s<e;++s)n.push(_f(t)),t=gf(t);return n},vf=(t,e)=>ty(bf(t),e),kf=t=>St.range(0,t).round().segment(t),ey=t=>{const e=m(t).log2(0).floor().add(1);return qf(t,e)},qf=(t,e=16)=>{e=m(e);const n=kf(e).mul(-1).add(e.sub(1));return m(t).segment(e).brshift(n).band(I(1))},ny=t=>{const e=m(t).log2(0).floor().add(1);return Af(t,e)},Af=(t,e=16)=>m(t).withValue(n=>s=>{const r=[];for(let o=s-1;o>=0;o--)r.push(n>>o&1);return r}).appLeft(m(e)),sy=t=>G(e=>n=>vf(e,n).map(Math.abs)).appLeft(m(t)),Sf=t=>G(e=>{const s=vf(e.floor().add(.5),t).map((o,c)=>[o,c]).sort((o,c)=>(o[0]>c[0])-(o[0]<c[0])).map(o=>o[1]),r=e.cyclePos().mul(t).floor()%t;return s[r]})._segment(t),Bf=(t,e,n)=>{const s=[...Array(e).keys()].map(r=>n.zoom(y(r).div(e),y(r+1).div(e)));return t.fmap(r=>s[r].repeatCycles(e)._fast(e)).innerJoin()},ry=f("shuffle",(t,e)=>Bf(Sf(t),t,e)),oy=f("scramble",(t,e)=>Bf(ge(t)._segment(t),t,e)),Q=G(vt),iy=Q.toBipolar(),we=t=>Q.fmap(e=>e<t),cy=t=>m(t).fmap(we).innerJoin(),uy=we(.5),ge=t=>Q.fmap(e=>Math.trunc(e*t)),ay=t=>m(t).fmap(ge).innerJoin(),be=(t,e)=>(e=e.map(m),e.length==0?S:t.range(0,e.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[s]})),Jt=(t,e)=>be(t,e).outerJoin(),_e=(t,e)=>be(t,e).innerJoin(),Tf=(...t)=>Jt(Q,t),ly=(...t)=>_e(Q,t),fy=Tf;d.prototype.choose=function(...t){return Jt(this,t)};d.prototype.choose2=function(...t){return Jt(this.fromBipolar(),t)};const Cf=(...t)=>_e(Q.segment(1),t),py=Cf,xf=function(t,...e){const n=e.map(u=>m(u[0])),s=[];let r=I(0);for(const u of e)r=r.add(u[1]),s.push(r);const o=Ze(s),c=function(u){const a=r.mul(u);return o.fmap(l=>p=>n[l.findIndex(h=>h>p,l)]).appLeft(a)};return t.bind(c)},hy=(...t)=>xf(...t).outerJoin(),dy=(...t)=>hy(Q,...t),Of=(...t)=>xf(Q.segment(1),...t).innerJoin(),my=Of;function yy(t){let e=Math.floor(t),n=e+1;const s=c=>6*c**5-15*c**4+10*c**3;return(c=>u=>a=>u+s(c)*(a-u))(t-e)(vt(e))(vt(n))}const zf=t=>t.fmap(yy);function wy(t){const e=Math.floor(t),n=e+1,s=vt(e),r=vt(n)+s,o=(t-e)/(n-e);return((u,a,l)=>u+(a-u)*l)(s,r,o)/2}const Ef=t=>t.fmap(wy),gy=zf(de.fmap(t=>Number(t))),by=Ef(de.fmap(t=>Number(t))),_y=f("degradeByWith",(t,e,n)=>n.fmap(s=>r=>s).appLeft(t.filterValues(s=>s>e)),!0,!0),vy=f("degradeBy",function(t,e){return e._degradeByWith(Q,t)},!0,!0),ky=f("degrade",t=>t._degradeBy(.5),!0,!0),qy=f("undegradeBy",function(t,e){return e._degradeByWith(Q.fmap(n=>1-n),t)},!0,!0),Ay=f("undegrade",t=>t._undegradeBy(.5),!0,!0),Sy=f("sometimesBy",function(t,e,n){return m(t).fmap(s=>N(n._degradeBy(s),e(n._undegradeBy(1-s)))).innerJoin()}),By=f("sometimes",function(t,e){return e._sometimesBy(.5,t)}),Ty=f("someCyclesBy",function(t,e,n){return m(t).fmap(s=>N(n._degradeByWith(Q._segment(1),s),e(n._degradeByWith(Q.fmap(r=>1-r)._segment(1),1-s)))).innerJoin()}),Cy=f("someCycles",function(t,e){return e._someCyclesBy(.5,t)}),xy=f("often",function(t,e){return e.sometimesBy(.75,t)}),Oy=f("rarely",function(t,e){return e.sometimesBy(.25,t)}),zy=f("almostNever",function(t,e){return e.sometimesBy(.1,t)}),Ey=f("almostAlways",function(t,e){return e.sometimesBy(.9,t)}),Ny=f("never",function(t,e){return e}),My=f("always",function(t,e){return t(e)});function ve(t){Array.isArray(t)===!1&&(t=[t]);const e=Ue();return t.every(n=>{const s=Ge.get(n)??n;return e[s]})}const Py=f("whenKey",function(t,e,n){return n.when(ve(t),e)}),Iy=f("keyDown",function(t){return t.fmap(ve)}),Z=function(t,e,n=!0){const s=Array.isArray(t),r=Object.keys(t).length;return t=He(t,m),r===0?S:e.fmap(o=>{let c=o;return s&&(c=n?Math.round(c)%r:Re(Math.round(c),0,t.length-1)),t[c]})},Nf=function(t,e){return Array.isArray(e)&&([e,t]=[t,e]),jy(t,e)},jy=f("pick",function(t,e){return Z(t,e,!1).innerJoin()}),Mf=f("pickmod",function(t,e){return Z(t,e,!0).innerJoin()}),Jy=f("pickF",function(t,e,n){return n.apply(Nf(t,e))}),$y=f("pickmodF",function(t,e,n){return n.apply(Mf(t,e))}),Ly=f("pickOut",function(t,e){return Z(t,e,!1).outerJoin()}),Wy=f("pickmodOut",function(t,e){return Z(t,e,!0).outerJoin()}),Ry=f("pickRestart",function(t,e){return Z(t,e,!1).restartJoin()}),Fy=f("pickmodRestart",function(t,e){return Z(t,e,!0).restartJoin()}),Vy=f("pickReset",function(t,e){return Z(t,e,!1).resetJoin()}),Dy=f("pickmodReset",function(t,e){return Z(t,e,!0).resetJoin()}),{inhabit:Hy,pickSqueeze:Qy}=f(["inhabit","pickSqueeze"],function(t,e){return Z(t,e,!1).squeezeJoin()}),{inhabitmod:Gy,pickmodSqueeze:Uy}=f(["inhabitmod","pickmodSqueeze"],function(t,e){return Z(t,e,!0).squeezeJoin()}),Ky=(t,e)=>(e=e.map(m),e.length==0?S:t.fmap(n=>{const s=qt(Math.round(n),e.length);return e[s]}).squeezeJoin());let xt;try{xt=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let ze=xt?.getVoices();function Zy(t,e,n){xt.cancel();const s=new SpeechSynthesisUtterance(t);s.lang=e,ze=xt.getVoices();const r=ze.filter(o=>o.lang.includes(e));typeof n=="number"?s.voice=r[n%r.length]:typeof n=="string"&&(s.voice=r.find(o=>o.name===o)),speechSynthesis.speak(s)}const Xy=f("speak",function(t,e,n){return n.onTrigger(s=>{Zy(s.value,t,e)})}),Pf={},If=async(...t)=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="fulfilled").map(s=>s.value);return e.forEach((s,r)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${r} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([r,o])=>{globalThis[r]=o,Pf[r]=o})}),n};function Yy(t,e={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=e;n&&(t=`{${t}}`),s&&(t=`(async ()=>${t})()`);const r=`"use strict";return (${t})`;return Function(r)()}const jf=async(t,e,n)=>{let s={};if(e){const c=e(t,n);t=c.output,s=c}return{mode:"javascript",pattern:await Yy(t,{wrapExpression:!!e}),meta:s}};class tw{constructor({onTrigger:e,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.getTime=s,this.time_at_last_tick_message=0,this.collator=new Qe({getTargetClockTime:s}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL("/_astro/clockworker-ZDiUtESR.js",import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const r=c=>{const{cps:u,begin:a,end:l,cycle:p,time:h}=c;this.cps=u,this.cycle=p;const k=this.collator.calculateOffset(h)+h;o(a,l,k),this.time_at_last_tick_message=k},o=(c,u,a)=>{if(this.started===!1)return;this.pattern.queryArc(c,u,{_cps:this.cps,cyclist:"neocyclist"}).forEach(p=>{if(p.hasOnset()){const k=Ft(p.whole.begin-this.cycle,this.cps)+a+this.latency,_=Ft(p.duration,this.cps);e?.(p,0,_,this.cps,k)}})};this.channel.onmessage=c=>{if(!this.started)return;const{payload:u,type:a}=c.data;switch(a){case"tick":r(u)}}}sendMessage(e,n){this.worker.port.postMessage({type:e,payload:n,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){this.sendMessage("toggle",{started:e}),this.started=e,this.onToggle?.(e)}start(){J("[cyclist] start"),this.setStarted(!0)}stop(){J("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}class Jf{constructor({interval:e,onTrigger:n,onToggle:s,onError:r,getTime:o,latency:c=.1,setInterval:u,clearInterval:a,beforeStart:l}){this.started=!1,this.beforeStart=l,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=o,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=c,this.clock=mf(o,(p,h,k,_)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=p),this.num_ticks_since_cps_change++;const x=this.num_ticks_since_cps_change*h*this.cps;try{const W=this.lastEnd;this.lastBegin=W;const R=this.num_cycles_at_cps_change+x;if(this.lastEnd=R,this.lastTick=p,p<_){console.log("skip query: too late");return}this.pattern.queryArc(W,R,{_cps:this.cps,cyclist:"cyclist"}).forEach(O=>{if(O.hasOnset()){const F=(O.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+c,rt=O.duration/this.cps,et=F-p;n?.(O,et,rt,this.cps,F),O.value.cps!==void 0&&this.cps!=O.value.cps&&(this.cps=O.value.cps,this.num_ticks_since_cps_change=0)}})}catch(W){Ot(W),r?.(W)}},e,.1,.1,u,a)}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");J("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){J("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){J("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(e,n=!1){this.pattern=e,n&&!this.started&&await this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let Gt;function ew(){if(!Gt)throw new Error("no time set! use setTime to define a time source");return Gt()}function Ut(t){Gt=t}function nw({defaultOutput:t,onEvalError:e,beforeEval:n,beforeStart:s,afterEval:r,getTime:o,transpiler:c,onToggle:u,editPattern:a,onUpdateState:l,sync:p=!1,setInterval:h,clearInterval:k,id:_,mondo:A=!1}){const x={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},W={id:_},R=q=>{Object.assign(x,q),x.isDirty=x.code!==x.activeCode,x.error=x.evalError||x.schedulerError,l?.(x)},mt={onTrigger:$f({defaultOutput:t,getTime:o}),getTime:o,onToggle:q=>{R({started:q}),u?.(q)},setInterval:h,clearInterval:k,beforeStart:s},O=p&&typeof SharedWorker<"u"?new tw(mt):new Jf(mt);let F={},rt=0,et;const ke=function(){return F={},rt=0,et=void 0,S};function qe(q){return q._Pattern?q.__pure:q}const Ae=async(q,T=!0)=>(q=a?.(q)||q,await O.setPattern(q,T),q);Ut(()=>O.now());const Lf=()=>O.stop(),Wf=()=>O.start(),Rf=()=>O.pause(),Ff=()=>O.toggle(),$t=q=>(O.setCps(qe(q)),S),Se=q=>(O.setCps(qe(q)/60),S);let Bt=[];const Vf=function(q){return Bt.push(q),S},Df=function(q){return et=q,S},Hf=()=>{d.prototype.p=function(T){return typeof T=="string"&&(T.startsWith("_")||T.endsWith("_"))?S:(T.includes("$")&&(T=`${T}${rt}`,rt++),F[T]=this,this)},d.prototype.q=function(T){return S};try{for(let T=1;T<10;++T)Object.defineProperty(d.prototype,`d${T}`,{get(){return this.p(T)},configurable:!0}),Object.defineProperty(d.prototype,`p${T}`,{get(){return this.p(T)},configurable:!0}),d.prototype[`q${T}`]=S}catch(T){console.warn("injectPatternMethods: error:",T)}const q=f("cpm",function(T,Lt){return Lt._fast(T/60/O.cps)});return If({all:Vf,each:Df,hush:ke,cpm:q,setCps:$t,setcps:$t,setCpm:Se,setcpm:Se})};return{scheduler:O,evaluate:async(q,T=!0,Lt=!0)=>{if(!q)throw new Error("no code to evaluate");try{R({code:q,pending:!0}),await Hf(),Ut(()=>O.now()),await n?.({code:q}),Bt=[],Lt&&ke(),A&&(q=`mondolang\`${q}\``);let{pattern:P,meta:Wt}=await jf(q,c,W);if(Object.keys(F).length){let ot=[],Tt=!1;for(const[yt,Qf]of Object.entries(F)){const Be=yt.length>1&&yt.startsWith("S");if(Be&&Tt===!1&&(ot=[],Tt=!0),!Tt||Tt&&Be){const Gf=Qf.withState(Uf=>Uf.setControls({id:yt}));ot.push(Gf)}}et&&(ot=ot.map(yt=>et(yt))),P=N(...ot)}else et&&(P=et(P));if(Bt.length)for(const ot of Bt)P=ot(P);return ne(P)||(P=S),J("[eval] code updated"),P=await Ae(P,T),R({miniLocations:Wt?.miniLocations||[],widgets:Wt?.widgets||[],activeCode:q,pattern:P,evalError:void 0,schedulerError:void 0,pending:!1}),r?.({code:q,pattern:P,meta:Wt}),P}catch(P){J(`[eval] error: ${P.message}`,"error"),console.error(P),R({evalError:P,pending:!1}),e?.(P)}},start:Wf,stop:Lf,pause:Rf,setCps:$t,setPattern:Ae,setCode:q=>R({code:q}),toggle:Ff,state:x}}const $f=({getTime:t,defaultOutput:e})=>async(n,s,r,o,c)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,s,r,o,c),n.context.onTrigger&&await n.context.onTrigger(n,t(),o,c)}catch(u){Ot(u,"getTrigger")}},sw=function(t,e={}){const n=document.getElementById("code"),s="background-image:url("+t+");background-size:contain;";n.style=s;const{className:r}=n,o=(a,l)=>{({style:()=>n.style=s+";"+l,className:()=>n.className=l+" "+r})[a]()},c=Object.entries(e).filter(([a,l])=>typeof l=="function");Object.entries(e).filter(([a,l])=>typeof l=="string").forEach(([a,l])=>o(a,l)),c.length},rw=()=>{const t=document.getElementById("code");t&&(t.style="")};J("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const uw=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Qe,Cyclist:Jf,Fraction:y,Hap:E,Pattern:d,State:ft,TimeSpan:z,__chooseWith:be,_brandBy:we,_fitslice:on,_irand:ge,_keyDown:ve,_match:cn,_mod:qt,_morph:ce,_polymeterListSteps:an,_retime:Ht,_slices:Qt,accelerate:ys,activeLabel:Pu,ad:Rl,add:nh,adsr:Wl,almostAlways:Ey,almostNever:zy,always:My,amp:_s,analyze:Po,anchor:ca,and:vh,apply:Zh,applyN:rn,ar:Vl,arp:Pp,arpWith:Mp,arrange:Wp,as:ff,att:ks,attack:vs,averageArray:Ie,backgroundImage:sw,band:uh,bandf:Vo,bandq:Qo,bank:No,base64ToUnicode:De,bbexpr:yi,bbst:gi,beat:Am,begin:Uo,berlin:by,berlinWith:Ef,binary:ey,binaryL:ny,binaryN:qf,binaryNL:Af,bind:Qp,binshift:ll,bite:sd,bjork:Mm,bjorklund:le,blshift:fh,bor:ah,bp:Ho,bpa:Zi,bpattack:Ki,bpd:sc,bpdc:Oc,bpdecay:nc,bpdepth:Tc,bpdepthfrequency:Cc,bpe:Di,bpenv:Vi,bpf:Do,bpq:Go,bpr:mc,bprate:Sc,bprelease:dc,bps:ac,bpshape:xc,bpskew:zc,bpsustain:uc,bpsync:Bc,brak:hd,brand:uy,brandBy:cy,brshift:ph,bxor:lh,bypass:Vd,byteBeatExpression:mi,byteBeatStartTime:wi,calculateSteps:Op,cat:bt,ccn:Kl,ccv:Zl,ceil:Bh,ch:_i,channel:Mi,channels:bi,choose:Tf,chooseCycles:Cf,chooseIn:ly,chooseInWith:_e,chooseOut:fy,chooseWith:Jt,chop:dm,chord:ra,chorus:Mo,chunk:Nd,chunkBack:Id,chunkBackInto:Fd,chunkInto:Wd,chunkback:jd,chunkbackinto:Rd,chunkinto:Ld,clamp:Re,cleanupUi:rw,clip:kl,coarse:si,code2hash:qp,color:Jl,colour:$l,comb:cl,compose:fp,compress:Nh,compressSpan:Mh,compressor:za,compressorAttack:Ma,compressorKnee:Ea,compressorRatio:Na,compressorRelease:Pa,compressspan:Ph,constant:pp,contract:mn,control:Ul,controls:Om,cosine:Rm,cosine2:Fm,cpm:Xh,cps:vl,createClock:mf,createParam:Pt,createParams:Ll,crush:ni,ctf:ji,ctlNum:Xl,ctranspose:$u,curry:v,curve:Tl,cut:Pi,cutoff:Ii,cycleToSeconds:Ft,dec:Jo,decay:jo,degrade:ky,degradeBy:vy,degradeByWith:_y,degree:ju,delay:tu,delayfb:nu,delayfeedback:eu,delayspeed:ru,delaysync:uu,delayt:iu,delaytime:ou,deltaSlide:Cl,det:fu,detune:lu,dfb:su,dict:ia,dictionary:oa,dist:Ca,distort:Ta,distorttype:Oa,distortvol:xa,div:oh,djf:Yc,drawLine:Ke,drive:li,drop:pn,dry:du,ds:Fl,dt:cu,duck:fi,duckattack:di,duckdepth:pi,duckonset:hi,dur:Sl,duration:Al,early:Yh,echo:Sd,echoWith:vd,echowith:kd,eish:Lm,end:Ko,enhance:il,eq:wh,eqt:gh,errorLogger:Ot,euclid:Nm,euclidLegato:jm,euclidLegatoRot:Jm,euclidRot:Im,euclidish:$m,euclidrot:Pm,evalScope:If,evaluate:jf,every:Kh,expand:dn,expression:Wa,extend:hn,fadeInTime:wu,fadeOutTime:yu,fadeTime:mu,fanchor:wc,fast:Rh,fastChunk:$d,fastGap:Ih,fastcat:L,fastchunk:Jd,fastgap:jh,fft:Io,filter:Ud,filterWhen:Kd,firstOf:Uh,fit:bm,flatten:Y,floor:Sh,fm:Ws,fm1:Rs,fm2:Fs,fm3:Vs,fm4:Ds,fm5:Hs,fm6:Qs,fm7:Gs,fm8:Us,fmatt:dr,fmatt1:mr,fmatt2:yr,fmatt3:wr,fmatt4:gr,fmatt5:br,fmatt6:_r,fmatt7:vr,fmatt8:kr,fmattack:or,fmattack1:ir,fmattack2:cr,fmattack3:ur,fmattack4:ar,fmattack5:lr,fmattack6:fr,fmattack7:pr,fmattack8:hr,fmdec:Wr,fmdec1:Rr,fmdec2:Fr,fmdec3:Vr,fmdec4:Dr,fmdec5:Hr,fmdec6:Qr,fmdec7:Gr,fmdec8:Ur,fmdecay:Er,fmdecay1:Nr,fmdecay2:Mr,fmdecay3:Pr,fmdecay4:Ir,fmdecay5:jr,fmdecay6:Jr,fmdecay7:$r,fmdecay8:Lr,fmenv:Ks,fmenv1:Zs,fmenv2:Xs,fmenv3:Ys,fmenv4:tr,fmenv5:er,fmenv6:nr,fmenv7:sr,fmenv8:rr,fmh:qs,fmh1:As,fmh2:Ss,fmh3:Bs,fmh4:Ts,fmh5:Cs,fmh6:xs,fmh7:Os,fmh8:zs,fmi:Es,fmi1:Ns,fmi2:Ms,fmi3:Ps,fmi4:Is,fmi5:js,fmi6:Js,fmi7:$s,fmi8:Ls,fmrel:Ao,fmrel1:So,fmrel2:Bo,fmrel3:To,fmrel4:Co,fmrel5:xo,fmrel6:Oo,fmrel7:zo,fmrel8:Eo,fmrelease:mo,fmrelease1:yo,fmrelease2:wo,fmrelease3:go,fmrelease4:bo,fmrelease5:_o,fmrelease6:vo,fmrelease7:ko,fmrelease8:qo,fmsus:oo,fmsus1:io,fmsus2:co,fmsus3:uo,fmsus4:ao,fmsus5:lo,fmsus6:fo,fmsus7:po,fmsus8:ho,fmsustain:Kr,fmsustain1:Zr,fmsustain2:Xr,fmsustain3:Yr,fmsustain4:to,fmsustain5:eo,fmsustain6:no,fmsustain7:so,fmsustain8:ro,fmwave:qr,fmwave1:Ar,fmwave2:Sr,fmwave3:Br,fmwave4:Tr,fmwave5:Cr,fmwave6:xr,fmwave7:Or,fmwave8:zr,focus:Jh,focusSpan:$h,focusspan:Lh,fractionalArgs:hp,frameRate:hl,frames:dl,freeze:el,freq:gu,freqToMidi:Me,fromBipolar:Ch,fshift:Fa,fshiftnote:Va,fshiftphase:Da,ftype:yc,func:qh,gain:gs,gap:ht,gat:zu,gate:Ou,getAccidentalsOffset:Ne,getControlName:ae,getCurrentKeyboardState:Ue,getEventOffsetMs:op,getFreq:Pe,getFrequency:lp,getPerformanceTimeSeconds:Sp,getPlayableNoteValue:ap,getSoundIndex:up,getTime:ew,getTrigger:$f,grow:Yd,gt:dh,gte:yh,harmonic:Lu,hash2code:Ap,hbrick:fl,hcutoff:Hc,hold:Fo,hours:ml,hp:Gc,hpa:Ui,hpattack:Gi,hpd:ec,hpdc:Jc,hpdecay:tc,hpdepth:Mc,hpdepthfreq:Pc,hpdepthfrequency:Ic,hpe:Fi,hpenv:Ri,hpf:Qc,hpq:Kc,hpr:hc,hprate:Ec,hprelease:pc,hps:cc,hpshape:jc,hpskew:$c,hpsustain:ic,hpsync:Nc,hresonance:Uc,hsl:Gd,hsla:Qd,hurry:Fh,id:at,imag:ol,inhabit:Hy,inhabitmod:Gy,innerBind:Gp,inside:Hh,inv:ld,invert:ad,ir:ga,irand:ay,irbegin:va,iresponse:ba,irspeed:_a,isControlName:Sn,isNote:zt,isNoteWithOctave:ep,isPattern:ne,isaw:jt,isaw2:pe,iter:xd,iterBack:Od,iterback:zd,itri:Qm,itri2:Gm,jux:_d,juxBy:gd,juxby:bd,kcutoff:Ga,keep:th,keepif:eh,keyAlias:Ge,keyDown:Iy,krush:Qa,label:Iu,lastOf:Gh,late:nn,lbrick:pl,legato:ql,leslie:Eu,lfo:zl,linger:rd,listRange:At,lock:au,logKey:Zt,logger:J,loop:Zo,loopAt:wm,loopAtCps:_m,loopBegin:Xo,loopEnd:ti,loopat:gm,loopatcps:vm,loopb:Yo,loope:ei,lp:$i,lpa:Qi,lpattack:Hi,lpd:Yi,lpdc:qc,lpdecay:Xi,lpdepth:_c,lpdepthfrequency:vc,lpe:Wi,lpenv:Li,lpf:Ji,lpq:Xc,lpr:fc,lprate:gc,lprelease:lc,lps:oc,lpshape:kc,lpskew:Ac,lpsustain:rc,lpsync:bc,lrate:Nu,lsize:Mu,lt:hh,lte:mh,mapArgs:Yt,mask:Fp,midi2note:cp,midiToFreq:lt,midibend:of,midichan:Dl,midicmd:Gl,midimap:Hl,midiport:Ql,miditouch:cf,minutes:yl,mod:ih,mode:la,morph:Sm,mouseX:Xm,mouseY:Km,mousex:Zm,mousey:Um,mtranspose:Ju,mul:rh,n:ds,nanFallback:je,ne:bh,net:_h,never:Ny,noise:Fc,note:ms,noteToMidi:kt,nothing:D,nrpnn:Yl,nrpv:tf,nudge:Fu,numeralArgs:V,objectMap:He,oct:Du,octave:Vu,octaveR:Ru,octaves:aa,octer:Ua,octersub:Ka,octersubsub:Za,off:pd,offset:ua,often:xy,or:kh,orbit:Hu,oschost:af,oscport:lf,outerBind:Up,outside:Qh,overgain:Qu,overshape:Gu,pace:un,pairs:We,palindrome:wd,pan:Uu,panchor:xu,panorient:Yu,panspan:Ku,pansplay:Zu,panwidth:Xu,parray:An,parseFractional:Le,parseNumeral:Xt,partials:Tm,patt:_u,pattack:bu,pcurve:Cu,pdec:ku,pdecay:vu,penv:Tu,perlin:gy,perlinWith:zf,ph:Si,phasdp:Ni,phaser:Bi,phasercenter:xi,phaserdepth:zi,phaserrate:Ai,phasersweep:Ti,phases:Cm,phc:Oi,phd:Ei,phs:Ci,pick:Nf,pickF:Jy,pickOut:Ly,pickReset:Vy,pickRestart:Ry,pickSqueeze:Qy,pickmod:Mf,pickmodF:$y,pickmodOut:Wy,pickmodReset:Dy,pickmodRestart:Fy,pickmodSqueeze:Uy,pipe:$e,pitchJump:xl,pitchJumpTime:Ol,ply:Wh,plyForEach:Cd,plyWith:Td,pm:$p,polyBind:Xp,polyTouch:uf,polymeter:Nt,polyrhythm:jp,postgain:bs,pow:ch,pr:Jp,prel:Bu,prelease:Su,press:yd,pressBy:md,progNum:ef,psus:Au,psustain:qu,pure:I,pw:vi,pwrate:ki,pwsweep:qi,rand:Q,rand2:iy,randL:sy,randcat:py,randrun:Sf,range:xh,range2:zh,rangex:Oh,rarely:Oy,rate:ta,ratio:Eh,rdim:ma,real:rl,ref:km,register:f,registerControl:i,registerMultiControl:K,reify:m,rel:Ro,release:Wo,removeUndefineds:pt,repeatCycles:Ed,repeatTime:El,repl:nw,replicate:Xd,resonance:Zc,rev:sn,revv:dd,rfade:wa,rib:Hd,ribbon:Dd,ring:Xa,ringdf:tl,ringf:Ya,rlp:ha,room:fa,roomdim:da,roomfade:ya,roomlp:pa,roomsize:ka,rotate:Je,round:Ah,rsize:Sa,run:kf,s:Bn,s_add:im,s_alt:nm,s_cat:em,s_contract:lm,s_expand:um,s_extend:am,s_polymeter:sm,s_sub:cm,s_taper:rm,s_taperlist:om,s_tour:fm,s_zip:pm,saw:St,saw2:fe,scram:al,scramble:oy,scrub:pf,seconds:wl,seg:id,segment:od,semitone:na,seq:en,seqPLoop:Rp,sequence:tt,sequenceP:Ze,set:Yp,setStringParser:zp,setTime:Ut,shape:Ba,shrink:wn,shrinklist:yn,shuffle:ry,signal:G,silence:S,sine:yf,sine2:he,size:qa,slice:kn,slide:ea,slow:Vh,slowChunk:Pd,slowcat:st,slowcatPrime:re,slowchunk:Md,smear:ul,sol2note:_p,someCycles:Cy,someCyclesBy:Ty,sometimes:By,sometimesBy:Sy,songPtr:gl,sound:Tn,source:ps,sparsity:Dh,speak:Xy,speed:ue,splice:ym,splitAt:te,spread:hu,square:wf,square2:Vm,squeeze:Ky,squeezeBind:Kp,squiz:Ja,src:hs,stack:N,stackBy:Lp,stackCentre:tn,stackLeft:Xe,stackRight:Ye,steady:Wm,stepBind:Zp,stepalt:ln,stepcat:$,steps:hm,stepsPerOctave:Wu,stretch:Ia,striate:mm,stringifyValues:ee,struct:Vp,strudelScope:Pf,stut:Bd,stutWith:qd,stutwith:Ad,sub:sh,superimpose:Dp,sus:Lo,sustain:$o,sustainpedal:Ra,swing:ud,swingBy:cd,sysex:nf,sysexdata:rf,sysexid:sf,sz:Aa,take:fn,time:de,timeCat:_n,timecat:tm,toBipolar:Th,tokenizeNote:Ee,tour:gn,tremolo:ri,tremolodepth:ii,tremolophase:ui,tremoloshape:ai,tremoloskew:ci,tremolosync:oi,tri:Dm,tri2:Hm,triode:Ha,tsdelay:sl,uid:bl,undegrade:Ay,undegradeBy:qy,unicodeToBase64:Ve,uniq:vp,uniqsort:kp,uniqsortr:Fe,unison:pu,unit:ja,v:Rc,val:_l,valueToMidi:rp,velocity:ws,vib:Lc,vibmod:Vc,vibrato:Wc,vmod:Dc,voice:sa,vowel:$a,warp:Dn,warpatt:Gn,warpattack:Qn,warpdc:rs,warpdec:Kn,warpdecay:Un,warpdepth:ns,warpenv:ls,warpmode:is,warprate:es,warprel:ts,warprelease:Yn,warpshape:ss,warpskew:os,warpsus:Xn,warpsustain:Zn,warpsync:fs,waveloss:La,wavetablePhaseRand:as,wavetablePosition:xn,wavetableWarp:Hn,wavetableWarpMode:cs,wchoose:dy,wchooseCycles:Of,when:fd,whenKey:Py,withValue:Hp,within:Zd,wrandcat:my,wt:Cn,wtatt:En,wtattack:zn,wtdc:Fn,wtdec:Mn,wtdecay:Nn,wtdepth:Wn,wtenv:On,wtphaserand:us,wtrate:$n,wtrel:Jn,wtrelease:jn,wtshape:Rn,wtskew:Vn,wtsus:In,wtsustain:Pn,wtsync:Ln,xfade:qn,xsdelay:nl,zcrush:Pl,zdelay:Il,zip:bn,zipWith:Et,zmod:Ml,znoise:Nl,zoom:td,zoomArc:ed,zoomarc:nd,zrand:Bl,zzfx:jl},Symbol.toStringTag,{value:"Module"}));export{nw as $,km as A,lp as B,Qe as C,qp as D,Ll as E,I as F,Me as G,lt as H,up as I,ap as J,uw as K,Re as L,y as M,_n as N,ct as O,d as P,tt as Q,L as R,_e as S,Q as T,N as U,zp as V,Ot as W,pt as X,Ne as Y,i as Z,qt as _,Ba as a,jf as a0,Sp as a1,rp as a2,If as a3,Ap as a4,G as b,f as c,op as d,S as e,Pf as f,ew as g,$ as h,zt as i,Rh as j,Vh as k,J as l,cp as m,kt as n,Xd as o,Xt as p,dn as q,m as r,ue as s,un as t,vy as u,Mm as v,ly as w,en as x,ne as y,ae as z};
