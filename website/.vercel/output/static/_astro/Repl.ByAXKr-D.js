const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/prebake.Cdsm-3G8.js","_astro/codemirror.CljggVKv.js","_astro/index.Ds4Xb5JZ.js","_astro/index.CXEd7qFE.js","_astro/_commonjsHelpers.BosuxZz1.js","_astro/spectrum.DtTj66Yt.js","_astro/preload-helper.CLcXU_4U.js","_astro/index.B9mnsnPE.js"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime.CLpGMVip.js";import{n as Ge,k as oe,u as _,r as We,m as Ve,o as ze,q as qe,v as U,w as Je,x as Se,y as Z,z as g,A as Xe,B as Ye,C as ne,D as Qe,E as $,F as et,p as le,G as tt,H as nt,I as st,J as at,K as Ee,L as G,M as rt,N as ot,b as lt,O as it,P as ct,Q as dt,s as ut,f as V,R as z,S as ht,T as pe,U as pt,g as mt,V as ft,W as xt,X as gt}from"./prebake.Cdsm-3G8.js";import{c as y,S as bt,a as vt,A as wt,b as jt}from"./PatternsTab.Bx81ywzF.js";import{u as K}from"./useEvent.CgYsmZOj.js";import{a0 as yt,l as se,W as kt,e as Ct,D as Nt,a1 as St}from"./index.CXEd7qFE.js";import{q as Et,g as Te}from"./index.Ds4Xb5JZ.js";import{r as l,R as Tt}from"./index.B9mnsnPE.js";import{w as Ae,j as At,y as Pt,S as Rt,z as me}from"./codemirror.CljggVKv.js";import{e as _t,f as Mt,h as Ot,D as It,j as fe,g as xe,k as Ft,i as Dt,w as Lt,l as Bt,m as Ht,n as Kt,p as $t}from"./spectrum.DtTj66Yt.js";import{_ as Ut}from"./preload-helper.CLcXU_4U.js";import{F as Zt}from"./ChevronDownIcon.C5d5libE.js";/* empty css                      */import{clearHydra as ge}from"./hydra.Dc5KkDdA.js";import{oscTrigger as Gt}from"./osc.BXiULvz3.js";import"./_commonjsHelpers.BosuxZz1.js";const Wt=t=>yt(t,Ae);function ie({onChange:t,className:s,...n}){return e.jsx("input",{className:y("p-2 bg-background rounded-md  border-foreground text-foreground placeholder-foreground",s),onChange:a=>t(a.target.value),...n})}function ce({active:t}){return e.jsx("div",{className:"overflow-hidden opacity-50 fixed top-0 left-0 w-full z-[1000]",children:e.jsx("div",{className:y("h-[2px] block w-full",t?"bg-foreground animate-train":"bg-transparent"),children:e.jsx("div",{})})})}const ae=Et([]);function Vt(t){K(se.key,t)}function zt(t,s){const{message:n,type:a,data:r}=s.detail,o=t.length?t[t.length-1]:void 0,m=Ge(12);if(a==="loaded-sample"){const u=t.findIndex(({data:{url:f},type:c})=>c==="load-sample"&&f===r.url);t[u]={message:n,type:a,id:m,data:r}}else o&&o.message===n?t=t.slice(0,-1).concat([{message:n,type:a,count:(o.count??1)+1,id:m,data:r}]):t=t.concat([{message:n,type:a,id:m,data:r}]);return t.slice(-20)}function qt(){Vt(t=>{const s=ae.get(),n=zt(s,t);ae.set(n)})}function Jt(){const t=oe(ae),{fontFamily:s}=_();return e.jsx("div",{id:"console-tab",className:"break-all w-full  first-line:text-sm p-2  h-full",style:{fontFamily:s},children:e.jsx("div",{className:"bg-background h-full w-full overflow-auto space-y-1 p-2 rounded-md",children:t.map((n,a)=>{const r=Xt(n.message),o=n.data?.hap?.value?.color;return e.jsxs("div",{className:y(n.type==="error"?"text-background bg-foreground":"text-foreground",n.type==="highlight"&&"underline"),style:o?{color:o}:{},children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:r}}),n.count?` (${n.count})`:""]},n.id)})})})}function Xt(t){var s,n,a,r;return n=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,s=t.replace(n,'<a class="underline" href="$1" target="_blank">$1</a>'),a=/(^|[^\/])(www\.[\S]+(\b|$))/gim,s=s.replace(a,'$1<a class="underline" href="http://$2" target="_blank">$2</a>'),r=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,s=s.replace(r,'<a class="underline" href="mailto:$1">$1</a>'),s}function Yt(){const[t,s]=l.useState([]);l.useEffect(()=>(We("",{dir:Ve,recursive:!0}).then(u=>s([{name:"~/music",children:u}])).catch(u=>{console.log("error loadin files",u)}),()=>{}),[]);const n=l.useMemo(()=>t[t.length-1],[t]),a=l.useMemo(()=>t.slice(1).map(u=>u.name).join("/"),[t]),r=l.useMemo(()=>n?.children.filter(u=>!!u.children),[n]),o=l.useMemo(()=>n?.children.filter(u=>!u.children&&ze(u.name)),[n]),m=u=>s(f=>f.concat([u]));return e.jsxs("div",{className:"px-4 flex flex-col h-full",children:[e.jsx("div",{className:"flex justify-between font-mono pb-1",children:e.jsxs("div",{children:[e.jsx("span",{children:"samples('"}),t?.map((u,f)=>f<t.length-1?e.jsxs(l.Fragment,{children:[e.jsx("span",{className:"cursor-pointer underline",onClick:()=>s(c=>c.slice(0,f+1)),children:u.name}),e.jsx("span",{children:"/"})]},f):e.jsx("span",{className:"cursor-pointer underline",children:u.name},f)),e.jsx("span",{children:"')"})]})}),e.jsxs("div",{className:"overflow-auto",children:[!r?.length&&!o?.length&&e.jsx("span",{className:"text-gray-500",children:"–ó–¥–µ—Å—å –ø—É—Å—Ç–æ"}),r?.map((u,f)=>e.jsx("div",{className:"cursor-pointer",onClick:()=>m(u),children:u.name},f)),o?.map((u,f)=>e.jsx("div",{className:"text-gray-500 cursor-pointer select-none",onClick:async()=>qe(`${a}/${u.name}`),children:u.name},f))]})]})}const Qt=({name:t,description:s})=>t&&!t.startsWith("_")&&!!s,en=(()=>{const t=new Set,s=[];for(const n of At.docs){if(!Qt(n))continue;s.push(n);const a=n.synonyms||[];for(const r of a){if(!r||t.has(r))continue;t.add(r);const o=[n.name,...a].filter(m=>m&&m!==r);s.push({...n,name:r,longname:r,synonyms:o,synonyms_text:o.join(", ")})}}return s.sort((n,a)=>n.name.localeCompare(a.name))})(),tn=t=>{var s=document.createElement("div");return s.innerHTML=t,s.textContent||s.innerText||""};function nn(){const[t,s]=l.useState(""),n=l.useMemo(()=>en.filter(a=>{if(!t)return!0;const r=t.toLowerCase();return a.name.toLowerCase().includes(r)||(a.synonyms?.some(o=>o.toLowerCase().includes(r))??!1)}),[t]);return e.jsxs("div",{className:"flex h-full w-full p-2 overflow-hidden",children:[e.jsxs("div",{className:"h-full  flex flex-col gap-2 w-1/3 max-w-72 ",children:[e.jsx("div",{class:"w-full flex",children:e.jsx(ie,{className:"w-full",placeholder:"–ü–æ–∏—Å–∫",value:t,onChange:s})}),e.jsx("div",{className:"flex flex-col h-full overflow-y-auto  gap-1.5 bg-background bg-opacity-50  rounded-md",children:n.map((a,r)=>e.jsxs("a",{className:"cursor-pointer text-foreground flex-none hover:bg-lineHighlight overflow-x-hidden  px-1 text-ellipsis",onClick:()=>{const o=document.getElementById(`doc-${r}`);document.getElementById("reference-container").scrollTo(0,o.offsetTop)},children:[a.name," "]},r))})]}),e.jsx("div",{className:"break-normal flex-grow flex-col overflow-y-auto overflow-x-hidden   px-2 flex relative",id:"reference-container",children:e.jsxs("div",{className:"prose dark:prose-invert min-w-full px-1 ",children:[e.jsx("h2",{children:"–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API"}),e.jsx("p",{children:"–≠—Ç–æ –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ü–æ–º–Ω–∏, —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏—Ö –≤—Å–µ ‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º—É–∑—ã–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–π!"}),n.map((a,r)=>e.jsxs("section",{children:[e.jsx("h3",{id:`doc-${r}`,children:a.name}),!!a.synonyms_text&&e.jsxs("p",{children:["–°–∏–Ω–æ–Ω–∏–º—ã: ",e.jsx("code",{children:a.synonyms_text})]}),e.jsx("p",{dangerouslySetInnerHTML:{__html:a.description}}),e.jsx("ul",{children:a.params?.map(({name:o,type:m,description:u},f)=>e.jsxs("li",{children:[o," : ",m?.names?.join(" | ")," ",u?e.jsxs(e.Fragment,{children:[" - ",tn(u)]}):""]},f))}),a.examples?.map((o,m)=>e.jsx("pre",{className:"bg-background",children:o},m))]},r))]})})]})}function Y({value:t,onChange:s,items:n}){return e.jsx("div",{className:"flex max-w-lg",children:Object.entries(n).map(([a,r],o,m)=>e.jsx("button",{id:a,onClick:()=>s(a),className:y("px-2 border-b h-8 whitespace-nowrap",t===a?"border-foreground":"border-transparent"),children:r.toLowerCase()},a))})}function Pe({value:t,options:s,onChange:n,onClick:a,isDisabled:r}){return e.jsxs("select",{disabled:r,onClick:a,className:"p-2 bg-background rounded-md text-foreground  border-foreground",value:t??"",onChange:o=>n(o.target.value),children:[s.size==0&&e.jsx("option",{value:t,children:`${t??"select an option"}`}),Array.from(s.keys()).map(o=>e.jsx("option",{className:"bg-background",value:o,children:s.get(o)},o))]})}const sn=new Map;function an({audioDeviceName:t,onChange:s,isDisabled:n}){const[a,r]=l.useState(sn),o=a.size>0,m=()=>{o||_t().then(c=>{r(c)})},u=c=>{o&&s(c)},f=new Map;return Array.from(a.keys()).forEach(c=>{f.set(c,c)}),e.jsx(Pe,{isDisabled:n,options:f,onClick:m,value:t,onChange:u})}function rn({target:t,onChange:s,isDisabled:n}){const a=o=>{s(o)},r=new Map([[U.webaudio,U.webaudio],[U.osc,U.osc]]);return e.jsxs("div",{className:" flex flex-col gap-1",children:[e.jsx(Pe,{isDisabled:n,options:r,value:t,onChange:a}),t===U.osc&&e.jsx("div",{children:e.jsxs("p",{className:"text-sm italic",children:["‚ö† –í—Å–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ OSC, –∑–≤—É–∫ –æ—Ç–∫–ª—é—á—ë–Ω! –°–º."," ",e.jsx("a",{className:"text-blue-500",href:"https://strudel.cc/learn/input-output/",children:"–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é"})]})})]})}async function on(t){const s=new FileReader;s.readAsText(t),s.onload=()=>{const n=s.result;Je(n)},s.onerror=()=>{kt(new Error("–Ω–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å prebake-—Å–∫—Ä–∏–ø—Ç"),"importScript")}}function ln(){return _(),e.jsx(bt,{type:"file",label:"–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å prebake-—Å–∫—Ä–∏–ø—Ç",accept:".strudel",onChange:t=>on(t.target.files[0])})}function E({label:t,value:s,onChange:n,disabled:a=!1}){return e.jsxs("label",{children:[e.jsx("input",{disabled:a,type:"checkbox",checked:s,onChange:n})," "+t]})}function be({value:t,options:s,onChange:n}){return e.jsx("select",{className:"p-2 bg-background rounded-md text-foreground  border-foreground",value:t,onChange:a=>n(a.target.value),children:Object.entries(s).map(([a,r])=>e.jsx("option",{className:"bg-background",value:a,children:r},a))})}function cn({value:t,onChange:s,step:n=1,...a}){return e.jsxs("div",{className:"flex space-x-2 gap-1",children:[e.jsx("input",{className:"p-2 grow",type:"range",value:t,step:n,onChange:r=>s(Number(r.target.value)),...a}),e.jsx("input",{type:"number",value:t,step:n,className:"w-16 bg-background rounded-md",onChange:r=>s(Number(r.target.value))})]})}function P({label:t,children:s,sublabel:n}){return e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{children:t}),s]})}const dn=Object.fromEntries(Object.keys(Pt).map(t=>[t,t])),un={monospace:"monospace",Courier:"Courier",CutiePi:"CutiePi",JetBrains:"JetBrains",Hack:"Hack",FiraCode:"FiraCode","FiraCode-SemiBold":"FiraCode SemiBold",teletext:"teletext",tic80:"tic80",mode7:"mode7",BigBlueTerminal:"BigBlueTerminal",x3270:"x3270",Monocraft:"Monocraft",PressStart:"PressStart2P","we-come-in-peace":"we-come-in-peace",galactico:"galactico"},q="–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –û–ö?";function hn({started:t}){const{theme:s,keybindings:n,isBracketClosingEnabled:a,isBracketMatchingEnabled:r,isLineNumbersDisplayed:o,isPatternHighlightingEnabled:m,isActiveLineHighlighted:u,isAutoCompletionEnabled:f,isTooltipEnabled:c,isFlashEnabled:p,isButtonRowHidden:w,isCSSAnimationDisabled:b,isSyncEnabled:k,isLineWrappingEnabled:T,fontSize:S,fontFamily:D,panelPosition:N,audioDeviceName:L,audioEngineTarget:B,togglePanelTrigger:H,maxPolyphony:M,multiChannelOrbits:I,isTabIndentationEnabled:R,isMultiCursorEnabled:d,patternAutoStart:x,includePrebakeScriptInShare:h}=_(),j=Se(),A=AudioContext.prototype.setSinkId!=null;return e.jsxs("div",{className:"text-foreground p-4 space-y-4 w-full",style:{fontFamily:D},children:[A&&e.jsx(P,{label:"–ê—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ",children:e.jsx(an,{isDisabled:t,audioDeviceName:L,onChange:i=>{Z(q).then(v=>{if(v==!0)return g.setKey("audioDeviceName",i),window.location.reload()})}})}),e.jsx(P,{label:"–¶–µ–ª—å –∞—É–¥–∏–æ –¥–≤–∏–∂–∫–∞",children:e.jsx(rn,{target:B,onChange:i=>{Z(q).then(v=>{if(v==!0)return g.setKey("audioEngineTarget",i),window.location.reload()})}})}),e.jsx(P,{label:"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ñ–æ–Ω–∏—è",children:e.jsx(ie,{min:1,max:1/0,onBlur:i=>{let v=parseInt(i.target.value);v=isNaN(v)?It:v,Mt(v),g.setKey("maxPolyphony",v)},onChange:i=>{i=Math.max(1,parseInt(i)),g.setKey("maxPolyphony",isNaN(i)?void 0:i)},type:"number",placeholder:"",value:M??""})}),e.jsx(P,{children:e.jsx(E,{label:"–ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–µ –æ—Ä–±–∏—Ç—ã",onChange:i=>{const v=i.target.checked;Z(q).then(C=>{if(C==!0)return g.setKey("multiChannelOrbits",v),Ot(v),window.location.reload()})},value:I})}),e.jsx(P,{label:"–¢–µ–º–∞",children:e.jsx(be,{options:dn,value:s,onChange:i=>g.setKey("theme",i)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 font-sans",children:[e.jsx(P,{label:"–®—Ä–∏—Ñ—Ç",children:e.jsx(be,{options:un,value:D,onChange:i=>g.setKey("fontFamily",i)})}),e.jsx(P,{label:"–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞",children:e.jsx(cn,{value:S,onChange:i=>g.setKey("fontSize",i),min:10,max:40,step:2})})]}),e.jsxs(P,{label:"Prebake-—Å–∫—Ä–∏–ø—Ç",children:[e.jsx(ln,{}),e.jsx(E,{label:"–í–∫–ª—é—á–∞—Ç—å prebake-—Å–∫—Ä–∏–ø—Ç –≤ —Å—Å—ã–ª–∫—É",onChange:i=>g.setKey("includePrebakeScriptInShare",i.target.checked),value:h})]}),e.jsx(P,{label:"–ö–ª–∞–≤–∏—à–∏",children:e.jsx(Y,{value:n,onChange:i=>g.setKey("keybindings",i),items:{codemirror:"Codemirror",vim:"Vim",emacs:"Emacs",vscode:"VSCode"}})}),e.jsx(P,{label:"–ü–æ–∑–∏—Ü–∏—è –ø–∞–Ω–µ–ª–∏",children:e.jsx(Y,{value:N,onChange:i=>g.setKey("panelPosition",i),items:{bottom:"–°–Ω–∏–∑—É",right:"–°–ø—Ä–∞–≤–∞"}})}),e.jsx(P,{label:"–û—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –ø–æ:",children:e.jsx(Y,{value:H,onChange:i=>g.setKey("togglePanelTrigger",i),items:{click:"–ö–ª–∏–∫",hover:"–ù–∞–≤–µ–¥–µ–Ω–∏–µ"}})}),e.jsxs(P,{label:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",children:[e.jsx(E,{label:"–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–∞—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫",onChange:i=>g.setKey("isBracketMatchingEnabled",i.target.checked),value:r}),e.jsx(E,{label:"–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–∫–æ–±–æ–∫",onChange:i=>g.setKey("isBracketClosingEnabled",i.target.checked),value:a}),e.jsx(E,{label:"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫",onChange:i=>g.setKey("isLineNumbersDisplayed",i.target.checked),value:o}),e.jsx(E,{label:"–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–∏",onChange:i=>g.setKey("isActiveLineHighlighted",i.target.checked),value:u}),e.jsx(E,{label:"–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–¥–µ",onChange:i=>g.setKey("isPatternHighlightingEnabled",i.target.checked),value:m}),e.jsx(E,{label:"–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ",onChange:i=>g.setKey("isAutoCompletionEnabled",i.target.checked),value:f}),e.jsx(E,{label:"–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ Ctrl –∏ –Ω–∞–≤–µ–¥–µ–Ω–∏—é",onChange:i=>g.setKey("isTooltipEnabled",i.target.checked),value:c}),e.jsx(E,{label:"–ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫",onChange:i=>g.setKey("isLineWrappingEnabled",i.target.checked),value:T}),e.jsx(E,{label:"–û—Ç—Å—Ç—É–ø—ã –ø–æ Tab",onChange:i=>g.setKey("isTabIndentationEnabled",i.target.checked),value:R}),e.jsx(E,{label:"–ú—É–ª—å—Ç–∏-–∫—É—Ä—Å–æ—Ä (Cmd/Ctrl+Click)",onChange:i=>g.setKey("isMultiCursorEnabled",i.target.checked),value:d}),e.jsx(E,{label:"–í—Å–ø—ã—à–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏",onChange:i=>g.setKey("isFlashEnabled",i.target.checked),value:p}),e.jsx(E,{label:"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏",onChange:i=>{const v=i.target.checked;Z(q).then(C=>{C&&(g.setKey("isSyncEnabled",v),window.location.reload())})},disabled:j,value:k}),e.jsx(E,{label:"–°–∫—Ä—ã—Ç—å –≤–µ—Ä—Ö–Ω–∏–µ –∫–Ω–æ–ø–∫–∏",onChange:i=>g.setKey("isButtonRowHidden",i.target.checked),value:w}),e.jsx(E,{label:"–û—Ç–∫–ª—é—á–∏—Ç—å CSS-–∞–Ω–∏–º–∞—Ü–∏–∏",onChange:i=>g.setKey("isCSSAnimationDisabled",i.target.checked),value:b}),e.jsx(E,{label:"–ê–≤—Ç–æ-—Å—Ç–∞—Ä—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏",onChange:i=>g.setKey("patternAutoStart",i.target.checked),value:x})]}),e.jsx(P,{label:"–î–∑–µ–Ω-—Ä–µ–∂–∏–º",children:"–ù–∞–∂–º–∏ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø —Å–ª–µ–≤–∞ –≤–≤–µ—Ä—Ö—É!"}),e.jsx(P,{label:"–°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫",children:e.jsx(vt,{onClick:()=>{Z("–£–≤–µ—Ä–µ–Ω—ã?").then(i=>{if(i){const{userPatterns:v}=g.get();g.set({...Xe,userPatterns:v})}})},children:"–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"})})]})}function pn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v2.5A2.25 2.25 0 0 0 4.25 9h2.5A2.25 2.25 0 0 0 9 6.75v-2.5A2.25 2.25 0 0 0 6.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 2 13.25v2.5A2.25 2.25 0 0 0 4.25 18h2.5A2.25 2.25 0 0 0 9 15.75v-2.5A2.25 2.25 0 0 0 6.75 11h-2.5Zm9-9A2.25 2.25 0 0 0 11 4.25v2.5A2.25 2.25 0 0 0 13.25 9h2.5A2.25 2.25 0 0 0 18 6.75v-2.5A2.25 2.25 0 0 0 15.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 11 13.25v2.5A2.25 2.25 0 0 0 13.25 18h2.5A2.25 2.25 0 0 0 18 15.75v-2.5A2.25 2.25 0 0 0 15.75 11h-2.5Z",clipRule:"evenodd"}))}const mn=l.forwardRef(pn);function fn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M6 4.75A.75.75 0 0 1 6.75 4h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.75ZM6 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 10Zm0 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM1.99 4.75a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 15.25a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 10a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1V10Z",clipRule:"evenodd"}))}const xn=l.forwardRef(fn);function gn({onComplete:t}){let s=Tt.createRef();const[n,a]=l.useState(!1),r=l.useCallback(async()=>{s.current.files?.length&&(a(!0),await Ye(ne,s.current.files).then(()=>{Qe(ne,()=>{t(),a(!1)})}))});return e.jsx("div",{children:e.jsxs("label",{style:{alignItems:"center",borderColor:"red",border:1},className:"flex bg-background  p-4  w-fit rounded-xl hover:opacity-50 whitespace-nowrap cursor-pointer",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 mr-2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 7.5h-.75A2.25 2.25 0 0 0 4.5 9.75v7.5a2.25 2.25 0 0 0 2.25 2.25h7.5a2.25 2.25 0 0 0 2.25-2.25v-7.5a2.25 2.25 0 0 0-2.25-2.25h-.75m0-3-3-3m0 0-3 3m3-3v11.25m6-2.25h.75a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25 2.25h-7.5a2.25 2.25 0 0 1-2.25-2.25v-.75"})}),e.jsx("input",{disabled:n,ref:s,id:"audio_file",style:{display:"none"},type:"file",directory:"",webkitdirectory:"",multiple:!0,accept:"audio/*, .wav, .mp3, .m4a, .flac, .aac, .ogg",onChange:()=>{r()}}),n?"–∑–∞–≥—Ä—É–∑–∫–∞...":"–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É –∑–≤—É–∫–æ–≤"]})})}function bn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M15.988 3.012A2.25 2.25 0 0 1 18 5.25v6.5A2.25 2.25 0 0 1 15.75 14H13.5v-3.379a3 3 0 0 0-.879-2.121l-3.12-3.121a3 3 0 0 0-1.402-.791 2.252 2.252 0 0 1 1.913-1.576A2.25 2.25 0 0 1 12.25 1h1.5a2.25 2.25 0 0 1 2.238 2.012ZM11.5 3.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v.25h-3v-.25Z",clipRule:"evenodd"}),l.createElement("path",{d:"M3.5 6A1.5 1.5 0 0 0 2 7.5v9A1.5 1.5 0 0 0 3.5 18h7a1.5 1.5 0 0 0 1.5-1.5v-5.879a1.5 1.5 0 0 0-.44-1.06L8.44 6.439A1.5 1.5 0 0 0 7.378 6H3.5Z"}))}const vn=l.forwardRef(bn);function wn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5ZM10 8a.75.75 0 0 1 .75.75v1.5h1.5a.75.75 0 0 1 0 1.5h-1.5v1.5a.75.75 0 0 1-1.5 0v-1.5h-1.5a.75.75 0 0 1 0-1.5h1.5v-1.5A.75.75 0 0 1 10 8Z",clipRule:"evenodd"}))}const jn=l.forwardRef(wn);function yn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const kn=l.forwardRef(yn);function Cn({packData:t,expandedPacks:s,onTogglePack:n,renderSound:a}){const r=Object.entries(t).sort((o,m)=>o[0].localeCompare(m[0]));return e.jsx("div",{className:"tree-view",children:r.map(([o,m])=>{const u=s.has(o),f=m.length;return e.jsxs("div",{className:"pack-group mb-2",children:[e.jsxs("div",{className:"pack-header flex items-center cursor-pointer hover:bg-foreground/10 rounded px-2 py-1 select-none",onClick:()=>n(o),children:[e.jsx("span",{className:"flex-shrink-0 w-4 h-4 mr-1",children:u?e.jsx(Zt,{className:"w-4 h-4"}):e.jsx(kn,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium flex-grow",children:o}),e.jsxs("span",{className:"text-xs opacity-60 ml-2",children:["(",f,")"]})]}),u&&e.jsx("div",{className:"pack-sounds ml-6 mt-1",children:m.map(([c,p])=>a(c,p))})]},o)})})}function Nn(t){const s={};return t.forEach(n=>{const[a,{data:r}]=n;let o=r.pack||"–î—Ä—É–≥–∏–µ";s[o]||(s[o]=[]),s[o].push(n)}),s}const Sn={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://strudel.cc/",SSR:!1},ve=t=>Array.isArray(t)?t.length:typeof t=="object"?Object.values(t).length:1;function En(t){return new Promise(s=>setTimeout(s,t))}async function Tn(t){try{if(tt()){const{writeText:s}=await Ut(async()=>{const{writeText:n}=await import("./prebake.Cdsm-3G8.js").then(a=>a.Y);return{writeText:n}},__vite__mapDeps([0,1,2,3,4,5,6,7]));await s(t)}else await navigator.clipboard.writeText(t);return!0}catch(s){return console.error("Failed to copy:",s),!1}}function An(t){const s=window.strudelMirror;if(s?.editor){const n=s.editor,{state:a}=n,{from:r,to:o}=a.selection.main;return n.dispatch({changes:{from:r,to:o,insert:t},selection:{anchor:r+t.length}}),n.focus(),!0}return!1}function Pn(){const t=oe(fe),{soundsFilter:s,enabledPacks:n}=_(),[a,r]=l.useState(""),[o,m]=l.useState(!1),[u,f]=l.useState(new Set),[c,p]=l.useState("tree"),{BASE_URL:w}=Sn,b=w.endsWith("/")?w.slice(0,-1):w,k=l.useMemo(()=>{if(!t)return{};const d={};return Object.entries(t).filter(([x])=>!x.startsWith("_")).forEach(([x,{data:h}])=>{const j=h.pack||"other";d[j]=(d[j]||0)+1}),d},[t]),T=l.useMemo(()=>{if(!t)return[];let d=Object.entries(t).filter(([x])=>!x.startsWith("_")).sort((x,h)=>x[0].localeCompare(h[0])).filter(([x])=>x.toLowerCase().includes(a.toLowerCase()));return n!=="all"&&Array.isArray(n)&&(d=d.filter(([x,{data:h}])=>{const j=h.pack||"other";return n.includes(j)})),s===$.USER?d.filter(([x,{data:h}])=>!h.prebake):s===$.DRUMS?d.filter(([x,{data:h}])=>h.type==="sample"&&h.tag==="drum-machines"):s===$.SAMPLES?d.filter(([x,{data:h}])=>h.type==="sample"&&h.tag!=="drum-machines"):s===$.SYNTHS?d.filter(([x,{data:h}])=>["synth","soundfont"].includes(h.type)):s===$.WAVETABLES?d.filter(([x,{data:h}])=>h.type==="wavetable"):s==="importSounds"?[]:d},[t,s,a,n]),S=l.useMemo(()=>Nn(T),[T]),D=d=>{f(x=>{const h=new Set(x);return h.has(d)?h.delete(d):h.add(d),h})};l.useMemo(()=>{if(a){const d=new Set(Object.keys(S));f(d)}},[a,S]);const N=K(d=>{if(n==="all"){const h=Object.keys(k).filter(j=>j!==d);g.setKey("enabledPacks",JSON.stringify(h))}else{const x=Array.isArray(n)?n:[];if(x.includes(d)){const h=x.filter(j=>j!==d);h.length===0?g.setKey("enabledPacks","all"):g.setKey("enabledPacks",JSON.stringify(h))}else{const h=[...x,d],j=Object.keys(k);h.length===j.length?g.setKey("enabledPacks","all"):g.setKey("enabledPacks",JSON.stringify(h))}}}),L=K(()=>{g.setKey("enabledPacks","all")}),B=K(()=>{g.setKey("enabledPacks",JSON.stringify([]))}),H=d=>n==="all"?!0:Array.isArray(n)?n.includes(d):!1,M=l.useRef(),I=l.useRef(0),R=l.useCallback((d,{data:x,onTrigger:h})=>{const j=x?.type==="sample"?`(${ve(x.samples)})`:x?.type==="wavetable"?`(${ve(x.tables)})`:x?.type==="soundfont"?`(${x.fonts.length})`:"";return e.jsxs("span",{className:"inline-flex items-center mr-2 mb-1",children:[e.jsxs("span",{className:"cursor-pointer hover:opacity-50",onMouseDown:async()=>{const A=xe(),i={note:["synth","soundfont"].includes(x.type)?"a3":void 0,s:d,n:I.current,clip:1,release:.5,sustain:1,duration:.5},v=()=>M.current?.node?.disconnect();let C;for(let O=0;O<10;O++){try{const F=A.currentTime+.05,W=await h(F,i,v);if(M.current=W,W?.node){Ft(W.node);break}}catch(F){C=F}O==9?console.warn("Failed to trigger sound after 10 attempts"+(C?`: ${C}`:"")):await En(200)}},children:[d,j]}),e.jsx("button",{className:"ml-0.5 p-0.5 hover:opacity-50 hover:bg-foreground/10 rounded",onClick:A=>{A.stopPropagation(),Tn(d)},title:"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ",children:e.jsx(vn,{className:"w-3 h-3"})}),e.jsx("button",{className:"p-0.5 hover:opacity-50 hover:bg-foreground/10 rounded",onClick:A=>{A.stopPropagation(),An(`s("${d}")`)},title:"–í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä",children:e.jsx(jn,{className:"w-3 h-3"})})]},d)},[]);return K("mouseup",()=>{const d=M.current;M.current=void 0,d?.stop?.(xe().currentTime+.01)}),K("keydown",d=>{isNaN(Number(d.key))||(I.current=Number(d.key))}),K("keyup",d=>{I.current=0}),e.jsxs("div",{id:"sounds-tab",className:"px-4 flex gap-2 flex-col w-full h-full text-foreground",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ie,{placeholder:"–ü–æ–∏—Å–∫",value:a,onChange:d=>r(d),className:"flex-grow"}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>p("tree"),className:`p-1.5 rounded ${c==="tree"?"bg-foreground/20":"hover:bg-foreground/10"}`,title:"–î—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –≤–∏–¥",children:e.jsx(xn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p("flat"),className:`p-1.5 rounded ${c==="flat"?"bg-foreground/20":"hover:bg-foreground/10"}`,title:"–ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫",children:e.jsx(mn,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:" flex shrink-0 flex-wrap",children:e.jsx(Y,{value:s,onChange:d=>g.setKey("soundsFilter",d),items:{samples:"—Å—ç–º–ø–ª—ã",drums:"–¥—Ä–∞–º-–º–∞—à–∏–Ω—ã",synths:"—Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—ã",wavetables:"–≤–æ–ª–Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã",user:"—Å–≤–æ–∏",importSounds:"–∏–º–ø–æ—Ä—Ç –∑–≤—É–∫–æ–≤"}})}),Object.keys(k).length>0&&s!=="importSounds"&&e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("button",{onClick:()=>m(!o),className:"text-left text-xs opacity-70 hover:opacity-100 transition-opacity",children:[o?"‚ñº":"‚ñ∂"," –§–∏–ª—å—Ç—Ä –ø–æ –ø–∞–∫–∞–º"]}),o&&e.jsxs("div",{className:"flex flex-col gap-1 pl-4 max-h-40 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-2 mb-1",children:[e.jsx("button",{onClick:L,className:"text-xs opacity-70 hover:opacity-100 underline",children:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"}),e.jsx("button",{onClick:B,className:"text-xs opacity-70 hover:opacity-100 underline",children:"–°–Ω—è—Ç—å –≤—Å–µ"})]}),Object.entries(k).sort(([d],[x])=>d.localeCompare(x)).map(([d,x])=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-70",children:[e.jsx("input",{type:"checkbox",checked:H(d),onChange:()=>N(d),className:"cursor-pointer"}),e.jsxs("span",{className:"text-xs",children:[d," (",x,")"]})]},d))]})]}),s===$.USER&&T.length>0&&e.jsx(wt,{className:"pl-2",label:"—É–¥–∞–ª–∏—Ç—å –≤—Å–µ",onClick:async()=>{try{await Z("–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—ç–º–ø–ª—ã?")&&(et(ne.dbName),fe.set({}),await le())}catch(d){console.error(d)}}}),e.jsxs("div",{className:"min-h-0 max-h-full grow overflow-auto text-sm break-normal bg-background p-2 rounded-md",children:[c==="tree"&&T.length>0&&e.jsx(Cn,{packData:S,expandedPacks:u,onTogglePack:D,renderSound:R}),c==="flat"&&T.map(([d,x])=>R(d,x)),!T.length&&s==="importSounds"?e.jsxs("div",{className:"prose dark:prose-invert min-w-full pt-2 pb-8 px-4",children:[e.jsx(gn,{onComplete:()=>g.setKey("soundsFilter","user")}),e.jsxs("p",{children:["–ß—Ç–æ–±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–≤—É–∫–∏, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è"," ",e.jsx("a",{href:`${b}/learn/samples/#from-disk-via-import-sounds-folder`,target:"_blank",children:"–≤ –ø–∞–ø–∫–µ –∏–ª–∏ –ø–æ–¥–ø–∞–ø–∫–µ"}),'. –õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞–ø–∫—É "samples", —Å–æ–¥–µ—Ä–∂–∞—â—É—é –ø–æ–¥–ø–∞–ø–∫–∏ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∑–≤—É–∫–∞–º–∏ –∏–ª–∏ –∑–≤—É–∫–æ–≤—ã–º–∏ –±–∞–Ω–∫–∞–º–∏ (—Å–º. –¥–∏–∞–≥—Ä–∞–º–º—É –Ω–∏–∂–µ).'," "]}),e.jsx("pre",{className:"bg-background",children:`‚îî‚îÄ samples <-- –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π —ç—Ç—É –ø–∞–ø–∫—É
   ‚îú‚îÄ swoop
   ‚îÇ  ‚îú‚îÄ swoopshort.wav
   ‚îÇ  ‚îú‚îÄ swooplong.wav
   ‚îÇ  ‚îî‚îÄ swooptight.wav
   ‚îî‚îÄ smash
      ‚îú‚îÄ smashhigh.wav
      ‚îú‚îÄ smashlow.wav
      ‚îî‚îÄ smashmiddle.wav`},"sample-diagram"),e.jsx("p",{children:'–ò–º—è –ø–æ–¥–ø–∞–ø–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–∏ –∑–≤—É–∫–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ "—Å–≤–æ–∏". –ù–µ—Å–∫–æ–ª—å–∫–æ —Å—ç–º–ø–ª–æ–≤ –≤ –æ–¥–Ω–æ–π –ø–æ–¥–ø–∞–ø–∫–µ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∏–º—è, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ ".n( )" ‚Äî –ø–æ–º–Ω–∏, —á—Ç–æ –Ω—É–º–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª—è –∏ –∏–¥—ë—Ç –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!'}),e.jsxs("p",{children:["–ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≤–æ–∏—Ö –∑–≤—É–∫–æ–≤ ‚Äî"," ",e.jsx("a",{href:`${b}/learn/samples/#from-disk-via-import-sounds-folder`,target:"_blank",children:"–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"}),"!"]}),e.jsx("h3",{children:"–ü—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∫–∞ –∑–≤—É–∫–æ–≤"}),e.jsx("pre",{className:"bg-background",children:'n("0 1 2 3 4 5").s("sample-name")'},"sample-preview"),e.jsx("p",{children:'–í—Å—Ç–∞–≤—å —Å—Ç—Ä–æ–∫—É –≤—ã—à–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä, —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—É—é –ø–∞–ø–∫—É. –ò—Å–ø–æ–ª—å–∑—É–π –∏–º—è —Å—ç–º–ø–ª–∞ –∫–∞–∫ –æ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–æ –≤–∫–ª–∞–¥–∫–µ "—Å–≤–æ–∏".'})]}):"",!T.length&&s!=="importSounds"?"–ó–≤—É–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã":""]})]})}const Rn={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://strudel.cc/",SSR:!1},{BASE_URL:ee}=Rn,_n=ee.endsWith("/")?ee.slice(0,-1):ee;function Mn({context:t}){const{fontFamily:s}=_();return e.jsxs("div",{className:"prose dark:prose-invert min-w-full pt-2 font-sans pb-8 px-4 ",style:{fontFamily:s},children:[e.jsx("h3",{children:"üçû –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å"}),e.jsxs("p",{children:["–í—ã –Ω–∞—à–ª–∏ ",e.jsx("span",{className:"underline",style:{fontFamily:"'Fredoka', sans-serif",color:"#D4A574"},children:"bulka"})," ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –ª–∞–π–≤-–∫–æ–¥–∏–Ω–≥–∞ –º—É–∑—ã–∫–∏ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ! –≠—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–∞–∫ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤, —Ç–∞–∫ –∏ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"underline",children:"1. –Ω–∞–∂–º–∏ play"})," - ",e.jsx("span",{className:"underline",children:"2. –∏–∑–º–µ–Ω–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å"})," -"," ",e.jsx("span",{className:"underline",children:"3. –Ω–∞–∂–º–∏ update"})]}),e.jsxs("p",{children:["–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –∏–∑—É—á–∏—Ç–µ"," ",e.jsx("a",{href:`${_n}/workshop/getting-started/`,target:"_blank",children:"–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª"}),". –¢–∞–∫–∂–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫"," ",e.jsx("a",{href:"https://discord.com/invite/HGEdXmRkzT",target:"_blank",children:"discord-–∫–∞–Ω–∞–ª—É"})," ","–¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ–±—â–µ–Ω–∏—è."]}),e.jsx("h3",{children:"üçû –æ –ø—Ä–æ–µ–∫—Ç–µ"}),e.jsxs("p",{children:[e.jsx("span",{style:{fontFamily:"'Fredoka', sans-serif",color:"#D4A574"},children:"Bulka"})," ‚Äî —ç—Ç–æ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π —Ñ–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞"," ",e.jsx("a",{href:"https://strudel.cc/",target:"_blank",children:"Strudel"}),", –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è JavaScript-–≤–µ—Ä—Å–∏–µ–π"," ",e.jsx("a",{href:"https://tidalcycles.org/",target:"_blank",children:"TidalCycles"}),". –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Strudel —Å–æ–∑–¥–∞–Ω Alex McLean –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –≠—Ç–æ —Å–≤–æ–±–æ–¥–Ω–æ–µ –ü–û –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π"," ",e.jsx("a",{href:"https://codeberg.org/uzu/strudel/src/branch/main/LICENSE",target:"_blank",children:"GNU Affero General Public License"}),". –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Bulka –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞"," ",e.jsx("a",{href:"https://github.com/timoncool/Bulka",target:"_blank",children:"GitHub"}),". –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–≤—É–∫–æ–≤:"," ",e.jsx("a",{href:"https://github.com/felixroos/dough-samples/blob/main/README.md",children:"dough-samples"}),". –ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞"," ",e.jsx("a",{href:"https://opencollective.com/tidalcycles",target:"_blank",children:"Open Collective"})," ","üíñ"]}),e.jsxs("p",{children:["–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è"," ",e.jsx("a",{href:"https://t.me/nerual_dreming",target:"_blank",children:"Nerual Dreming"})," ","‚Äî –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º"," ",e.jsx("a",{href:"https://artgeneration.me/",target:"_blank",children:"ArtGeneration.me"}),", —Ç–µ—Ö–Ω–æ–±–ª–æ–≥–µ—Ä–æ–º –∏ –Ω–µ–π—Ä–æ-–µ–≤–∞–Ω–≥–µ–ª–∏—Å—Ç–æ–º."]})]})}function we(){return`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async function*On(t){const s=new TextDecoder;let n="";for(;;){const{done:a,value:r}=await t.read();if(a)break;n+=s.decode(r,{stream:!0});const o=n.split(`
`);n=o.pop()||"";for(const m of o)if(m.startsWith("data: ")){const u=m.slice(6);if(u==="[DONE]")return;try{const c=JSON.parse(u).choices?.[0]?.delta?.content;c&&(yield c)}catch{}}}}async function*In(t){const s=new TextDecoder;let n="";for(;;){const{done:a,value:r}=await t.read();if(a)break;n+=s.decode(r,{stream:!0});const o=n.split(`
`);n=o.pop()||"";for(const m of o)if(m.startsWith("data: ")){const u=m.slice(6);try{const f=JSON.parse(u);if(f.type==="content_block_delta"){const c=f.delta?.text;c&&(yield c)}}catch{}}}}function Fn(t){const s=_(),[n,a]=l.useState([]),[r,o]=l.useState(""),[m,u]=l.useState(!1),[f,c]=l.useState(null),p=l.useRef(null),w=l.useCallback(async N=>{if(!N.trim()||m)return;const{aiApiKey:L,aiProvider:B,aiModel:H}=s;if(!L){c("API –∫–ª—é—á –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á.");return}c(null),u(!0);const M={id:we(),role:"user",content:N.trim()},I={id:we(),role:"assistant",content:""};a(R=>[...R,M,I]),o("");try{const R=t?.editorRef?.current?.code||"",d=[...n,M].map(i=>({role:i.role,content:i.content}));p.current=new AbortController;const x=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:d,apiKey:L,provider:B,model:H,currentCode:R}),signal:p.current.signal});if(!x.ok){const i=await x.json().catch(()=>({}));throw new Error(i.error||`HTTP ${x.status}`)}const h=x.body.getReader(),j=B==="anthropic"?In(h):On(h);let A="";for await(const i of j)A+=i,a(v=>{const C=[...v],O=C.length-1;return C[O]?.role==="assistant"&&(C[O]={...C[O],content:A}),C})}catch(R){R.name==="AbortError"?console.log("[Chat] Aborted"):(console.error("[Chat] Error:",R),c(R.message),a(d=>d.filter(x=>x.content)))}finally{u(!1),p.current=null}},[n,m,s,t]),b=l.useCallback(()=>{p.current?.abort()},[]),k=l.useCallback(()=>{a([]),c(null)},[]),T=l.useCallback(N=>{o(N.target.value)},[]),S=l.useCallback(N=>{N?.preventDefault(),w(r)},[r,w]),D=l.useCallback(N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),w(r))},[r,w]);return{messages:n,input:r,isLoading:m,error:f,sendMessage:w,stop:b,clearMessages:k,setInput:o,handleInputChange:T,handleSubmit:S,handleKeyDown:D,hasApiKey:!!s.aiApiKey,provider:s.aiProvider,model:s.aiModel}}const Dn=[{label:"–ü—Ä–æ—Å—Ç–æ–π –±–∏—Ç",prompt:"–°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–π –±–∏—Ç —Å –±–æ—á–∫–æ–π, —Å–Ω–µ–π—Ä–æ–º –∏ —Ö—ç—Ç–æ–º"},{label:"–î–æ–±–∞–≤—å –±–∞—Å",prompt:"–î–æ–±–∞–≤—å –±–∞—Å–æ–≤—É—é –ª–∏–Ω–∏—é –∫ —Ç–µ–∫—É—â–µ–º—É —Ç—Ä–µ–∫—É"},{label:"–û–±—ä—è—Å–Ω–∏ –∫–æ–¥",prompt:"–û–±—ä—è—Å–Ω–∏ —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∫–æ–¥"},{label:"–î–æ–±–∞–≤—å —ç—Ñ—Ñ–µ–∫—Ç",prompt:"–î–æ–±–∞–≤—å —Ä–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏—é –∏ –∑–∞–¥–µ—Ä–∂–∫—É"}],je={openai:[{value:"gpt-4o-mini",label:"GPT-4o Mini (–±—ã—Å—Ç—Ä—ã–π)"},{value:"gpt-4o",label:"GPT-4o (—É–º–Ω—ã–π)"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"}],anthropic:[{value:"claude-3-5-sonnet-20241022",label:"Claude 3.5 Sonnet"},{value:"claude-3-opus-20240229",label:"Claude 3 Opus"},{value:"claude-3-haiku-20240307",label:"Claude 3 Haiku (–±—ã—Å—Ç—Ä—ã–π)"}]};function Ln({onClose:t}){const s=_(),[n,a]=l.useState(s.aiApiKey||""),[r,o]=l.useState(s.aiProvider||"openai"),[m,u]=l.useState(s.aiModel||"gpt-4o-mini"),f=()=>{nt(n),st(r),at(m),t?.()};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 opacity-70",children:"–ü—Ä–æ–≤–∞–π–¥–µ—Ä"}),e.jsxs("select",{value:r,onChange:c=>{o(c.target.value),u(je[c.target.value][0].value)},className:"w-full px-3 py-2 rounded bg-background border border-lineHighlight",children:[e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"anthropic",children:"Anthropic (Claude)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 opacity-70",children:"–ú–æ–¥–µ–ª—å"}),e.jsx("select",{value:m,onChange:c=>u(c.target.value),className:"w-full px-3 py-2 rounded bg-background border border-lineHighlight",children:je[r]?.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1 opacity-70",children:["API –ö–ª—é—á ",r==="openai"?"(OpenAI)":"(Anthropic)"]}),e.jsx("input",{type:"password",value:n,onChange:c=>a(c.target.value),placeholder:r==="openai"?"sk-...":"sk-ant-...",className:"w-full px-3 py-2 rounded bg-background border border-lineHighlight"}),e.jsx("p",{className:"text-xs mt-1 opacity-50",children:"–ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ"})]}),e.jsxs("div",{className:"text-xs opacity-70",children:["–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á:",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener",className:"ml-2 underline hover:no-underline",children:"OpenAI"}),e.jsx("span",{className:"mx-1",children:"|"}),e.jsx("a",{href:"https://console.anthropic.com/",target:"_blank",rel:"noopener",className:"underline hover:no-underline",children:"Anthropic"})]}),e.jsx("button",{onClick:f,disabled:!n.trim(),className:y("w-full py-2 rounded font-medium","bg-foreground text-background","hover:opacity-90 disabled:opacity-50"),children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"})]})}function Bn({message:t}){const s=t.role==="user";return e.jsx("div",{className:y("flex w-full mb-3",s?"justify-end":"justify-start"),children:e.jsx("div",{className:y("max-w-[85%] rounded-lg px-3 py-2 text-sm",s?"bg-foreground text-background":"bg-lineHighlight text-foreground"),children:e.jsx("div",{className:"whitespace-pre-wrap break-words",children:t.content||"..."})})})}function Hn({context:t}){const s=l.useRef(null),n=Fn(t),[a,r]=l.useState(!1);return l.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[n.messages]),!n.hasApiKey||a?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-lineHighlight",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ü§ñ"}),e.jsx("span",{className:"text-sm font-medium",children:"Bulka AI"})]}),n.hasApiKey&&e.jsx("button",{onClick:()=>r(!1),className:"text-xs opacity-70 hover:opacity-100",children:"‚Üê –ù–∞–∑–∞–¥"})]}),e.jsx(Ln,{onClose:()=>r(!1)})]}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-lineHighlight",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ü§ñ"}),e.jsx("span",{className:"text-sm font-medium",children:"Bulka AI"}),e.jsxs("span",{className:"text-xs opacity-50",children:["(",n.model,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[n.messages.length>0&&e.jsx("button",{onClick:n.clearMessages,className:"text-xs opacity-50 hover:opacity-100",children:"–û—á–∏—Å—Ç–∏—Ç—å"}),e.jsx("button",{onClick:()=>r(!0),className:"text-xs opacity-50 hover:opacity-100",children:"‚öôÔ∏è"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 p-2 border-b border-lineHighlight",children:Dn.map((o,m)=>e.jsx("button",{onClick:()=>n.sendMessage(o.prompt),disabled:n.isLoading,className:"px-2 py-1 text-xs rounded border border-lineHighlight hover:bg-lineHighlight disabled:opacity-50",children:o.label},m))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:n.messages.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üéµ"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"–ü—Ä–∏–≤–µ—Ç!"}),e.jsx("p",{className:"text-sm opacity-70 max-w-sm",children:"–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø–∏—Å–∞—Ç—å –º—É–∑—ã–∫—É. –û–ø–∏—à–∏ —á—Ç–æ —Ö–æ—á–µ—à—å —Å–æ–∑–¥–∞—Ç—å."})]}):e.jsxs(e.Fragment,{children:[n.messages.map(o=>e.jsx(Bn,{message:o},o.id)),n.isLoading&&!n.messages[n.messages.length-1]?.content&&e.jsx("div",{className:"flex justify-start mb-3",children:e.jsx("div",{className:"bg-lineHighlight rounded-lg px-3 py-2 text-sm opacity-70",children:"–î—É–º–∞—é..."})}),e.jsx("div",{ref:s})]})}),n.error&&e.jsx("div",{className:"mx-3 mb-2 p-2 text-xs text-red-400 bg-red-500/10 rounded",children:n.error}),e.jsxs("form",{onSubmit:n.handleSubmit,className:"flex gap-2 p-2 border-t border-lineHighlight",children:[e.jsx("input",{type:"text",value:n.input,onChange:n.handleInputChange,onKeyDown:n.handleKeyDown,placeholder:"–û–ø–∏—à–∏ —á—Ç–æ —Ö–æ—á–µ—à—å...",disabled:n.isLoading,className:"flex-1 px-3 py-2 rounded bg-background border border-lineHighlight focus:outline-none focus:border-foreground/50 disabled:opacity-50"}),n.isLoading?e.jsx("button",{type:"button",onClick:n.stop,className:"px-4 py-2 rounded bg-red-500/20 text-red-400 border border-red-500/50",children:"–°—Ç–æ–ø"}):e.jsx("button",{type:"submit",disabled:!n.input.trim(),className:"px-4 py-2 rounded bg-foreground text-background disabled:opacity-50",children:"‚Üµ"})]})]})}function Kn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M9.78 4.22a.75.75 0 0 1 0 1.06L7.06 8l2.72 2.72a.75.75 0 1 1-1.06 1.06L5.47 8.53a.75.75 0 0 1 0-1.06l3.25-3.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const $n=l.forwardRef(Kn);function Un({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"}))}const Zn=l.forwardRef(Un),Gn=typeof window<"u"&&window.__TAURI__;function Re({context:t}){const s=_(),{isPanelOpen:n,activeFooter:a}=s;return e.jsxs(_e,{settings:s,className:y(n?"min-h-[360px] max-h-[360px]":"min-h-12 max-h-12","overflow-hidden flex flex-col"),children:[n&&e.jsx("div",{className:"flex h-full overflow-auto pr-10 ",children:e.jsx(Me,{context:t,tab:a})}),e.jsx("div",{className:"absolute right-4 pt-4",children:e.jsx(Ie,{settings:s})}),e.jsx("div",{className:"flex  justify-between min-h-12 max-h-12 grid-cols-2 items-center",children:e.jsx(Oe,{setTab:Ee,tab:a})})]})}function Wn({context:t}){const s=_(),{activeFooter:n,isPanelOpen:a}=s;return e.jsx(_e,{settings:s,className:y(a?"min-w-[min(600px,80vw)] max-w-[min(600px,80vw)]":"min-w-12 max-w-12"),children:a?e.jsxs("div",{className:y("flex flex-col h-full"),children:[e.jsxs("div",{className:"flex justify-between w-full ",children:[e.jsx(Oe,{setTab:Ee,tab:n}),e.jsx(Ie,{settings:s})]}),e.jsx("div",{className:"overflow-auto h-full",children:e.jsx(Me,{context:t,tab:n})})]}):e.jsx("button",{onClick:r=>{G(!0)},"aria-label":"–æ—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å –º–µ–Ω—é",className:y("flex flex-col hover:bg-lineBackground items-center cursor-pointer justify-center w-full  h-full"),children:e.jsx($n,{className:"text-foreground opacity-50 w-6 h-6"})})})}const re={–ø—Ä–∏–≤–µ—Ç:"intro","AI —á–∞—Ç":"chat",–ø–∞—Ç—Ç–µ—Ä–Ω—ã:"patterns",–∑–≤—É–∫–∏:"sounds",—Å–ø—Ä–∞–≤–∫–∞:"reference",–∫–æ–Ω—Å–æ–ª—å:"console",–Ω–∞—Å—Ç—Ä–æ–π–∫–∏:"settings"};Gn&&(re.—Ñ–∞–π–ª—ã="files");function _e({children:t,className:s,settings:n,...a}){const r=n.togglePanelTrigger==="hover";return e.jsx("nav",{onClick:()=>{n.isPanelOpen||G(!0)},onMouseEnter:()=>{r&&!n.isPanelOpen&&G(!0)},onMouseLeave:()=>{r&&!n.isPanelPinned&&G(!1)},"aria-label":"Menu Panel",className:y("bg-lineHighlight group overflow-x-auto",s),...a,children:t})}function Me({context:t,tab:s}){switch(qt(),s){case"chat":return e.jsx(Hn,{context:t});case"patterns":return e.jsx(jt,{context:t});case"console":return e.jsx(Jt,{});case"sounds":return e.jsx(Pn,{});case"reference":return e.jsx(nn,{});case"settings":return e.jsx(hn,{started:t.started});case"files":return e.jsx(Yt,{});default:return e.jsx(Mn,{context:t})}}function Vn({label:t,isSelected:s,onClick:n}){return e.jsx(e.Fragment,{children:e.jsx("button",{onClick:n,className:y("h-8 px-2 text-foreground cursor-pointer hover:opacity-50 flex items-center space-x-1 border-b",s?"border-foreground":"border-transparent"),children:t})})}function Oe({setTab:t,tab:s,className:n}){return e.jsx("div",{className:y("flex select-none max-w-full overflow-auto pb-2",n),children:Object.keys(re).map(a=>{const r=re[a];return e.jsx(Vn,{isSelected:s===r,label:a,onClick:()=>t(r)},a)})})}function Ie({settings:t}){const{togglePanelTrigger:s,isPanelPinned:n,isPanelOpen:a}=t,r=s==="hover";if(a)return r?e.jsx(zn,{pinned:n}):e.jsx(qn,{onClick:()=>G(!1)})}function zn({pinned:t}){return e.jsx("button",{onClick:()=>rt(!t),className:y("text-foreground max-h-8 min-h-8 max-w-8 min-w-8 items-center justify-center p-1.5 group-hover:flex",t?"flex":"hidden"),"aria-label":"–ó–∞–∫—Ä–µ–ø–∏—Ç—å –ø–∞–Ω–µ–ª—å",children:e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",className:"w-full h-full",opacity:t?1:".3",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a6 6 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707s.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a6 6 0 0 1 1.013.16l3.134-3.133a3 3 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146"})})})}function qn({onClick:t}){return e.jsx("button",{onClick:t,className:y("text-foreground max-h-8 min-h-8 max-w-8 min-w-8 items-center justify-center p-1.5 group-hover:flex"),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é",children:e.jsx(Zn,{})})}function de(t){const{editorRef:s,containerRef:n,init:a}=t;return e.jsx("section",{className:"text-gray-100 cursor-text pb-0 overflow-auto grow",id:"code",ref:r=>{n.current=r,s.current||a()}})}function Jn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z",clipRule:"evenodd"}))}const Fe=l.forwardRef(Jn);function De(t){const{started:s,handleTogglePlay:n}=t;if(!s)return e.jsxs("button",{onClick:()=>n(),className:"text-white text-2xl fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-[1000] m-auto p-4 bg-black rounded-md flex items-center space-x-2",children:[e.jsx(Fe,{className:"w-6 h-6"}),e.jsx("span",{children:"–ø–ª–µ–π"})]})}function ue(t){const{error:s}=t;if(s!=null)return e.jsxs("div",{className:"text-background px-2 py-1 bg-foreground w-full ml-auto",children:["–û—à–∏–±–∫–∞: ",s.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ :-/"]})}function Xn(t){const{context:s,...n}=t,{containerRef:a,editorRef:r,error:o,init:m,pending:u,started:f,handleTogglePlay:c}=s;return e.jsxs("div",{className:"h-full flex w-full flex-col relative",...n,children:[e.jsx(ce,{active:u}),e.jsx(De,{started:f,handleTogglePlay:c}),e.jsx("div",{className:"grow flex relative overflow-hidden",children:e.jsx(de,{containerRef:a,editorRef:r,init:m})}),e.jsx(ue,{error:o}),e.jsx(Re,{context:s})]})}function Yn({title:t,titleId:s,...n},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?l.createElement("title",{id:s},t):null,l.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm5-2.25A.75.75 0 0 1 7.75 7h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-4.5Z",clipRule:"evenodd"}))}const Qn=l.forwardRef(Yn),es={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://strudel.cc/",SSR:!1},{BASE_URL:te}=es,ye=te.endsWith("/")?te.slice(0,-1):te;function Le({context:t,embedded:s=!1}){const{started:n,pending:a,isDirty:r,activeCode:o,handleTogglePlay:m,handleEvaluate:u,handleShuffle:f,handleShare:c}=t,p=typeof window<"u"&&(s||window.location!==window.parent.location),{isZen:w,isButtonRowHidden:b,isCSSAnimationDisabled:k,fontFamily:T}=_();return e.jsxs("header",{id:"header",className:y("flex-none text-black  z-[100] text-lg select-none h-20 md:h-14",!w&&!p&&"bg-lineHighlight",w?"h-12 w-8 fixed top-0 left-0":"sticky top-0 w-full py-1 justify-between",p?"flex":"md:flex"),style:{fontFamily:T},children:[e.jsx("div",{className:"px-4 flex space-x-2 md:pt-0 select-none",children:e.jsxs("h1",{onClick:()=>{p&&window.open(window.location.href.replace("embed",""))},className:y(p?"text-l cursor-pointer":"text-xl","text-foreground font-bold flex space-x-2 items-center"),children:[e.jsx("div",{className:y("mt-[1px]",n&&!k&&"animate-bounce","cursor-pointer",w&&"fixed top-2 right-4"),onClick:()=>{p||ot(!w)},children:e.jsx("span",{className:"block text-2xl",children:"üçû"})}),!w&&e.jsxs("div",{className:"space-x-2",children:[e.jsx("span",{style:{fontFamily:"'Fredoka', sans-serif",color:"#D4A574"},children:"bulka"}),e.jsx("span",{className:"text-sm font-medium",children:"—Ä–µ–¥–∞–∫—Ç–æ—Ä"}),!p&&b&&e.jsx("a",{href:`${ye}/learn`,className:"text-sm opacity-25 font-medium",children:"–î–û–ö–ò"})]})]})}),!w&&!b&&e.jsxs("div",{className:"flex max-w-full overflow-auto text-foreground px-1 md:px-2",children:[e.jsx("button",{onClick:m,title:n?"—Å—Ç–æ–ø":"–∏–≥—Ä–∞—Ç—å",className:y(p?"px-2":"p-2","hover:opacity-50",!n&&!k&&"animate-pulse"),children:a?e.jsx(e.Fragment,{children:"–∑–∞–≥—Ä—É–∑–∫–∞..."}):e.jsxs("span",{className:y("flex items-center space-x-2"),children:[n?e.jsx(Qn,{className:"w-6 h-6"}):e.jsx(Fe,{className:"w-6 h-6"}),!p&&e.jsx("span",{children:n?"—Å—Ç–æ–ø":"–∏–≥—Ä–∞—Ç—å"})]})}),e.jsx("button",{onClick:u,title:"–æ–±–Ω–æ–≤–∏—Ç—å",className:y("flex items-center space-x-1",p?"px-2":"p-2",!r||!o?"opacity-50":"hover:opacity-50"),children:!p&&e.jsx("span",{children:"–æ–±–Ω–æ–≤–∏—Ç—å"})}),!p&&e.jsx("button",{title:"–ø–æ–¥–µ–ª–∏—Ç—å—Å—è",className:y("cursor-pointer hover:opacity-50 flex items-center space-x-1",p?"px-2":"p-2"),onClick:c,children:e.jsx("span",{children:"–ø–æ–¥–µ–ª–∏—Ç—å—Å—è"})}),!p&&e.jsx("a",{title:"—É—Ä–æ–∫–∏",href:`${ye}/workshop/getting-started/`,className:y("hover:opacity-50 flex items-center space-x-1",p?"px-2":"p-2"),children:e.jsx("span",{children:"—É—Ä–æ–∫–∏"})})]})]})}function ts(t){const{context:s,...n}=t,{containerRef:a,editorRef:r,error:o,init:m,pending:u}=s,f=_(),{panelPosition:c,isZen:p}=f;return e.jsxs("div",{className:"h-full flex flex-col relative",...n,children:[e.jsx(ce,{active:u}),e.jsx(Le,{context:s}),e.jsxs("div",{className:"grow flex relative overflow-hidden",children:[e.jsx(de,{containerRef:a,editorRef:r,init:m}),!p&&c==="right"&&e.jsx(Wn,{context:s})]}),e.jsx(ue,{error:o}),!p&&c==="bottom"&&e.jsx(Re,{context:s})]})}function ns(t){const{context:s,...n}=t,{pending:a,started:r,handleTogglePlay:o,containerRef:m,editorRef:u,error:f,init:c}=s;return e.jsxs("div",{className:"h-full flex flex-col relative",...n,children:[e.jsx(ce,{active:a}),e.jsx(Le,{context:s,embedded:!0}),e.jsx(De,{started:r,handleTogglePlay:o}),e.jsx("div",{className:"grow flex relative overflow-hidden",children:e.jsx(de,{containerRef:m,editorRef:u,init:c})}),e.jsx(ue,{error:f})]})}const ss=Gt,as=(t,s,n,a,r)=>{const o=performance.now()/1e3;return ss(t,o,a,r)},rs=t=>(s,n)=>(t.set(s,n),n),ke=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Be=536870912,Ce=Be*2,os=(t,s)=>n=>{const a=s.get(n);let r=a===void 0?n.size:a<Ce?a+1:0;if(!n.has(r))return t(n,r);if(n.size<Be){for(;n.has(r);)r=Math.floor(Math.random()*Ce);return t(n,r)}if(n.size>ke)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(r);)r=Math.floor(Math.random()*ke);return t(n,r)},He=new WeakMap,ls=rs(He),J=os(ls,He),is=t=>t.method!==void 0&&t.method==="call",cs=t=>typeof t.id=="number"&&typeof t.result=="boolean",ds=t=>{const s=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),a=new Map,r=new Worker(t);return r.addEventListener("message",({data:c})=>{if(is(c)){const{params:{timerId:p,timerType:w}}=c;if(w==="interval"){const b=s.get(p);if(typeof b===void 0)throw new Error("The timer is in an undefined state.");if(typeof b=="number"){const k=a.get(b);if(k===void 0||k.timerId!==p||k.timerType!==w)throw new Error("The timer is in an undefined state.")}else typeof b=="function"&&b()}else if(w==="timeout"){const b=n.get(p);if(typeof b===void 0)throw new Error("The timer is in an undefined state.");if(typeof b=="number"){const k=a.get(b);if(k===void 0||k.timerId!==p||k.timerType!==w)throw new Error("The timer is in an undefined state.")}else typeof b=="function"&&(b(),n.delete(p))}}else if(cs(c)){const{id:p}=c,w=a.get(p);if(w===void 0)throw new Error("The timer is in an undefined state.");const{timerId:b,timerType:k}=w;a.delete(p),k==="interval"?s.delete(b):n.delete(b)}else{const{error:{message:p}}=c;throw new Error(p)}}),{clearInterval:c=>{if(typeof s.get(c)=="function"){const p=J(a);a.set(p,{timerId:c,timerType:"interval"}),s.set(c,p),r.postMessage({id:p,method:"clear",params:{timerId:c,timerType:"interval"}})}},clearTimeout:c=>{if(typeof n.get(c)=="function"){const p=J(a);a.set(p,{timerId:c,timerType:"timeout"}),n.set(c,p),r.postMessage({id:p,method:"clear",params:{timerId:c,timerType:"timeout"}})}},setInterval:(c,p=0,...w)=>{const b=J(s);return s.set(b,()=>{c(...w),typeof s.get(b)=="function"&&r.postMessage({id:null,method:"set",params:{delay:p,now:performance.timeOrigin+performance.now(),timerId:b,timerType:"interval"}})}),r.postMessage({id:null,method:"set",params:{delay:p,now:performance.timeOrigin+performance.now(),timerId:b,timerType:"interval"}}),b},setTimeout:(c,p=0,...w)=>{const b=J(n);return n.set(b,()=>c(...w)),r.postMessage({id:null,method:"set",params:{delay:p,now:performance.timeOrigin+performance.now(),timerId:b,timerType:"timeout"}}),b}}},us=(t,s)=>{let n=null;return()=>{if(n!==null)return n;const a=new Blob([s],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(a);return n=t(r),setTimeout(()=>URL.revokeObjectURL(r)),n}},hs=`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(({data:n})=>{try{if("clear"===n.method){const{id:e,params:{timerId:t,timerType:o}}=n;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==n.method)throw new Error('The given method "'.concat(n.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:a,timerType:m}}=n;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,a,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,a,s)}}}}catch(e){postMessage({error:{message:e.message},id:n.id,result:null})}}))})();`,Ke=us(ds,hs),ps=t=>Ke().clearInterval(t),ms=(...t)=>Ke().setInterval(...t),{latestCode:Ne,maxPolyphony:fs,audioDeviceName:xs,multiChannelOrbits:gs}=g.get();let Q,$e,X,Ue,Ze;typeof window<"u"&&(Ze=Dt({maxPolyphony:fs,audioDeviceName:xs,multiChannelOrbits:it(gs)}),Q=lt(),$e=le(),X=Te(),Ue=()=>X.clearRect(0,0,X.canvas.height,X.canvas.width));async function bs(t){return Q?(await Q).find(n=>n.packageName===t):void 0}const vs="// LOADING";function ws(){const{isSyncEnabled:t,audioEngineTarget:s,prebakeScript:n,includePrebakeScriptInShare:a}=_(),r=s!==U.osc,o=r?Lt:as,m=r?Bt:St,u=l.useCallback(()=>{const h=[-2,2],j=Te(),A=new Rt({sync:t,defaultOutput:o,getTime:m,setInterval:ms,clearInterval:ps,transpiler:Ae,autodraw:!1,root:D.current,initialCode:vs,pattern:Ct,drawTime:h,drawContext:j,prebake:async()=>Promise.all([Q,$e]).then(()=>{if(n?.length)return Wt(n??"")}),onUpdateState:i=>{c({...i})},onToggle:i=>{i||ge()},beforeEval:()=>Ze,afterEval:i=>{const{code:v}=i;window.parent?.postMessage(v),ct(v),window.location.hash="#"+Nt(v),L(v);const C=dt();ut(v);const O={...C,code:v};let F=O.id;if(C.collection!==V.collection){if(v!==C.code){const he=V.duplicate(O);F=he.id,z(he.data)}}else F=V.isValidID(F)?F:ht(),z(V.update(F,O).data);pe(F)},bgFill:!1});window.strudelMirror=A,pt().then(async i=>{let v,C;i?(v=i,C="I have loaded the code from the URL."):Ne?(v=Ne,C="Your last session has been loaded!"):(v=`// @title Pixel Sunrise
// @by Nerual Dreming

cpm(180/2);

stack(
  arrange(
    // === –ë–õ–û–ö 1: –í–°–¢–£–ü–õ–ï–ù–ò–ï ===
    [4,
      stack(
        s("bd sd bd [sd sd*2]").crush(6).gain(0.1).bank("RolandTR808"),
        s("hh*16").gain(0.08).bank("RolandTR808").bpf(sine.range(500, 4000).slow(6)).bpq(4).pan(sine.slow(5))
      )
      ._scope()
    ],

    // === –ë–õ–û–ö 2: –û–°–ù–û–í–ù–ê–Ø –ß–ê–°–¢–¨ ===
    [16,
      stack(
        stack(
          s("bd sd bd [sd sd*2]").crush(6).gain(0.1).bank("RolandTR808"),
          s("hh*16").gain(0.08).bank("RolandTR808").bpf(sine.range(500, 4000).slow(6)).bpq(4).pan(sine.slow(5))
        )._scope(),

        n("0").chord("<Am F C G>").voicing()
          .s("square").decay(0.1).sustain(0).lpf(400).gain(0.12)
          .pan(sine.slow(8))
          ._scope(),

        n("0").chord("<Am F C G>").mode("root:c1").voicing()
          .s("triangle").lpf(sine.range(150, 500).slow(16)).lpq(3).room(0.5).gain(0.08)
          .pan(sine.slow(12))
          ._scope(),

        n("<0 2 4 5 7 5 4 2 7 5 9 7 11 9 7 5>").chord("<Am F C G>").voicing()
          .s("square").decay(0.15).sustain(0).gain(0.1)
          .phaser(sine.slow(6).range(2, 6))
          .jux(x => x.gain(0.5).speed(0.99))
          ._scope(),

        n("~ 4 ~ 3 ~ 2 ~ 0")
          .chord("<Am F C G>")
          .voicing()
          .s("triangle").decay(0.3).sustain(0).gain(0.08).room(0.4)
          .phaser(sine.slow(9).range(1, 5))
          .jux(x => x.gain(0.6).speed(1.01))
          ._scope()
      )
    ],

    // === –ë–õ–û–ö 3: –ë–†–ï–ô–ö–î–ê–£–ù ===
    [8,
      stack(
        chord("<Am F C G>").voicing().s("sawtooth").attack(1).release(1.5).lpf(800).gain(0.07)
          .phaser(1)
          .pan(sine.slow(10))
          ._scope(),
        n("4 3 2 0 2 3 4 5")
          .chord("<Am F C G>").voicing()
          .s("triangle").decay(0.4).sustain(0).gain(0.1)
          .phaser(4)
          .delay(0.25).delayfeedback(0.5)
          .pan(sine.slow(4))
          ._scope()
      )
    ],

    // === –ë–õ–û–ö 4: –ö–û–ù–¶–û–í–ö–ê ===
    [8,
      stack(
        stack(
          s("bd sd bd [sd sd*2]").crush(6).gain(0.1).bank("RolandTR808"),
          s("hh*16").gain(0.08).bank("RolandTR808").bpf(sine.range(500, 4000).slow(6)).bpq(4).pan(sine.slow(5))
        )._scope(),

        n("0").chord("<Am F C G>").voicing()
          .s("square").decay(0.1).sustain(0).lpf(400).gain(0.12)
          .pan(sine.slow(8))
          ._scope(),
        n("0").chord("<Am F C G>").mode("root:c1").voicing()
          .s("triangle").lpf(sine.range(150, 500).slow(16)).lpq(3).room(0.5).gain(0.08)
          .pan(sine.slow(12))
          ._scope(),

        n("<0 2 4 5 7 5 4 2 7 5 9 7 11 9 7 5>").chord("<Am F C G>").voicing()
          .s("square").decay(0.15).sustain(0).gain(0.1)
          .phaser(sine.slow(6).range(2, 6))
          .jux(x => x.gain(0.5).speed(0.99))
          ._scope(),

        n("~ 4 ~ 3 ~ 2 ~ 0")
          .chord("<Am F C G>")
          .voicing()
          .s("triangle").decay(0.3).sustain(0).gain(0.08).room(0.4)
          .phaser(sine.slow(9).range(1, 5))
          .jux(x => x.gain(0.6).speed(1.01))
          ._scope()
      )
    ]
  )
).gain(0.15);`,C="Default code has been loaded"),A.setCode(v),L(v),se(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Bulka! ${C} –ù–∞–∂–º–∏ –∏–≥—Ä–∞—Ç—å –∏–ª–∏ ctrl+enter —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å!`,"highlight")}),S.current=A},[]),[f,c]=l.useState({}),{started:p,isDirty:w,error:b,activeCode:k,pending:T}=f,S=l.useRef(),D=l.useRef(),N=oe(g,{keys:Object.keys(me)});l.useEffect(()=>{let h={};Object.keys(me).forEach(j=>{Object.prototype.hasOwnProperty.call(N,j)&&(h[j]=N[j])}),S.current?.updateSettings(h)},[N]);const L=h=>{const j=mt(h);document.title=(j.title?`${j.title} - `:"")+"Bulka —Ä–µ–¥–∞–∫—Ç–æ—Ä"},B=async()=>{S.current?.toggle()},H=async()=>{(await bs("@strudel/tonal"))?.resetVoicings(),Ht(),Kt(),Ue(),ge(),$t(),S.current.repl.setCps(.5),await le()},M=async(h,j=!1)=>{z(h),S.current.setCode(h.code),j&&(await H(),I())},I=()=>{S.current.evaluate()};return{started:p,pending:T,isDirty:w,activeCode:k,handleTogglePlay:B,handleUpdate:M,handleShuffle:async()=>{const h=await ft(),j=h.code;se(`[repl] ‚ú® loading random tune "${h.id}"`),pe(h.id),z(h),await H(),S.current.setCode(j),S.current.repl.evaluate(j)},handleShare:async()=>{let h=f.code;a&&(h=n+`
`+h),xt(h)},handleEvaluate:I,init:u,error:b,editorRef:S,containerRef:D}}function Ds({embedded:t=!1}){const s=t||gt(),n=Se()?Xn:s?ns:ts,a=ws(),{fontFamily:r}=_();return e.jsx(n,{context:a,style:{fontFamily:r}})}export{Ds as Repl};
